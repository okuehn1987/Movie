import{d as x,r as m,j as B,o as f,f as t,a as y,e as p,b as l,a2 as R,i as r,D as d,a1 as _,V as h,x as q,g as U,K as D,L as u,S as L,h as M,t as b,O as V,l as c,m as P,s as g,p as N,Q,F as T,A as $}from"./app-BEL-OU-Z.js";const Y=x({__name:"AbsencePatchRequests",props:{absencePatchRequests:{}},setup(C){var w;const k=C,s=m(((w=k.absencePatchRequests)==null?void 0:w.find(n=>n.id==Number(route().params.openAbsencePatch)))??null),o=m(!!s.value),S=m(!1),i=m(1);function F(n){var a;const e=(a=k.absencePatchRequests)==null?void 0:a.find(v=>v.id===n.id);e&&(s.value=e,o.value=!0)}function A(n){s.value&&$.patch(route("absencePatch.updateStatus",{absencePatch:s.value.id}),{accepted:n},{onSuccess:()=>{o.value=!1,S.value=!0}})}return(n,e)=>(f(),B(T,null,[t(_,{hover:"","items-per-page":"5",page:i.value,"onUpdate:page":e[1]||(e[1]=a=>i.value=a),"no-data-text":"keine Abwesenheitsanträge vorhanden.","onClick:row":e[2]||(e[2]=(a,v)=>F(v.item)),items:n.absencePatchRequests.map(a=>({id:a.id,user:a.user.first_name+" "+a.user.last_name,start:r(d).fromSQL(a.start).toFormat("dd.MM.yyyy"),end:r(d).fromSQL(a.end).toFormat("dd.MM.yyyy")})),headers:[{title:"Mitarbeiter",key:"user"},{title:"Von",key:"start"},{title:"Bis",key:"end"}]},{bottom:l(()=>[n.absencePatchRequests.length>5?(f(),y(R,{key:0,modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=a=>i.value=a),length:Math.ceil(n.absencePatchRequests.length/5)},null,8,["modelValue","length"])):p("",!0)]),_:1},8,["page","items"]),s.value?(f(),y(Q,{key:0,modelValue:o.value,"onUpdate:modelValue":e[7]||(e[7]=a=>o.value=a),"max-width":"1000"},{default:l(()=>[t(h,{title:"Abwesenheit von "+s.value.user.first_name+" "+s.value.user.last_name},{append:l(()=>[t(c,{icon:"",variant:"text",onClick:e[3]||(e[3]=a=>o.value=!1)},{default:l(()=>[t(N,null,{default:l(()=>[...e[8]||(e[8]=[g("mdi-close",-1)])]),_:1})]),_:1})]),default:l(()=>[t(q),t(U,null,{default:l(()=>[t(D,null,{default:l(()=>[s.value.absence_type.name=="Urlaub"?(f(),y(u,{key:0,cols:"12"},{default:l(()=>[t(L,{type:s.value.user.leaveDaysForYear<s.value.usedDays?"warning":"info",class:"w-100"},{default:l(()=>[t(D,null,{default:l(()=>[t(u,{cols:"12",md:"6"},{default:l(()=>[M("div",null,"Verfügbare Urlaubstage "+b(r(d).now().year)+": "+b(s.value.user.leaveDaysForYear),1)]),_:1}),t(u,{cols:"12",md:"6"},{default:l(()=>[M("div",null,"Benötigte Urlaubstage: "+b(s.value.usedDays),1)]),_:1})]),_:1})]),_:1},8,["type"])]),_:1})):p("",!0),t(u,{cols:"12"},{default:l(()=>[t(V,{label:"Abwesenheitsgrund",modelValue:s.value.absence_type.name,"onUpdate:modelValue":e[4]||(e[4]=a=>s.value.absence_type.name=a),readonly:""},null,8,["modelValue"])]),_:1}),t(u,{cols:"12",md:"6"},{default:l(()=>[t(V,{label:"Von:","model-value":r(d).fromSQL(s.value.start).toFormat("dd.MM.yyyy"),readonly:""},null,8,["model-value"])]),_:1}),t(u,{cols:"12",md:"6"},{default:l(()=>[t(V,{label:"Bis:","model-value":r(d).fromSQL(s.value.end).toFormat("dd.MM.yyyy"),readonly:""},null,8,["model-value"])]),_:1})]),_:1})]),_:1}),t(u,{cols:"12",class:"d-flex justify-end ga-3"},{default:l(()=>[t(c,{color:"error",onClick:e[5]||(e[5]=P(a=>A(!1),["stop"]))},{default:l(()=>[...e[9]||(e[9]=[g("Ablehnen",-1)])]),_:1}),t(c,{color:"success",onClick:e[6]||(e[6]=P(a=>A(!0),["stop"]))},{default:l(()=>[...e[10]||(e[10]=[g("Akzeptieren",-1)])]),_:1})]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])):p("",!0)],64))}});export{Y as _};
