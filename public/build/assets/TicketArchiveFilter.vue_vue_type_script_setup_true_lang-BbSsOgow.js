import{d as U,r as c,a as b,o as k,Q as A,b as l,f as t,V as N,g as S,J as B,m as w,h as f,K,e as $,L as n,N as y,i as r,as as z,O as C,l as u,s as d,p as x,P as _,A as j}from"./app-D_msUg6M.js";const D={class:"d-flex ga-2 justify-end"},P=U({__name:"TicketArchiveFilter",props:{customers:{},users:{},operatingSites:{}},setup(F){var v;const V=F,a=useForm({customer_id:V.customers.length==1?((v=V.customers[0])==null?void 0:v.id)??null:null,assignees:[],start:null,end:null}),i=c("");function T(){a.reset(),g()}function g(){j.reload({only:["archiveTickets"],data:{page:1,openTicket:null,tab:"archive",...a.data()},onSuccess:()=>{m.value=!1}})}const m=c(!1);return(p,e)=>(k(),b(A,{"max-width":"1000",modelValue:m.value,"onUpdate:modelValue":e[6]||(e[6]=o=>m.value=o)},{activator:l(({props:o})=>[t(u,_(o,{variant:"flat",color:"primary"}),{default:l(()=>[t(x,null,{default:l(()=>[...e[7]||(e[7]=[d("mdi-filter",-1)])]),_:1})]),_:1},16)]),default:l(({isActive:o})=>[t(N,null,{title:l(()=>[...e[8]||(e[8]=[f("div",{class:"d-flex justify-space-between align-center w-100"},[f("span",null,"Im Archiv suchen")],-1)])]),append:l(()=>[t(u,{icon:"",variant:"text",onClick:s=>{o.value=!1,r(a).reset()}},{default:l(()=>[t(x,null,{default:l(()=>[...e[9]||(e[9]=[d("mdi-close",-1)])]),_:1})]),_:1},8,["onClick"])]),default:l(()=>[t(S,null,{default:l(()=>[t(B,{onSubmit:w(g,["prevent"])},{default:l(()=>[t(K,null,{default:l(()=>[p.customers.length>1?(k(),b(n,{key:0,cols:"12"},{default:l(()=>[t(y,{clearable:"",label:"Kunde wählen",items:p.customers.map(s=>({value:s.id,title:s.name})),modelValue:r(a).customer_id,"onUpdate:modelValue":e[0]||(e[0]=s=>r(a).customer_id=s),"error-messages":r(a).errors.customer_id},null,8,["items","modelValue","error-messages"])]),_:1})):$("",!0),t(n,{cols:"12"},{default:l(()=>[t(y,{label:"Zuweisung",multiple:"",clearable:"",chips:"",items:p.users.map(s=>({value:s.id,title:`${s.first_name} ${s.last_name}`})),"error-messages":r(a).errors.assignees,modelValue:r(a).assignees,"onUpdate:modelValue":e[1]||(e[1]=s=>r(a).assignees=s),"auto-select-first":"",onKeydown:e[2]||(e[2]=z(s=>i.value="",["enter"])),search:i.value,"onUpdate:search":e[3]||(e[3]=s=>i.value=s)},null,8,["items","error-messages","modelValue","search"])]),_:1}),t(n,{cols:"12",md:"6"},{default:l(()=>[t(C,{type:"date",label:"von",modelValue:r(a).start,"onUpdate:modelValue":e[4]||(e[4]=s=>r(a).start=s),"error-messages":r(a).errors.start},null,8,["modelValue","error-messages"])]),_:1}),t(n,{cols:"12",md:"6"},{default:l(()=>[t(C,{type:"date",label:"bis",modelValue:r(a).end,"onUpdate:modelValue":e[5]||(e[5]=s=>r(a).end=s),"error-messages":r(a).errors.end},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),f("div",D,[t(u,{titel:"Abbrechen",color:"error",onClick:w(T,["stop"])},{default:l(()=>[...e[10]||(e[10]=[d("Filter zurücksetzen",-1)])]),_:1}),t(u,{titel:"Suchen",type:"submit",color:"primary"},{default:l(()=>[...e[11]||(e[11]=[d("Tickets anzeigen",-1)])]),_:1})])]),_:1})]),_:1})]),_:2},1024)]),_:1},8,["modelValue"]))}});export{P as _};
