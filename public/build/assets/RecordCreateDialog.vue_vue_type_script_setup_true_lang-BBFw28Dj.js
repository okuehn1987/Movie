import{d as y,D as v,r as w,a as c,o as f,Q as R,b as e,f as r,x as _,g as E,J as F,m as O,K as U,L as i,O as D,i as s,$ as x,l as u,s as m,t as B,p as V,V as I,P as S}from"./app-BEL-OU-Z.js";import{D as L}from"./types-BVvW7sCV.js";import{s as A}from"./utils-CA3WA1rW.js";const Q=y({__name:"RecordCreateDialog",props:{users:{},ticket:{},record:{},mode:{}},setup(C){var g,b,k;const a=C,t=useForm({start:a.record?v.fromSQL(a.record.start).toISO():null,duration:A(((g=a.record)==null?void 0:g.duration)??0),description:((b=a.record)==null?void 0:b.description)??"",resources:((k=a.record)==null?void 0:k.resources)??""}),n=w(!1);function T(){a.record?t.patch(route("ticketRecord.update",{ticketRecord:a.record.id}),{onSuccess:()=>{t.reset(),n.value=!1}}):t.post(route("ticket.ticketRecord.store",{ticket:a.ticket.id}),{onSuccess:()=>{t.reset(),n.value=!1}})}return(p,o)=>(f(),c(R,{"max-width":"600px",modelValue:n.value,"onUpdate:modelValue":o[4]||(o[4]=d=>n.value=d)},{activator:e(({props:d})=>[p.mode==="create"?(f(),c(u,S({key:0,title:"Eintrag hinzufügen"},d,{variant:"text"}),{default:e(()=>[r(V,null,{default:e(()=>[...o[5]||(o[5]=[m("mdi-plus",-1)])]),_:1})]),_:1},16)):(f(),c(u,S({key:1,title:"Eintrag bearbeiten"},d,{variant:"text"}),{default:e(()=>[r(V,null,{default:e(()=>[...o[6]||(o[6]=[m("mdi-pencil",-1)])]),_:1})]),_:1},16))]),default:e(({isActive:d})=>[r(I,{title:p.mode==="create"?"Eintrag erstellen":"Eintrag bearbeiten"},{append:e(()=>[r(u,{icon:"",variant:"text",onClick:l=>d.value=!1},{default:e(()=>[r(V,null,{default:e(()=>[...o[7]||(o[7]=[m("mdi-close",-1)])]),_:1})]),_:1},8,["onClick"])]),default:e(()=>[r(_),r(E,null,{default:e(()=>[r(F,{onSubmit:O(T,["prevent"])},{default:e(()=>[r(U,null,{default:e(()=>[r(i,{cols:"12",md:"6"},{default:e(()=>[r(D,{label:"Start",type:"datetime-local","model-value":s(v).fromISO(s(t).start??"").toFormat(s(L)),"onUpdate:modelValue":o[0]||(o[0]=l=>{s(t).start=l}),"error-messages":s(t).errors.start,required:""},null,8,["model-value","error-messages"])]),_:1}),r(i,{cols:"12",md:"6"},{default:e(()=>[r(D,{label:"Dauer (in Stunden)",type:"time",modelValue:s(t).duration,"onUpdate:modelValue":o[1]||(o[1]=l=>s(t).duration=l),"error-messages":s(t).errors.duration,required:""},null,8,["modelValue","error-messages"])]),_:1}),r(i,{cols:"12"},{default:e(()=>[r(x,{label:"Beschreibung",modelValue:s(t).description,"onUpdate:modelValue":o[2]||(o[2]=l=>s(t).description=l),"error-messages":s(t).errors.description},null,8,["modelValue","error-messages"])]),_:1}),r(i,{cols:"12"},{default:e(()=>[r(x,{label:"Verwendete Ressourcen",rows:"1",modelValue:s(t).resources,"onUpdate:modelValue":o[3]||(o[3]=l=>s(t).resources=l),"error-messages":s(t).errors.resources},null,8,["modelValue","error-messages"])]),_:1}),r(i,{class:"text-end"},{default:e(()=>[r(u,{color:"primary",type:"submit",loading:s(t).processing,disabled:!s(t).isDirty},{default:e(()=>[m(B(p.mode==="create"?"Speichern":"Änderungen speichern"),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:2},1032,["title"])]),_:1},8,["modelValue"]))}});export{Q as _};
