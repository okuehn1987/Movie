import{d as F,y as D,z as v,o as C,a as M,A as S,b as a,f as t,h as U,j as N,k as m,u as l,V as k,B as T,t as q,e as E,C as I,i as $,E as j,H as o,I as z,J as w,v as H}from"./app-BhHYUD1N.js";const P=F({__name:"EditCreateAbsence",props:D({users:{},absence_types:{},selectedAbsence:{},selectedDate:{}},{modelValue:{type:Boolean,required:!0},modelModifiers:{},selectedUser:{required:!0},selectedUserModifiers:{}}),emits:["update:modelValue","update:selectedUser"],setup(u){var b,p,V,f,_,y,g;const r=u,n=v(u,"modelValue"),x=v(u,"selectedUser"),e=useForm({user_id:((b=r.selectedAbsence)==null?void 0:b.user_id)??x.value,start:((p=r.selectedAbsence)==null?void 0:p.start)??((V=r.selectedDate)==null?void 0:V.toFormat("yyyy-MM-dd"))??null,end:((f=r.selectedAbsence)==null?void 0:f.end)??((_=r.selectedDate)==null?void 0:_.toFormat("yyyy-MM-dd"))??null,absence_type_id:((y=r.selectedAbsence)==null?void 0:y.absence_type_id)??null,absence_id:r.selectedAbsence&&"absence_id"in r.selectedAbsence?r.selectedAbsence.absence_id:((g=r.selectedAbsence)==null?void 0:g.id)??null});function B(){e.absence_id?e.post(route("absence.absencePatch.store",{absence:e.absence_id}),{onSuccess:()=>{e.reset(),n.value=!1}}):e.post(route("absence.store"),{onSuccess:()=>{e.reset(),n.value=!1}})}return(i,d)=>(C(),M(S,{"max-width":"1000",modelValue:n.value,"onUpdate:modelValue":d[3]||(d[3]=c=>n.value=c)},{default:a(({isActive:c})=>{var A;return[t(H,{title:"Abwesenheit"+(l(e).user_id!=i.$page.props.auth.user.id?" von "+((A=i.users.map(s=>({...s,name:s.first_name+" "+s.last_name})).find(s=>s.id===l(e).user_id))==null?void 0:A.name):"")+" beantragen"},{append:a(()=>[t(U,{icon:"",variant:"text",onClick:s=>c.value=!1},{default:a(()=>[t(N,null,{default:a(()=>d[4]||(d[4]=[m("mdi-close")])),_:1})]),_:2},1032,["onClick"])]),default:a(()=>[l(e).errors.user_id?(C(),M(k,{key:0},{default:a(()=>[t(T,{color:"error",closable:""},{default:a(()=>[m(q(l(e).errors.user_id),1)]),_:1})]),_:1})):E("",!0),t(k,null,{default:a(()=>[t(I,{onSubmit:$(B,["prevent"])},{default:a(()=>[t(j,null,{default:a(()=>[t(o,{cols:"12"},{default:a(()=>[t(z,{label:"Abwesenheitsgrund angeben",items:i.absence_types.map(s=>({title:s.name,value:s.id})),modelValue:l(e).absence_type_id,"onUpdate:modelValue":d[0]||(d[0]=s=>l(e).absence_type_id=s),"error-messages":l(e).errors.absence_type_id},null,8,["items","modelValue","error-messages"])]),_:1}),t(o,{cols:"12",md:"6"},{default:a(()=>[t(w,{type:"date",label:"Von",modelValue:l(e).start,"onUpdate:modelValue":d[1]||(d[1]=s=>l(e).start=s),"error-messages":l(e).errors.start},null,8,["modelValue","error-messages"])]),_:1}),t(o,{cols:"12",md:"6"},{default:a(()=>[t(w,{type:"date",label:"Bis",modelValue:l(e).end,"onUpdate:modelValue":d[2]||(d[2]=s=>l(e).end=s),"error-messages":l(e).errors.end},null,8,["modelValue","error-messages"])]),_:1}),t(o,{cols:"12",class:"text-end"},{default:a(()=>[t(U,{loading:l(e).processing,type:"submit",color:"primary"},{default:a(()=>d[5]||(d[5]=[m("beantragen")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:2},1032,["title"])]}),_:1},8,["modelValue"]))}});export{P as _};
