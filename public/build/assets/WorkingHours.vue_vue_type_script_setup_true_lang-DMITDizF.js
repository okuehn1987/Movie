import{d as C,n as S,R as b,D as c,I as B,o as u,c as m,b as s,V as M,e as t,u as l,H as y,f as g,p as $,q as f,x as r,S as k,g as p,h as i,t as n,k as h,j as x,E as N,m as V,i as T}from"./app-C70O6Deq.js";import{a as A}from"./utils-ChetLCJ0.js";const D={class:"d-flex align-center ga-3"},E={class:"d-flex flex-column"},G={class:"text-h6"},I={class:"d-flex align-center ga-3"},O={class:"d-flex flex-column"},F={class:"text-h6"},K={class:"d-flex align-center ga-3"},Q={class:"d-flex flex-column"},R={class:"text-h6"},Z={class:"d-flex align-center ga-3"},j={class:"d-flex flex-column"},q={class:"text-h6"},U={key:1},Y=C({__name:"WorkingHours",props:{lastWorkLog:{},operating_times:{},overtime:{},workingHours:{}},setup(z){const d=z,v=S(),L=A();function W(e=!1){var o,a;y.post(route("workLog.store"),{is_home_office:e,id:(o=d.lastWorkLog)!=null&&o.end?null:(a=d.lastWorkLog)==null?void 0:a.id})}const _=d.operating_times.find(e=>{var o;return e.type==((o=b.weekdays("long",{locale:"en"})[c.now().weekday-1])==null?void 0:o.toLowerCase())}),w=B(()=>{var e,o;return(e=d.lastWorkLog)!=null&&e.end?d.workingHours.current:L.value.diff(c.fromSQL(((o=d.lastWorkLog)==null?void 0:o.start)||"")).as("hours")+d.workingHours.current});return(e,o)=>(u(),m(M,{title:"Arbeitszeit"},{append:s(()=>[t(g,{icon:"mdi-eye",variant:"text",onClick:o[0]||(o[0]=a=>l(y).get(e.route("user.workLog.index",{user:l(v).props.auth.user.id})))})]),default:s(()=>[t(T,null,{default:s(()=>[t($,null,{default:s(()=>[t(f,{cols:"12",sm:"6"},{default:s(()=>[r("div",D,[t(k,{color:"blue-grey",rounded:"",size:"40",class:"elevation-2"},{default:s(()=>[t(p,{size:"24",icon:"mdi-clock-check"})]),_:1}),r("div",E,[o[3]||(o[3]=i(" gesamt Woche ")),r("div",G,n(Math.floor(w.value||0))+":"+n(Math.floor((w.value||0)%1*60).toString().padStart(2,"0")),1)])])]),_:1}),e.$page.props.auth.user.home_office?(u(),m(f,{key:0,cols:"12",sm:"6"},{default:s(()=>[r("div",I,[t(k,{color:"green",rounded:"",size:"40",class:"elevation-2"},{default:s(()=>[t(p,{size:"24",icon:"mdi-clock-check"})]),_:1}),r("div",O,[o[4]||(o[4]=i(" Homeoffice Woche ")),r("div",F,n(Math.floor(e.workingHours.currentHomeOffice||0))+":"+n(Math.floor((e.workingHours.currentHomeOffice||0)%1*60).toString().padStart(2,"0")),1)])])]),_:1})):h("",!0),t(f,{cols:"12",sm:"6"},{default:s(()=>[r("div",K,[t(k,{color:"orange",rounded:"",size:"40",class:"elevation-2 text-white"},{default:s(()=>[t(p,{size:"24",icon:"mdi-clock-plus"})]),_:1}),r("div",Q,[o[5]||(o[5]=i(" Ãœberstunden ")),r("div",R,n(e.overtime),1)])])]),_:1}),e.lastWorkLog&&e.lastWorkLog.end==null?(u(),m(f,{key:1,cols:"12",sm:"6"},{default:s(()=>[r("div",Z,[t(k,{color:"blue",rounded:"",size:"40",class:"elevation-2"},{default:s(()=>[t(p,{size:"24",icon:"mdi-timer"})]),_:1}),r("div",j,[o[6]||(o[6]=i(" Hier seit ")),r("div",q,n(l(c).fromSQL(e.lastWorkLog.start).toFormat("HH:mm"))+" Uhr",1)])])]),_:1})):h("",!0),t(f,{cols:"12"},{default:s(()=>[l(_)&&l(L).diff(l(c).fromFormat(l(_).end,"HH:mm")).as("minutes")>0?(u(),m(x,{key:0,color:"error"},{default:s(()=>{var a;return[o[8]||(o[8]=i(" Es fehlt eine Meldung. Bitte Zeitkorrektur. ")),t(g,{color:"error",href:`/user/${l(v).props.auth.user.id}/workLogs?workLog=${(a=e.lastWorkLog)==null?void 0:a.id}`},{default:s(()=>o[7]||(o[7]=[i(" Zeitkorrektur ")])),_:1},8,["href"])]}),_:1})):l(v).props.auth.user.home_office&&(!e.lastWorkLog||e.lastWorkLog.end)||e.lastWorkLog&&e.lastWorkLog.is_home_office&&!e.lastWorkLog.end?(u(),N("div",U,[t(g,{block:"",size:"large",onClick:o[1]||(o[1]=V(a=>W(!0),["stop"])),color:"primary",class:"me-2"},{default:s(()=>[i(n(!e.lastWorkLog||e.lastWorkLog.end?"Kommen Homeoffice":"Gehen Homeoffice"),1)]),_:1})])):h("",!0)]),_:1}),t(f,{cols:"12"},{default:s(()=>{var a,H;return[(a=e.lastWorkLog)!=null&&a.end||!((H=e.lastWorkLog)!=null&&H.is_home_office)?(u(),m(g,{key:0,block:"",size:"large",onClick:o[2]||(o[2]=V(J=>W(),["stop"])),color:"primary"},{default:s(()=>[i(n(!e.lastWorkLog||e.lastWorkLog.end?"Kommen":"Gehen"),1)]),_:1})):h("",!0)]}),_:1})]),_:1})]),_:1})]),_:1}))}});export{Y as _};
