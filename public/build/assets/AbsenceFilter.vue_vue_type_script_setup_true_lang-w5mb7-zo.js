import{d as _,A as y,B as g,w as F,a as p,o as d,b as r,f as a,V,v as A,g as k,C,m as x,h as B,E as D,G as M,H as v,i as N,l as i,q as o,t as S,n as c,I as U,J as j}from"./app-B1U3nmhF.js";const q={class:"d-flex justify-space-between"},w={key:1},$=_({__name:"AbsenceFilter",props:y({user_absence_filters:{},users:{},absence_types:{}},{filterForm:{required:!0},filterFormModifiers:{}}),emits:["update:filterForm"],setup(n){const m=n,e=g(n,"filterForm");F(()=>e.value.set,l=>{if(l==null)return;let s;if(typeof l=="object"&&e.value.isDirty?s=m.user_absence_filters.find(t=>t.id==l.value):typeof l=="string"&&(s=m.user_absence_filters.find(t=>t.name==l)),!s)return;const u={set:typeof l=="string"?{title:l,value:s.id}:l,selected_users:s.data.user_ids,selected_absence_types:s.data.absence_type_ids,selected_statuses:s.data.statuses};e.value.defaults(u),e.value.reset()});function f(){var l;typeof e.value.set!="string"&&((l=e.value.set)!=null&&l.value)?e.value.patch(route("userAbsenceFilter.update",{userAbsenceFilter:e.value.set.value})):e.value.post(route("userAbsenceFilter.store"))}function b(){const l={set:"",selected_users:[],selected_absence_types:[],selected_statuses:["created","accepted"]};e.value.defaults(l),e.value.reset()}return(l,s)=>(d(),p(j,{"max-width":"1000"},{activator:r(({props:u})=>[a(i,U(u,{variant:"flat",color:"primary"}),{default:r(()=>[a(c,null,{default:r(()=>[...s[6]||(s[6]=[o("mdi-filter",-1)])]),_:1})]),_:1},16)]),default:r(({isActive:u})=>[a(V,{title:"Abwesenheiten filtern"},{append:r(()=>[a(i,{icon:"",variant:"text",onClick:t=>u.value=!1},{default:r(()=>[a(c,null,{default:r(()=>[...s[7]||(s[7]=[o("mdi-close",-1)])]),_:1})]),_:1},8,["onClick"])]),default:r(()=>[a(A),a(k,null,{default:r(()=>[a(C,{onSubmit:s[5]||(s[5]=x(t=>f(),["prevent"]))},{default:r(()=>[a(D,{label:"Filtergruppe auswählen oder neue erstellen","auto-select-first":"exact",variant:"underlined",items:l.user_absence_filters.map(t=>({value:t.id,title:t.name})),modelValue:e.value.set,"onUpdate:modelValue":s[0]||(s[0]=t=>e.value.set=t),"error-messages":e.value.errors.set,required:"",clearable:""},null,8,["items","modelValue","error-messages"]),a(M,{label:"Nutzer",items:l.users.map(t=>({title:t.first_name+" "+t.last_name,value:t.id})),modelValue:e.value.selected_users,"onUpdate:modelValue":s[1]||(s[1]=t=>e.value.selected_users=t),"error-messages":e.value.errors.selected_users,clearable:"",chips:"",multiple:"",variant:"underlined"},null,8,["items","modelValue","error-messages"]),a(v,{label:"Abwesenheitsgrund",items:l.absence_types.map(t=>({title:t.name,value:t.id})),modelValue:e.value.selected_absence_types,"onUpdate:modelValue":s[2]||(s[2]=t=>e.value.selected_absence_types=t),"error-messages":e.value.errors.selected_absence_types,clearable:"",chips:"",multiple:""},null,8,["items","modelValue","error-messages"]),a(v,{label:"Abwesenheitsstatus",items:[{title:"Erstellt",value:"created"},{title:"Akzeptiert",value:"accepted"},{title:"Abgelehnt",value:"declined"}],modelValue:e.value.selected_statuses,"onUpdate:modelValue":s[3]||(s[3]=t=>e.value.selected_statuses=t),"error-messages":e.value.errors.selected_statuses,clearable:"",chips:"",multiple:""},null,8,["modelValue","error-messages"]),B("div",q,[typeof e.value.set=="object"&&e.value.set!=null?(d(),p(i,{key:0,color:"error",onClick:s[4]||(s[4]=t=>{e.value.delete(l.route("userAbsenceFilter.destroy",{userAbsenceFilter:e.value.set.value}),{onSuccess:()=>{b()}})})},{default:r(()=>[...s[8]||(s[8]=[o(" Filter löschen ",-1)])]),_:1})):(d(),N("div",w)),a(i,{disabled:!e.value.isDirty,color:"primary",type:"submit"},{default:r(()=>[o(S(typeof e.value.set=="string"||e.value.set==null?"Filter anlegen":"Filter bearbeiten"),1)]),_:1},8,["disabled"])])]),_:1})]),_:1})]),_:2},1024)]),_:1}))}});export{$ as _};
