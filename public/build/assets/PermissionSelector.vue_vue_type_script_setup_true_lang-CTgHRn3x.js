import{d as k,B as w,C as j,a as m,o as r,L as p,b as t,f as o,e as h,j as c,z as v,F as f,aF as K,K as b,aG as _,aH as C,m as E,M as V,aI as U}from"./app-C8SQ_KK1.js";const P=k({__name:"PermissionSelector",props:w({permissions:{},label:{},errors:{},objKey:{},items:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(y){const u=j(y,"modelValue");return(s,L)=>(r(),m(p,{cols:"12"},{default:t(()=>[o(K,{multiple:"",elevation:"1",variant:"accordion"},{default:t(()=>[(r(!0),c(f,null,v(s.items.filter(l=>l.keys.length>1),l=>(r(),m(_,{key:l.label},{default:t(()=>[o(C,{"expand-icon":"mdi-chevron-double-down","collapse-icon":"mdi-chevron-double-up"},{default:t(()=>[o(b,{onClick:E(()=>{},["stop"])},{default:t(()=>[o(p,{cols:"12",md:"6"},{default:t(()=>[o(V,{items:[{title:"Keine Rechte",value:null},{title:"Lesen",value:"read"},{title:"Schreiben",value:"write"}],label:l.label,"onUpdate:modelValue":d=>{l.keys.forEach(e=>{var a;const n=(a=s.permissions.find(i=>i.name==e))==null?void 0:a.except;u.value[e]=n&&d==n?["read","write"].find(i=>i!=n):d})},variant:"outlined"},null,8,["label","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024),o(U,null,{default:t(()=>[o(b,null,{default:t(()=>[(r(!0),c(f,null,v(u.value,(d,e)=>(r(),c(f,{key:e},[l.keys.includes(e)?(r(),m(p,{key:0,cols:"12",sm:"6",md:"3"},{default:t(()=>{var n;return[o(V,{label:(n=s.permissions.find(a=>a.name==e))==null?void 0:n.label,items:[{title:"Keine Rechte",value:null},{title:"Lesen",value:"read"},{title:"Schreiben",value:"write"}].filter(a=>{var i;return a.value==null||a.value!=((i=s.permissions.find(g=>g.name==e))==null?void 0:i.except)}),modelValue:u.value[e],"onUpdate:modelValue":a=>u.value[e]=a,"error-messages":Object.entries(s.errors).filter(([a,i])=>a.includes(e)&&a.includes(s.objKey)&&i).map(([,a])=>a),variant:"outlined"},null,8,["label","items","modelValue","onUpdate:modelValue","error-messages"])]}),_:2},1024)):h("",!0)],64))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),s.items.some(l=>l.keys.length==1)?(r(),m(b,{key:0,class:"mt-4"},{default:t(()=>[(r(!0),c(f,null,v(s.items.filter(l=>l.keys.length==1),l=>(r(),m(p,{cols:"12",md:"6",key:l.label},{default:t(()=>{var d;return[o(V,{label:(d=s.permissions.find(e=>e.name==l.keys[0]))==null?void 0:d.label,items:[{title:"Keine Rechte",value:null},{title:"Lesen",value:"read"},{title:"Schreiben",value:"write"}].filter(e=>{var n;return e.value==null||e.value!=((n=s.permissions.find(a=>a.name==l.keys[0]))==null?void 0:n.except)}),modelValue:u.value[l.keys[0]],"onUpdate:modelValue":e=>u.value[l.keys[0]]=e,"error-messages":Object.entries(s.errors).filter(([e,n])=>e.includes(l.keys[0])&&e.includes(s.objKey)&&n).map(([,e])=>e),variant:"outlined"},null,8,["label","items","modelValue","onUpdate:modelValue","error-messages"])]}),_:2},1024))),128))]),_:1})):h("",!0)]),_:1}))}});export{P as _};
