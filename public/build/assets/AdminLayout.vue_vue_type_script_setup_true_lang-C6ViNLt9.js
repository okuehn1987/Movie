import{d as k,o as n,q as I,a as l,b as r,f as t,a7 as L,j as V,Y as M,h as f,F as y,s as D,a3 as h,a8 as S,e as d,u,P as A,a4 as C,i as c,a9 as B,k as v,t as g,G as m,aa as P,r as O,L as T,M as _,N as F,g as b,m as G,ab as j,ac as $,ad as q,O as N,ae as E,af as H,C as z,ag as U}from"./app-DrMW2YkR.js";import{_ as W}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Y=k({__name:"AppbarActions",setup(w){function e(a){m.post(route("notification.update",{notification:a.id}),{},{onSuccess:()=>{let s;return a.type=="App\\Notifications\\WorkLogPatchNotification"&&(s={openPatch:a.data.work_log_patch_id}),a.type=="App\\Notifications\\AbsenceNotification"&&(s={openAbsence:a.data.absence_id}),a.type=="App\\Notifications\\AbsencePatchNotification"&&(s={openAbsencePatch:a.data.absence_patch_id}),s&&m.get(route("dispute.index",s))}})}return(a,s)=>(n(),I(y,null,[a.$page.props.auth.user.unread_notifications.length>0?(n(),l(S,{key:0},{activator:r(({props:o})=>[t(f,M({color:"primary"},o,{stacked:""}),{default:r(()=>[a.$page.props.auth.user.unread_notifications.length>0?(n(),l(L,{key:0,content:a.$page.props.auth.user.unread_notifications.length,color:"error"},{default:r(()=>[t(V,{icon:"mdi-bell"})]),_:2},1032,["content"])):(n(),l(V,{key:1,icon:"mdi-bell"}))]),_:2},1040)]),default:r(()=>[t(h,null,{default:r(()=>[(n(!0),I(y,null,D(a.$page.props.auth.user.unread_notifications,o=>(n(),l(C,{onClick:c(i=>e(o),["stop"]),key:o.id},{default:r(()=>[t(B,null,{default:r(()=>[v(g(o.data.title),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})):d("",!0),t(u(A),{href:a.route("user.profile",{user:a.$page.props.auth.user.id})},{default:r(()=>[t(f,{stacked:"",color:"black","prepend-icon":"mdi-account",title:"Profil"})]),_:1},8,["href"]),t(u(A),{method:"post",href:a.route("logout"),as:"button"},{default:r(()=>[t(f,{stacked:"",color:"black","prepend-icon":"mdi-logout",title:"Abmelden"})]),_:1},8,["href"])],64))}}),J=k({__name:"DrawerMenu",setup(w){return(e,a)=>(n(),l(h,{nav:"","onClick:select":a[0]||(a[0]=s=>u(m).get(s.id)),items:[{props:{active:e.route().current("dashboard"),prependIcon:"mdi-view-dashboard"},value:e.route("dashboard"),title:"Dashboard"},e.can("absence","viewIndex")&&{props:{active:e.route().current("absence.index"),prependIcon:"mdi-timer-cancel-outline"},value:e.route("absence.index"),title:"Abwesenheiten"},e.can("workLog","viewIndex")&&{props:{active:e.route().current("workLog.index"),prependIcon:"mdi-clock-outline"},value:e.route("workLog.index"),title:"Arbeitszeiten"},e.can("dispute","viewIndex")&&{props:{active:e.route().current("dispute.index"),prependIcon:"mdi-bookmark-outline"},value:e.route("dispute.index"),title:"Anträge"},e.can("organization","viewShow")&&{title:"Organisation",subtitle:"test",value:e.route("organization.show",{organization:e.$page.props.organization.id}),props:{prependIcon:"mdi-domain",active:e.route().current("organization.show")}},e.can("operatingSite","viewIndex")&&{props:{active:e.route().current("operatingSite.index"),prependIcon:"mdi-map-marker"},value:e.route("operatingSite.index"),title:"Betriebsstätten"},e.can("group","viewIndex")&&{props:{active:e.route().current("group.index"),prependIcon:"mdi-dots-circle"},value:e.route("group.index"),title:"Abteilungen"},e.can("user","viewIndex")&&{props:{active:e.route().current("user.index"),prependIcon:"mdi-account-group"},value:e.route("user.index"),title:"Mitarbeitende"},e.can("user","viewIndex")&&{props:{prependIcon:"mdi-tree",active:e.route().current("organization.tree")},value:e.route("organization.tree",{organization:e.$page.props.organization.id}),title:"Organigramm"},...e.can("organization","viewIndex")?[{type:"divider"},{type:"subheader",title:"Super-Admin"},{props:{prependIcon:"mdi-security",active:e.route().current("organization.index")},value:e.route("organization.index"),title:"Organisationen"}]:[]].filter(Boolean)},null,8,["items"]))}}),K=W(J,[["__scopeId","data-v-d2eb9acd"]]),Q={class:"d-flex align-center"},R={class:"text-center font-weight-medium"},x=k({__name:"AdminLayout",props:{title:{},backurl:{}},setup(w){const e=P().smAndDown,a=O(!e.value),s="Herta";return(o,i)=>(n(),l(T,null,{default:r(()=>[t(u(_),{title:o.title},null,8,["title"]),t(j,{color:"background",style:{border:"none"},modelValue:a.value,"onUpdate:modelValue":i[2]||(i[2]=p=>a.value=p),image:"/img/loggedin-background.png"},{default:r(()=>[t(h,null,{default:r(()=>[t(C,{onClick:i[1]||(i[1]=c(p=>u(m).get("/"),["stop"]))},{prepend:r(()=>[t(F,{src:"/img/logo-symbol.png",style:{width:"24px"},class:"me-8"})]),append:r(()=>[t(f,{onClick:i[0]||(i[0]=c(p=>a.value=!1,["stop"])),icon:"mdi-close",variant:"text"})]),default:r(()=>[t(B,null,{default:r(()=>[b("div",Q,[b("h1",R,[b("span",null,g(u(s)),1)])])]),_:1})]),_:1})]),_:1}),t(G),t(K)]),_:1},8,["modelValue"]),t(E,{elevation:"0",color:"background"},{default:r(()=>[!a.value||u(e)?(n(),l($,{key:0,variant:"text",onClick:i[3]||(i[3]=c(p=>a.value=!a.value,["stop"]))})):d("",!0),o.backurl?(n(),l($,{key:1,variant:"text",icon:"mdi-arrow-left",onClick:i[4]||(i[4]=c(p=>u(m).visit(o.backurl,{preserveState:!0}),["stop"]))})):d("",!0),t(q,null,{default:r(()=>[v(g(o.title),1)]),_:1}),N(o.$slots,"appbarActions"),t(Y)]),_:3}),t(U,null,{default:r(()=>[t(H,{class:"pt-0",fluid:""},{default:r(()=>[o.$page.props.flash.error?(n(),l(z,{type:"error",closable:"",class:"mb-6",key:Math.random()},{default:r(()=>[v(g(o.$page.props.flash.error),1)]),_:1})):d("",!0),o.$page.props.flash.success?(n(),l(z,{type:"success",closable:"",class:"mb-6",key:Math.random()},{default:r(()=>[v(g(o.$page.props.flash.success),1)]),_:1})):d("",!0),N(o.$slots,"default")]),_:3})]),_:3})]),_:3}))}});export{x as _};
