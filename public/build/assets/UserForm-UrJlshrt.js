import{d as M,T as C,M as f,a as D,o as m,c as V,w as a,V as B,G as F,b as l,U as x,k as A,l as T,m as I,n as t,s as d,B as i,u as r,j as N,p,W as v,v as L,x as E,F as G,e as J,g as O,h as P,D as w}from"./app-Q52Yrqcx.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";const q=M({__name:"UserForm",props:{user:{},supervisors:{},operating_sites:{},permissions:{},groups:{},mode:{}},emits:["success"],setup(S,{emit:U}){var _;const u=S,H=U,e=C({first_name:"",last_name:"",email:"",date_of_birth:null,city:"",zip:"",street:"",house_number:"",address_suffix:"",country:"",federal_state:"",phone_number:"",staff_number:0,password:"",group_id:null,operating_site_id:null,supervisor_id:null,is_supervisor:!1,userWorkingHours:0,userWorkingHoursSince:new Date,userWorkingWeek:[],userWorkingWeekSince:new Date,permissions:[]});if(u.user){e.first_name=u.user.first_name,e.last_name=u.user.last_name,e.email=u.user.email,e.date_of_birth=u.user.date_of_birth,e.city=u.user.city??"",e.zip=u.user.zip??"",e.street=u.user.street??"",e.house_number=u.user.house_number??"",e.address_suffix=u.user.address_suffix??"",e.country=u.user.country??"",e.federal_state=u.user.federal_state??"",e.phone_number=u.user.phone_number??"",e.staff_number=u.user.staff_number,e.password=u.user.password,e.group_id=u.user.group_id,e.operating_site_id=u.user.operating_site_id,e.supervisor_id=u.user.supervisor_id,e.userWorkingHours=((_=u.user.currentWorkingHours)==null?void 0:_.weekly_working_hours)??0,e.userWorkingHoursSince=new Date(u.user.currentWorkingHours.active_since);for(const n of f.weekdays("long",{locale:"en"}).map(s=>s.toLowerCase()))u.user.userWorkingWeek[n]&&e.userWorkingWeek.push(n);e.userWorkingWeekSince=new Date(u.user.userWorkingWeek.active_since);for(const n of u.permissions)u.user[n.name]&&e.permissions.push(n.name)}function z(){const n=e.transform(s=>({...s,userWorkingHoursSince:w.fromJSDate(e.userWorkingHoursSince).toFormat("yyyy-MM-dd"),userWorkingWeekSince:w.fromJSDate(e.userWorkingWeekSince).toFormat("yyyy-MM-dd"),date_of_birth:s.date_of_birth?new Date(s.date_of_birth).toISOString():null}));u.mode=="edit"&&u.user?n.patch(route("user.update",{user:u.user.id}),{}):n.post(route("user.store"),{onSuccess:()=>{e.reset(),H("success")},onError:s=>console.log(s)})}return(n,s)=>{var k,W;const b=D("v-date-input");return m(),V(B,{title:n.mode==="create"?"Mitarbeiter hinzufügen":((k=u.user)==null?void 0:k.first_name)+" "+((W=u.user)==null?void 0:W.last_name)},{append:a(()=>[F(n.$slots,"append",{},void 0,!0)]),default:a(()=>[l(x),l(P,null,{default:a(()=>[l(A,{onSubmit:T(z,["prevent"])},{default:a(()=>[l(I,null,{default:a(()=>[l(t,{cols:"12"},{default:a(()=>s[20]||(s[20]=[d("h3",null,"Allgemeine Informationen",-1)])),_:1}),l(t,{cols:"12",md:"6"},{default:a(()=>[l(i,{modelValue:r(e).first_name,"onUpdate:modelValue":s[0]||(s[0]=o=>r(e).first_name=o),label:"Vorname","error-messages":r(e).errors.first_name},null,8,["modelValue","error-messages"])]),_:1}),l(t,{cols:"12",md:"6"},{default:a(()=>[l(i,{modelValue:r(e).last_name,"onUpdate:modelValue":s[1]||(s[1]=o=>r(e).last_name=o),label:"Nachname","error-messages":r(e).errors.last_name},null,8,["modelValue","error-messages"])]),_:1}),l(t,{cols:"12",md:"6"},{default:a(()=>[l(i,{modelValue:r(e).email,"onUpdate:modelValue":s[2]||(s[2]=o=>r(e).email=o),label:"Email","error-messages":r(e).errors.email},null,8,["modelValue","error-messages"])]),_:1}),n.mode=="create"?(m(),V(t,{key:0,cols:"12",md:"6"},{default:a(()=>[l(i,{modelValue:r(e).password,"onUpdate:modelValue":s[3]||(s[3]=o=>r(e).password=o),label:"Passwort","error-messages":r(e).errors.password},null,8,["modelValue","error-messages"])]),_:1})):N("",!0),l(t,{cols:"12",md:"6"},{default:a(()=>[l(i,{type:"date",modelValue:r(e).date_of_birth,"onUpdate:modelValue":s[4]||(s[4]=o=>r(e).date_of_birth=o),label:"Geburtsdatum",required:"","error-messages":r(e).errors.date_of_birth},null,8,["modelValue","error-messages"])]),_:1}),l(t,{cols:"12"},{default:a(()=>s[21]||(s[21]=[d("h3",null,"Adresse",-1)])),_:1}),l(t,{cols:"12",md:"6"},{default:a(()=>[l(i,{modelValue:r(e).street,"onUpdate:modelValue":s[5]||(s[5]=o=>r(e).street=o),label:"Straße","error-messages":r(e).errors.street},null,8,["modelValue","error-messages"])]),_:1}),l(t,{cols:"12",md:"6"},{default:a(()=>[l(i,{modelValue:r(e).house_number,"onUpdate:modelValue":s[6]||(s[6]=o=>r(e).house_number=o),label:"Hausnummer","error-messages":r(e).errors.house_number},null,8,["modelValue","error-messages"])]),_:1}),l(t,{cols:"12",md:"6"},{default:a(()=>[l(i,{modelValue:r(e).zip,"onUpdate:modelValue":s[7]||(s[7]=o=>r(e).zip=o),label:"Postleitzahl","error-messages":r(e).errors.zip},null,8,["modelValue","error-messages"])]),_:1}),l(t,{cols:"12",md:"6"},{default:a(()=>[l(i,{modelValue:r(e).city,"onUpdate:modelValue":s[8]||(s[8]=o=>r(e).city=o),label:"Ort","error-messages":r(e).errors.city},null,8,["modelValue","error-messages"])]),_:1}),l(t,{cols:"12",md:"6"},{default:a(()=>[l(i,{modelValue:r(e).federal_state,"onUpdate:modelValue":s[9]||(s[9]=o=>r(e).federal_state=o),label:"Bundesland","error-messages":r(e).errors.federal_state},null,8,["modelValue","error-messages"])]),_:1}),l(t,{cols:"12",md:"6"},{default:a(()=>[l(i,{modelValue:r(e).country,"onUpdate:modelValue":s[10]||(s[10]=o=>r(e).country=o),label:"Land","error-messages":r(e).errors.country},null,8,["modelValue","error-messages"])]),_:1}),l(t,{cols:"12"},{default:a(()=>s[22]||(s[22]=[d("h3",null,"Struktur",-1)])),_:1}),l(t,{cols:"12",md:"6"},{default:a(()=>[l(p,{modelValue:r(e).operating_site_id,"onUpdate:modelValue":s[11]||(s[11]=o=>r(e).operating_site_id=o),items:n.operating_sites.map(o=>({title:o.name,value:o.id})),label:"Wähle die Betriebsstätte des Mitarbeiters aus.","error-messages":r(e).errors.operating_site_id},null,8,["modelValue","items","error-messages"])]),_:1}),l(t,{cols:"12",md:"6"},{default:a(()=>[l(p,{modelValue:r(e).group_id,"onUpdate:modelValue":s[12]||(s[12]=o=>r(e).group_id=o),items:n.groups.map(o=>({title:o.name,value:o.id})),label:"Wähle eine Abteilung aus, zu die der Mitarbeiter gehören soll.","error-messages":r(e).errors.group_id},null,8,["modelValue","items","error-messages"])]),_:1}),l(t,{cols:"12",md:"6"},{default:a(()=>[l(p,{modelValue:r(e).supervisor_id,"onUpdate:modelValue":s[13]||(s[13]=o=>r(e).supervisor_id=o),items:n.supervisors.map(o=>({title:o.first_name+" "+o.last_name,value:o.id})),label:"Wähle einen Vorgesetzten","error-messages":r(e).errors.supervisor_id},null,8,["modelValue","items","error-messages"])]),_:1}),l(t,{cols:"12",md:"6"},{default:a(()=>[l(v,{modelValue:r(e).is_supervisor,"onUpdate:modelValue":s[14]||(s[14]=o=>r(e).is_supervisor=o),label:"Ist ein Vorgesetzter"},null,8,["modelValue"])]),_:1}),l(t,{cols:"12"},{default:a(()=>s[23]||(s[23]=[d("h3",null,"Wöchentliche Arbeitszeit",-1)])),_:1}),l(t,{cols:"12",md:"6"},{default:a(()=>[l(i,{modelValue:r(e).userWorkingHours,"onUpdate:modelValue":s[15]||(s[15]=o=>r(e).userWorkingHours=o),label:"Trage die wöchentliche Arbeitszeit des Mitarbeiters ein","error-messages":r(e).errors.userWorkingHours},null,8,["modelValue","error-messages"])]),_:1}),l(t,{cols:"12",md:"6"},{default:a(()=>[l(b,{"prepend-icon":"",modelValue:r(e).userWorkingHoursSince,"onUpdate:modelValue":s[16]||(s[16]=o=>r(e).userWorkingHoursSince=o),label:"seit","error-messages":r(e).errors.userWorkingHoursSince},null,8,["modelValue","error-messages"])]),_:1}),l(t,{cols:"12",md:"6"},{default:a(()=>[l(p,{modelValue:r(e).userWorkingWeek,"onUpdate:modelValue":s[17]||(s[17]=o=>r(e).userWorkingWeek=o),multiple:"",items:r(f).weekdays().map((o,g)=>{var y;return{title:o,value:(y=r(f).weekdays("long",{locale:"en"})[g])==null?void 0:y.toLowerCase()}}),label:"Wähle die Arbeitstage des Mitarbeiters aus","error-messages":r(e).errors.userWorkingWeek},null,8,["modelValue","items","error-messages"])]),_:1}),l(t,{cols:"12",md:"6"},{default:a(()=>[l(b,{"prepend-icon":"",modelValue:r(e).userWorkingWeekSince,"onUpdate:modelValue":s[18]||(s[18]=o=>r(e).userWorkingWeekSince=o),label:"seit","error-messages":r(e).errors.userWorkingWeekSince},null,8,["modelValue","error-messages"])]),_:1}),l(t,{cols:"12"},{default:a(()=>s[24]||(s[24]=[d("h3",null,"Berechtigungen",-1)])),_:1}),(m(!0),L(G,null,E(n.permissions,o=>(m(),V(t,{cols:"12",md:"6",key:o.name},{default:a(()=>[l(v,{modelValue:r(e).permissions,"onUpdate:modelValue":s[19]||(s[19]=g=>r(e).permissions=g),value:o.name,label:o.label,"hide-details":""},null,8,["modelValue","value","label"])]),_:2},1024))),128)),l(t,{cols:"12",class:"text-end"},{default:a(()=>[l(J,{type:"submit",color:"primary",loading:r(e).processing},{default:a(()=>s[25]||(s[25]=[O("Speichern")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:3},8,["title"])}}}),c=j(q,[["__scopeId","data-v-8efab87e"]]);export{c as default};
