import{d as T,a as d,o as l,Q as j,b as i,f as o,V as J,x as $,g as Z,J as E,m,i as n,K as Q,L as w,O as x,$ as X,a0 as Y,l as A,s as y,p as N,h as c,a8 as q,a9 as G,u as R,j as k,e as v,aa as L,F as _,z as ee,a5 as I,ab as te,P as S,a6 as V,A as b,ac as H,t as h,R as C,D as oe,r as F,ad as ae,w as ie,ae as se,c as re,W as ne,X as le,af as pe,n as P,Y as B,ag as ue,Z as U,ah as W,ai as de,aj as ce,S as O}from"./app-Ct_Uu1No.js";import{c as me}from"./utils-CF0tyt0x.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ge=T({__name:"ReportBugDialog",setup(M){const e=useForm({location:null,summary:null,description:null,attachments:[]});return(g,r)=>(l(),d(j,{"max-width":"1000"},{activator:i(({props:u})=>[c("div",q(G(u)),[o(N,{icon:"mdi-bug",class:"me-2"}),r[4]||(r[4]=y(" Fehler melden ",-1))],16)]),default:i(({isActive:u})=>[o(J,{title:"Fehler melden"},{append:i(()=>[o(A,{icon:"",variant:"text",onClick:p=>u.value=!1},{default:i(()=>[o(N,null,{default:i(()=>[...r[5]||(r[5]=[y("mdi-close",-1)])]),_:1})]),_:1},8,["onClick"])]),default:i(()=>[o($),o(Z,null,{default:i(()=>[o(E,{onSubmit:m(p=>{n(e).post(g.route("reportBug.store"),{onSuccess:()=>{u.value=!1,n(e).reset()}})},["prevent"])},{default:i(()=>[o(Q,null,{default:i(()=>[o(w,{cols:"12"},{default:i(()=>[o(x,{modelValue:n(e).location,"onUpdate:modelValue":r[0]||(r[0]=p=>n(e).location=p),errorMessages:n(e).errors.location,label:"Wo ist der Fehler aufgetreten?"},null,8,["modelValue","errorMessages"])]),_:1}),o(w,{cols:"12"},{default:i(()=>[o(x,{modelValue:n(e).summary,"onUpdate:modelValue":r[1]||(r[1]=p=>n(e).summary=p),errorMessages:n(e).errors.summary,label:"Fasse den Fehler zusammen"},null,8,["modelValue","errorMessages"])]),_:1}),o(w,{cols:"12"},{default:i(()=>[o(X,{modelValue:n(e).description,"onUpdate:modelValue":r[2]||(r[2]=p=>n(e).description=p),errorMessages:n(e).errors.description,label:"Zusätzliche Informationen zum Fehler"},null,8,["modelValue","errorMessages"])]),_:1}),o(w,{cols:"12"},{default:i(()=>[o(Y,{modelValue:n(e).attachments,"onUpdate:modelValue":r[3]||(r[3]=p=>n(e).attachments=p),errorMessages:Object.entries(n(e).errors).filter(([p,f])=>p.includes("attachments")&&f).map(([p])=>"Alle Dateien müssen ein Bild sein."),label:"Anhang",multiple:"",accept:"image/*"},null,8,["modelValue","errorMessages"])]),_:1}),o(w,{cols:"12",class:"text-end"},{default:i(()=>[o(A,{type:"submit",color:"primary"},{default:i(()=>[...r[6]||(r[6]=[y("Absenden",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:2},1024)]),_:2},1024)]),_:1}))}}),fe={key:0},ve={key:1},ke={class:"ms-md-4 ms-2 ga-md-4 ga-2 d-flex"},Ae={key:1,style:{width:"48px"}},be=T({__name:"AppbarActions",setup(M){const e=R();function g(t){b.post(route("notification.update",{notification:t.id}))}function r(t){let a;if(t.type=="App\\Notifications\\WorkLogPatchNotification")a=route("dispute.index",{openPatch:t.data.work_log_patch_id});else if(t.type=="App\\Notifications\\WorkLogNotification")a=route("dispute.index",{openWorkLog:t.data.work_log_id});else if(t.type=="App\\Notifications\\AbsenceNotification")a=route("dispute.index",{openAbsence:t.data.absence_id});else if(t.type=="App\\Notifications\\AbsencePatchNotification")a=route("dispute.index",{openAbsencePatch:t.data.absence_patch_id});else if(t.type=="App\\Notifications\\AbsenceDeleteNotification")a=route("dispute.index",{openAbsenceDelete:t.data.absence_id});else if(t.type=="App\\Notifications\\TicketCreationNotification")a=route("ticket.index",{openTicket:t.data.ticket_id});else if(t.type=="App\\Notifications\\TicketUpdateNotification")a=route("ticket.index",{openTicket:t.data.ticket_id});else if(t.type=="App\\Notifications\\TicketFinishNotification")a=route("ticket.index",{openTicket:t.data.ticket_id});else if(t.type=="App\\Notifications\\TicketDeletionNotification")a=route("ticket.index",{openTicket:t.data.ticket_id});else if(t.type=="App\\Notifications\\TicketRecordCreationNotification")a=route("ticket.index",{openTicket:t.data.ticket_id});else if(t.type=="App\\Notifications\\DisputeStatusNotification"){if(t.data.type=="delete")return;t.data.log_model=="App\\Models\\Absence"?a=route("absence.index",{openAbsence:t.data.log_id}):t.data.log_model=="App\\Models\\AbsencePatch"?a=route("absence.index",{openAbsencePatch:t.data.log_id}):t.data.log_model=="App\\Models\\WorkLogPatch"?a=route("user.workLog.index",{user:C().props.auth.user.id,openWorkLogPatch:t.data.log_id}):t.data.log_model=="App\\Models\\WorkLog"&&(a=route("user.workLog.index",{user:C().props.auth.user.id,workLog:t.data.log_id}))}return a&&b.get(a,{},{onSuccess:()=>g(t)})}const u=me();function p(t){const a=oe.fromISO(t.created_at),s=u.value.diff(a);return s.as("minutes")<1?"Jetzt":s.as("hours")<1?"vor "+Math.floor(s.as("minutes"))+" minuten":a.day!==u.value.day||a.month!==u.value.month||a.year!==u.value.year?a.toFormat("dd.MM - HH:mm")+" Uhr":a.toFormat("HH:mm")+" Uhr"}const f={"App\\Notifications\\AbsenceNotification":"neuer Antrag ","App\\Notifications\\AbsencePatchNotification":"neue Korrektur","App\\Notifications\\WorkLogPatchNotification":"neue Korrektur","App\\Notifications\\DisputeStatusNotification":"Antrag bearbeitet","App\\Notifications\\AbsenceDeleteNotification":"neuer Antrag","App\\Notifications\\WorkLogNotification":"neue Buchung","App\\Notifications\\TicketCreationNotification":"neues Ticket","App\\Notifications\\TicketUpdateNotification":"Ticket Update","App\\Notifications\\TicketFinishNotification":"Ticket abgeschlossen","App\\Notifications\\TicketDeletionNotification":"Ticket gelöscht","App\\Notifications\\TicketRecordCreationNotification":"Ticket Update"};return(t,a)=>(l(),k(_,null,[t.$page.props.unreadNotifications.length>0?(l(),d(L,{key:0,id:"notification-menu"},{activator:i(({props:s})=>[o(A,S({color:"primary"},s,{stacked:""}),{default:i(()=>[o(te,{content:t.$page.props.unreadNotifications.length,color:"error"},{default:i(()=>[o(N,{icon:"mdi-bell"})]),_:1},8,["content"])]),_:2},1040)]),default:i(()=>[o(I,{"min-width":"200px",onClick:m(()=>{},["stop"])},{default:i(()=>[(l(!0),k(_,null,ee(t.$page.props.unreadNotifications.toSorted((s,z)=>z.created_at.localeCompare(s.created_at)),(s,z)=>(l(),k(_,{key:s.id},[z!=0?(l(),d($,{key:0})):v("",!0),o(V,null,{append:i(()=>[c("div",ke,[o($,{vertical:""}),s.type!="App\\Notifications\\TicketDeletionNotification"&&(s.type!="App\\Notifications\\DisputeStatusNotification"||s.type=="App\\Notifications\\DisputeStatusNotification"&&s.data.type!="delete")?(l(),d(A,{key:0,size:n(e).smAndDown.value?"small":void 0,color:"primary",icon:"mdi-eye",variant:"text",onClick:m(K=>r(s),["stop"])},null,8,["size","onClick"])):(l(),k("div",Ae)),o(A,{size:n(e).smAndDown.value?"small":void 0,color:"primary",icon:"mdi-close",variant:"text",onClick:m(K=>g(s),["stop"])},null,8,["size","onClick"])])]),default:i(()=>[o(H,null,{default:i(()=>[n(e).smAndDown.value?(l(),k("div",fe,h(f[s.type]),1)):(l(),k("div",ve,h(s.data.title),1)),c("div",null,[c("sub",null,h(p(s)),1)])]),_:2},1024)]),_:2},1024)],64))),128))]),_:1})]),_:1})):v("",!0),o(L,{location:n(e).smAndDown.value?"bottom left":"bottom"},{activator:i(({props:s})=>[o(A,S({stacked:"",color:"black","prepend-icon":"mdi-account-details"},s),null,16)]),default:i(()=>[o(I,{"min-width":"200px"},{default:i(()=>[o(V,{onClick:a[0]||(a[0]=m(s=>n(b).get(t.route("user.profile",{user:t.$page.props.auth.user.id})),["stop"]))},{default:i(()=>[o(N,{icon:"mdi-account",class:"me-2"}),a[2]||(a[2]=y(" Profil ",-1))]),_:1}),o(V,{onClick:m(()=>{},["stop"])},{default:i(()=>[o(ge)]),_:1}),o(V,{onClick:a[1]||(a[1]=m(s=>n(b).post(t.route("logout")),["stop"]))},{default:i(()=>[o(N,{icon:"mdi-logout",class:"me-2"}),a[3]||(a[3]=y(" Abmelden ",-1))]),_:1})]),_:1})]),_:1},8,["location"])],64))}}),he=D(be,[["__scopeId","data-v-880f9501"]]),ye=T({__name:"DrawerMenu",setup(M){return(e,g)=>(l(),d(I,{nav:"","onClick:select":g[0]||(g[0]=r=>n(b).get(r.id)),items:[{props:{active:e.route().current("dashboard"),prependIcon:"mdi-view-dashboard"},value:e.route("dashboard"),title:"Dashboard"},...e.$page.props.currentAppModule=="herta"?[e.can("workLog","viewIndex")&&{props:{active:e.route().current("workLog.index"),prependIcon:"mdi-clock-outline"},value:e.route("workLog.index"),title:"Arbeitszeiten"}]:[],...e.$page.props.currentAppModule=="timesheets"?[e.can("customer","viewIndex")&&{props:{active:e.route().current("customer.index"),prependIcon:"mdi-folder-account-outline"},value:e.route("customer.index"),title:"Kundenliste"},{props:{active:e.route().current("ticket.index"),prependIcon:"mdi-ticket-account"},value:e.route("ticket.index"),title:"Tickets"}]:[],e.can("dispute","viewIndex")&&{props:{active:e.route().current("dispute.index"),prependIcon:"mdi-bookmark-outline"},value:e.route("dispute.index"),title:"Anträge"},e.can("absence","viewIndex")&&{props:{active:e.route().current("absence.index"),prependIcon:"mdi-timer-cancel-outline"},value:e.route("absence.index"),title:"Abwesenheiten"},e.can("organization","viewShow")&&{title:"Organisation",value:e.route("organization.show",{organization:e.$page.props.organization.id}),props:{prependIcon:"mdi-domain",active:e.route().current("organization.show")}},e.can("operatingSite","viewIndex")&&{props:{active:e.route().current("operatingSite.index"),prependIcon:"mdi-map-marker"},value:e.route("operatingSite.index"),title:"Betriebsstätten"},e.can("group","viewIndex")&&{props:{active:e.route().current("group.index"),prependIcon:"mdi-dots-circle"},value:e.route("group.index"),title:"Abteilungen"},e.can("user","viewIndex")&&{props:{active:e.route().current("user.index"),prependIcon:"mdi-account-group"},value:e.route("user.index"),title:"Mitarbeitende"},e.can("user","viewIndex")&&{props:{prependIcon:"mdi-tree",active:e.route().current("organization.tree")},value:e.route("organization.tree",{organization:e.$page.props.organization.id}),title:"Organigramm"},...e.can("organization","viewIndex")?[{type:"divider"},{type:"subheader",title:"Super-Admin"},{props:{prependIcon:"mdi-security",active:e.route().current("organization.index")},value:e.route("organization.index"),title:"Organisationen"}]:[]].filter(Boolean)},null,8,["items"]))}}),Ne=D(ye,[["__scopeId","data-v-10604770"]]),we={key:0,class:"posiion-relative",style:{width:"56px"}},Ve={class:"d-flex align-center"},$e={class:"text-center text-h5 font-weight-medium"},Ie={style:{"user-select":"none"}},Te={class:"d-flex align-center mr-auto ga-2"},Me={class:"text-h6 ps-0 mx-md-5 px-2 mb-0",style:{"text-overflow":"ellipsis",overflow:"hidden","white-space":"nowrap","max-width":"calc(100vw - 72px - 72px - 52px)"}},ze=T({__name:"AdminLayout",props:{title:{},backurl:{}},setup(M){const e=C(),g=R().smAndDown,r=F(!g.value);ae(1e3*60*2,{only:["unreadNotifications"]},{keepAlive:!0});const u=F(!!e.props.organization.logo);ie(()=>e.props.organization.logo,()=>{u.value=!1,se(()=>u.value=!0)});function p(t){b.post(route("switchAppModule",{module:t}),{preserveState:!0,preserveScroll:!0,replace:!0})}const f=re(()=>e.props.appModules.find(t=>t.value===e.props.currentAppModule));return(t,a)=>(l(),d(ne,null,{default:i(()=>[o(n(le),{title:t.title},null,8,["title"]),o(pe,{color:"background",style:{border:"none"},modelValue:r.value,"onUpdate:modelValue":a[2]||(a[2]=s=>r.value=s),image:"/img/loggedin-background.png"},{default:i(()=>[f.value?(l(),d(I,{key:0},{default:i(()=>[o(V,{onClick:a[1]||(a[1]=m(s=>p(t.$page.props.currentAppModule=="herta"?"timesheets":"herta"),["stop"])),class:"pe-2"},{prepend:i(()=>[n(e).props.appModules.length==2?(l(),k("div",we,[c("img",{src:"/img/logo-symbol.png",id:"herta-logo",class:P({ActiveLogo:f.value.value=="herta"})},null,2),o(N,{icon:"mdi-undo",style:{top:"0",position:"absolute",rotate:"-20deg",scale:"0.8"}}),c("img",{src:"/img/TS_Logo.png",id:"timesheets-logo",class:P({ActiveLogo:f.value.value=="timesheets"})},null,2),o(N,{icon:"mdi-undo",style:{top:"25px",left:"40px",position:"absolute",rotate:"140deg",scale:"0.8"}})])):(l(),d(B,{key:1,width:"24px",class:"me-8",src:"/img/logo-symbol.png"}))]),append:i(()=>[o(A,{onClick:a[0]||(a[0]=m(s=>r.value=!1,["stop"])),icon:"mdi-close",variant:"text"})]),default:i(()=>[o(H,null,{default:i(()=>[c("div",Ve,[c("h1",$e,[c("span",Ie,h(f.value.title),1)])])]),_:1})]),_:1})]),_:1})):v("",!0),o($),o(Ne)]),_:1},8,["modelValue"]),o(ue,{elevation:"0",color:"background"},{default:i(()=>[!r.value||n(g)?(l(),d(W,{key:0,variant:"text",onClick:a[3]||(a[3]=m(s=>r.value=!r.value,["stop"]))})):v("",!0),t.backurl?(l(),d(W,{key:1,variant:"text",icon:"mdi-arrow-left",onClick:a[4]||(a[4]=m(s=>n(b).visit(t.backurl,{preserveState:!0}),["stop"]))})):v("",!0),c("div",Te,[c("span",Me,h(t.title),1),u.value?(l(),d(B,{key:0,src:t.route("organization.getLogo",{organization:t.$page.props.organization.id,key:t.$page.props.organization.logo}),"max-height":"48px","max-width":"48px",width:"100%",height:"100%",class:"rounded"},null,8,["src"])):v("",!0)]),U(t.$slots,"appbarActions",{},void 0,!0),o(he)]),_:3}),o(de,null,{default:i(()=>[o(ce,{class:"pt-0",fluid:""},{default:i(()=>[t.$page.props.flash.error?(l(),d(O,{type:"error",closable:"",class:"mb-6",key:Math.random()},{default:i(()=>[y(h(t.$page.props.flash.error),1)]),_:1})):v("",!0),t.$page.props.flash.success?(l(),d(O,{type:"success",closable:"",class:"mb-6",key:Math.random()},{default:i(()=>[y(h(t.$page.props.flash.success),1)]),_:1})):v("",!0),U(t.$slots,"default",{},void 0,!0)]),_:3})]),_:3})]),_:3}))}}),xe=D(ze,[["__scopeId","data-v-92ad132c"]]);export{xe as A};
