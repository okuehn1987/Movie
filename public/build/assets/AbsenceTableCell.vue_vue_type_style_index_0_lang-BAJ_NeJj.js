import{d as b,c as m,D as h,j as o,o as i,q as _,i as g,e as k,t as v,n as C}from"./app--YfpcduQ.js";function M(a){return"patches_exists"in a&&a.patches_exists||"log"in a&&a.log.patches_exists?"hasOpenPatch":a.status==="created"?"created":a.status==="declined"?"declined":"accepted"}const S=["role","title"],w={key:0},D=b({__name:"AbsenceTableCell",props:{user:{},date:{},entries:{},absenceTypes:{},holidays:{},homeOfficeDays:{}},setup(a){const t=a,n=m(()=>t.entries.find(e=>h.fromSQL(e.start)<=t.date&&t.date<=h.fromSQL(e.end)));function u(e){var r,c;const d=t.user.user_working_weeks.toSorted((s,l)=>l.active_since.localeCompare(s.active_since)).find(s=>s.active_since<=e.toFormat("yyyy-MM-dd"));return d&&d[(r=e.setLocale("en-US").weekdayLong)==null?void 0:r.toLowerCase()]&&!((c=t.holidays)!=null&&c[t.date.toFormat("yyyy-MM-dd")])}const y=m(()=>t.homeOfficeDays.find(e=>e.date===t.date.toFormat("yyyy-MM-dd")));return(e,d)=>{var r,c,s;return i(),o("td",{class:C(["pa-0",{"editable-cell":e.can("absence","create",t.user)}]),role:e.can("absence","create",t.user)?"button":"cell",title:((r=t.holidays)==null?void 0:r[t.date.toFormat("yyyy-MM-dd")])??((c=e.absenceTypes.find(l=>{var f,p;return l.id==((p=(f=n.value)==null?void 0:f.absence_type)==null?void 0:p.id)}))==null?void 0:c.name)},[n.value&&u(e.date)?(i(),o("div",{key:0,class:"h-100 w-100 d-flex justify-center align-center",style:_({backgroundColor:{accepted:"#f99",created:"#99f",declined:"grey",hasOpenPatch:"#99f"}[g(M)(n.value)]})},[n.value.absence_type_id?(i(),o("span",w,v((s=n.value.absence_type)==null?void 0:s.abbreviation),1)):k("",!0)],4)):(i(),o("div",{key:1,style:_({backgroundColor:u(e.date)?y.value?{accepted:"#ff9",created:"#99f",declined:"grey"}[y.value.status]:"":"lightgray"}),class:"h-100 w-100 empty"},null,4))],10,S)}}});export{D as _,M as g};
