import{d as $,B as T,C as B,j as A,o as d,f as s,b as e,ax as g,aw as f,s as m,h as V,K as h,a as _,e as c,L as y,S as b,t as M,y as F,g as u,D as i,l as v,m as k,p,O as w,V as C,F as D}from"./app-B1cliZyJ.js";const W=$({__name:"HertaUserFormSections",props:T({user:{},mode:{}},{userForm:{required:!0},userFormModifiers:{}}),emits:["update:userForm"],setup(U){const o=B(U,"userForm");return(a,n)=>(d(),A(D,null,[s(C,{class:"mb-4"},{default:e(()=>[s(g,null,{default:e(()=>[s(f,{class:"mb-2"},{default:e(()=>[...n[2]||(n[2]=[m("Wochenarbeitszeit",-1)])]),_:1})]),_:1}),s(V,null,{default:e(()=>[s(h,null,{default:e(()=>[o.value.errors.user_working_hours?(d(),_(y,{key:0,cols:"12"},{default:e(()=>[s(b,{type:"error"},{default:e(()=>[m(M(o.value.errors.user_working_hours),1)]),_:1})]),_:1})):c("",!0),s(y,{cols:"12"},{default:e(()=>[s(F,{items:o.value.user_working_hours,headers:[{title:"Stunden pro Woche",key:"weekly_working_hours",width:"50%",sortable:!1},{title:"Aktiv seit",key:"active_since",sortable:!1},{title:"",key:"actions",align:"end",sortable:!1}]},{"header.actions":e(()=>[!a.user||a.can("user","update")?(d(),_(v,{key:0,color:"primary",onClick:n[0]||(n[0]=k(r=>o.value.user_working_hours.push({active_since:"",id:null,weekly_working_hours:0}),["stop"]))},{default:e(()=>[s(p,{icon:"mdi-plus"})]),_:1})):c("",!0)]),"item.weekly_working_hours":e(({item:r,index:t})=>[s(w,{"data-testid":"userWorkingHours-hours",type:"number",variant:"underlined",modelValue:r.weekly_working_hours,"onUpdate:modelValue":l=>r.weekly_working_hours=l,"error-messages":o.value.errors[`user_working_hours.${t}.weekly_working_hours`],disabled:a.user&&!a.can("user","update")||!!r.active_since&&r.active_since<u(i).now().toFormat("yyyy-MM-dd")},null,8,["modelValue","onUpdate:modelValue","error-messages","disabled"])]),"item.active_since":e(({item:r,index:t})=>[s(w,{"data-testid":"userWorkingHours-since",type:"date",variant:"underlined",min:a.mode=="edit"?u(i).now().plus({days:1}).toFormat("yyyy-MM-dd"):void 0,modelValue:r.active_since,"onUpdate:modelValue":l=>r.active_since=l,"error-messages":o.value.errors[`user_working_hours.${t}.active_since`],disabled:a.user&&!a.can("user","update")||!!r.active_since&&r.active_since<u(i).now().toFormat("yyyy-MM-dd")},null,8,["min","modelValue","onUpdate:modelValue","error-messages","disabled"])]),"item.actions":e(({item:r,index:t})=>[(!a.user||a.can("user","update"))&&(!r.id||r.active_since>u(i).now().toFormat("yyyy-MM-dd"))?(d(),_(v,{key:0,color:"error",onClick:k(l=>o.value.user_working_hours.splice(t,1),["stop"])},{default:e(()=>[s(p,{icon:"mdi-delete"})]),_:1},8,["onClick"])):c("",!0)]),_:1},8,["items"])]),_:1})]),_:1})]),_:1})]),_:1}),s(C,{class:"mb-4"},{default:e(()=>[s(g,null,{default:e(()=>[s(f,{class:"mb-2"},{default:e(()=>[...n[3]||(n[3]=[m("Vertrauensarbeitszeit",-1)])]),_:1})]),_:1}),s(V,null,{default:e(()=>[s(h,null,{default:e(()=>[o.value.errors.user_working_hours?(d(),_(y,{key:0,cols:"12"},{default:e(()=>[s(b,{type:"error"},{default:e(()=>[m(M(o.value.errors.user_working_hours),1)]),_:1})]),_:1})):c("",!0),s(y,{cols:"12"},{default:e(()=>[s(F,{items:o.value.user_trust_working_hours,headers:[{title:"Aktiv seit",key:"active_since",width:"50%",sortable:!1},{title:"Aktiv bis",key:"active_until",sortable:!1},{title:"",key:"actions",align:"end",sortable:!1}]},{"header.actions":e(()=>[!a.user||a.can("user","update")?(d(),_(v,{key:0,color:"primary",onClick:n[1]||(n[1]=k(r=>o.value.user_trust_working_hours.push({active_since:"",id:null,active_until:null}),["stop"]))},{default:e(()=>[s(p,{icon:"mdi-plus"})]),_:1})):c("",!0)]),"item.active_since":e(({item:r,index:t})=>[s(w,{type:"date",variant:"underlined",min:a.mode=="edit"?u(i).now().plus({days:1}).toFormat("yyyy-MM-dd"):void 0,modelValue:r.active_since,"onUpdate:modelValue":l=>r.active_since=l,"error-messages":o.value.errors[`user_trust_working_hours.${t}.active_since`],disabled:a.user&&!a.can("user","update")||!!r.active_since&&r.active_since<=u(i).now().toFormat("yyyy-MM-dd")},null,8,["min","modelValue","onUpdate:modelValue","error-messages","disabled"])]),"item.active_until":e(({item:r,index:t})=>[s(w,{type:"date",variant:"underlined",min:a.mode=="edit"?u(i).now().plus({days:1}).toFormat("yyyy-MM-dd"):void 0,modelValue:r.active_until,"onUpdate:modelValue":l=>r.active_until=l,"error-messages":o.value.errors[`user_trust_working_hours.${t}.active_until`],disabled:a.user&&!a.can("user","update")||!!r.active_until&&r.active_until<=u(i).now().toFormat("yyyy-MM-dd")},null,8,["min","modelValue","onUpdate:modelValue","error-messages","disabled"])]),"item.actions":e(({item:r,index:t})=>[(!a.user||a.can("user","update"))&&(!r.id||r.active_since>u(i).now().toFormat("yyyy-MM-dd"))?(d(),_(v,{key:0,color:"error",onClick:k(l=>o.value.user_trust_working_hours.splice(t,1),["stop"])},{default:e(()=>[s(p,{icon:"mdi-delete"})]),_:1},8,["onClick"])):c("",!0)]),_:1},8,["items"])]),_:1})]),_:1})]),_:1})]),_:1})],64))}});export{W as _};
