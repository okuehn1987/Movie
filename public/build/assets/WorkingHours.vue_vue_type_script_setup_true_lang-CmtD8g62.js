import{d as C,n as S,S as b,D as c,I as B,o as u,c as m,b as s,V as M,e as t,u as l,H as y,f as g,p as T,q as f,x as r,T as k,g as p,h as i,t as n,k as h,j as $,E as x,m as V,i as N}from"./app-CNV5A9_W.js";import{a as A,r as D}from"./utils-Z8rA9oGB.js";const E={class:"d-flex align-center ga-3"},G={class:"d-flex flex-column"},I={class:"text-h6"},O={class:"d-flex align-center ga-3"},F={class:"d-flex flex-column"},K={class:"text-h6"},Q={class:"d-flex align-center ga-3"},Z={class:"d-flex flex-column"},j={class:"text-h6"},q={class:"d-flex align-center ga-3"},R={class:"d-flex flex-column"},U={class:"text-h6"},J={key:1},ee=C({__name:"WorkingHours",props:{lastWorkLog:{},operating_times:{},overtime:{},workingHours:{}},setup(z){const d=z,v=S(),L=A();function W(e=!1){var o,a;y.post(route("workLog.store"),{is_home_office:e,id:(o=d.lastWorkLog)!=null&&o.end?null:(a=d.lastWorkLog)==null?void 0:a.id})}const _=d.operating_times.find(e=>{var o;return e.type==((o=b.weekdays("long",{locale:"en"})[c.now().weekday-1])==null?void 0:o.toLowerCase())}),w=B(()=>{var e,o;return(e=d.lastWorkLog)!=null&&e.end?d.workingHours.current:L.value.diff(c.fromSQL(((o=d.lastWorkLog)==null?void 0:o.start)||"")).as("hours")+d.workingHours.current});return(e,o)=>(u(),m(M,{title:"Arbeitszeit"},{append:s(()=>[t(g,{icon:"mdi-eye",variant:"text",onClick:o[0]||(o[0]=a=>l(y).get(e.route("user.workLog.index",{user:l(v).props.auth.user.id})))})]),default:s(()=>[t(N,null,{default:s(()=>[t(T,null,{default:s(()=>[t(f,{cols:"12",sm:"6"},{default:s(()=>[r("div",E,[t(k,{color:"blue-grey",rounded:"",size:"40",class:"elevation-2"},{default:s(()=>[t(p,{size:"24",icon:"mdi-clock-check"})]),_:1}),r("div",G,[o[3]||(o[3]=i(" gesamt Woche ")),r("div",I,n(Math.floor(w.value||0))+":"+n(Math.floor((w.value||0)%1*60).toString().padStart(2,"0")),1)])])]),_:1}),e.$page.props.auth.user.home_office?(u(),m(f,{key:0,cols:"12",sm:"6"},{default:s(()=>[r("div",O,[t(k,{color:"green",rounded:"",size:"40",class:"elevation-2"},{default:s(()=>[t(p,{size:"24",icon:"mdi-clock-check"})]),_:1}),r("div",F,[o[4]||(o[4]=i(" Homeoffice Woche ")),r("div",K,n(Math.floor(e.workingHours.currentHomeOffice||0))+":"+n(Math.floor((e.workingHours.currentHomeOffice||0)%1*60).toString().padStart(2,"0")),1)])])]),_:1})):h("",!0),t(f,{cols:"12",sm:"6"},{default:s(()=>[r("div",Q,[t(k,{color:"orange",rounded:"",size:"40",class:"elevation-2 text-white"},{default:s(()=>[t(p,{size:"24",icon:"mdi-clock-plus"})]),_:1}),r("div",Z,[o[5]||(o[5]=i(" Ãœberstunden ")),r("div",j,n(l(D)(e.overtime,2)),1)])])]),_:1}),e.lastWorkLog&&e.lastWorkLog.end==null?(u(),m(f,{key:1,cols:"12",sm:"6"},{default:s(()=>[r("div",q,[t(k,{color:"blue",rounded:"",size:"40",class:"elevation-2"},{default:s(()=>[t(p,{size:"24",icon:"mdi-timer"})]),_:1}),r("div",R,[o[6]||(o[6]=i(" Hier seit ")),r("div",U,n(l(c).fromSQL(e.lastWorkLog.start).toFormat("HH:mm"))+" Uhr",1)])])]),_:1})):h("",!0),t(f,{cols:"12"},{default:s(()=>[l(_)&&l(L).diff(l(c).fromFormat(l(_).end,"HH:mm")).as("minutes")>0?(u(),m($,{key:0,color:"error"},{default:s(()=>{var a;return[o[8]||(o[8]=i(" Es fehlt eine Meldung. Bitte Zeitkorrektur. ")),t(g,{color:"error",href:`/user/${l(v).props.auth.user.id}/workLogs?workLog=${(a=e.lastWorkLog)==null?void 0:a.id}`},{default:s(()=>o[7]||(o[7]=[i(" Zeitkorrektur ")])),_:1},8,["href"])]}),_:1})):l(v).props.auth.user.home_office&&(!e.lastWorkLog||e.lastWorkLog.end)||e.lastWorkLog&&e.lastWorkLog.is_home_office&&!e.lastWorkLog.end?(u(),x("div",J,[t(g,{block:"",size:"large",onClick:o[1]||(o[1]=V(a=>W(!0),["stop"])),color:"primary",class:"me-2"},{default:s(()=>[i(n(!e.lastWorkLog||e.lastWorkLog.end?"Kommen Homeoffice":"Gehen Homeoffice"),1)]),_:1})])):h("",!0)]),_:1}),t(f,{cols:"12"},{default:s(()=>{var a,H;return[(a=e.lastWorkLog)!=null&&a.end||!((H=e.lastWorkLog)!=null&&H.is_home_office)?(u(),m(g,{key:0,block:"",size:"large",onClick:o[2]||(o[2]=V(P=>W(),["stop"])),color:"primary"},{default:s(()=>[i(n(!e.lastWorkLog||e.lastWorkLog.end?"Kommen":"Gehen"),1)]),_:1})):h("",!0)]}),_:1})]),_:1})]),_:1})]),_:1}))}});export{ee as _};
