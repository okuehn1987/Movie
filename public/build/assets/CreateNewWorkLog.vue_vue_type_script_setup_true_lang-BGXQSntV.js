import{d as b,r as C,as as S,a as V,o as g,i as x,b as r,f as t,g as y,j as L,k as h,L as D,M as n,u as o,N as _,X as U,_ as q,e as B,q as p,s as f,t as F,v as c,V as N,x as H,D as d}from"./app-CCLwdg_Q.js";const P=b({__name:"CreateNewWorkLog",props:{user:{}},setup(v){const k=v,i=C(!1),a=useForm({start:new Date,end:new Date,comment:null,start_time:"09:00",end_time:"17:00",is_home_office:!1});function w(){a.transform(l=>{const e=d.fromFormat(l.start_time,"HH:mm"),m=d.fromFormat(l.end_time,"HH:mm");return{...l,start:d.fromISO(l.start.toISOString()).set({hour:e.hour,minute:e.minute,second:0}),end:d.fromISO(l.end.toISOString()).set({hour:m.hour,minute:m.minute,second:0})}}).post(route("user.workLog.store",{user:k.user.id}),{onSuccess:()=>{i.value=!1}})}return(l,e)=>{const m=S("v-date-input");return g(),V(x,{"max-width":"1000",modelValue:i.value,"onUpdate:modelValue":e[6]||(e[6]=u=>i.value=u)},{activator:r(({props:u})=>[t(p,H(u,{color:"primary"}),{default:r(()=>[t(c,null,{default:r(()=>[...e[7]||(e[7]=[f("mdi-plus",-1)])]),_:1})]),_:1},16)]),default:r(({isActive:u})=>[t(N,{title:"Neue Buchung "+(l.can("workLogPatch","update")?"erstellen":"beantragen")},{append:r(()=>[t(p,{icon:"",variant:"text",onClick:s=>u.value=!1},{default:r(()=>[t(c,null,{default:r(()=>[...e[8]||(e[8]=[f("mdi-close",-1)])]),_:1})]),_:1},8,["onClick"])]),default:r(()=>[t(y,null,{default:r(()=>[t(L,{onSubmit:h(w,["prevent"])},{default:r(()=>[t(D,null,{default:r(()=>[t(n,{cols:"12",md:"3"},{default:r(()=>[t(m,{label:"Start",required:"","error-messages":o(a).errors.start,modelValue:o(a).start,"onUpdate:modelValue":e[0]||(e[0]=s=>o(a).start=s),variant:"plain",style:{height:"73px"}},null,8,["error-messages","modelValue"])]),_:1}),t(n,{cols:"12",md:"3"},{default:r(()=>[t(_,{type:"time",label:"Start",required:"","error-messages":o(a).errors.start_time,modelValue:o(a).start_time,"onUpdate:modelValue":e[1]||(e[1]=s=>o(a).start_time=s),variant:"plain"},null,8,["error-messages","modelValue"])]),_:1}),t(n,{cols:"12",md:"3"},{default:r(()=>[t(m,{label:"Ende",required:"","error-messages":o(a).errors.end,modelValue:o(a).end,"onUpdate:modelValue":e[2]||(e[2]=s=>o(a).end=s),variant:"plain",style:{height:"73px"}},null,8,["error-messages","modelValue"])]),_:1}),t(n,{cols:"12",md:"3"},{default:r(()=>[t(_,{type:"time",label:"Ende",required:"","error-messages":o(a).errors.end_time,modelValue:o(a).end_time,"onUpdate:modelValue":e[3]||(e[3]=s=>o(a).end_time=s),variant:"plain"},null,8,["error-messages","modelValue"])]),_:1}),t(n,{cols:"12"},{default:r(()=>[t(U,{label:"Bemerkung (optional)",modelValue:o(a).comment,"onUpdate:modelValue":e[4]||(e[4]=s=>o(a).comment=s),"error-messages":o(a).errors.comment,variant:"filled",rows:"3"},null,8,["modelValue","error-messages"])]),_:1}),t(n,{cols:"12",md:"3"},{default:r(()=>[t(q,{label:"Homeoffice",required:"","error-messages":o(a).errors.is_home_office,modelValue:o(a).is_home_office,"onUpdate:modelValue":e[5]||(e[5]=s=>o(a).is_home_office=s),variant:"plain","hide-details":""},null,8,["error-messages","modelValue"])]),_:1}),t(n,{cols:"12",class:"text-end"},{default:r(()=>[l.can("workLogPatch","create")||l.can("workLogPatch","update")?(g(),V(p,{key:0,loading:o(a).processing,type:"submit",color:"primary"},{default:r(()=>[f(F(l.can("workLogPatch","update")?"Speichern":"Beantragen"),1)]),_:1},8,["loading"])):B("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:2},1032,["title"])]),_:1},8,["modelValue"])}}});export{P as _};
