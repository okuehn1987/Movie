import{d as N,o as s,A as k,b as d,e as r,g as a,a9 as B,k as P,m as T,j as g,F as y,B as W,s as c,a5 as I,aa as H,f as v,z as u,P as $,v as w,a6 as S,h as m,ab as z,t as f,G as b,I as _,D as O,ac as F,r as U,ad as j,O as G,Q as J,R as E,ae as Q,af as L,ag as R,l as A,S as D,ah as q,ai as K,J as M,aj as X}from"./app-B9laJSZm.js";import{a as Y}from"./utils-yNagpk-D.js";import{_ as Z}from"./_plugin-vue_export-helper-DlAUqK2U.js";const x={class:"ms-4 ga-4 d-flex"},ee={key:1,style:{width:"48px"}},te=N({__name:"AppbarActions",setup(V){function t(e){b.post(route("notification.update",{notification:e.id}))}function l(e){let o;if(e.type=="App\\Notifications\\WorkLogPatchNotification")o=route("dispute.index",{openPatch:e.data.work_log_patch_id});else if(e.type=="App\\Notifications\\WorkLogNotification")o=route("dispute.index",{openWorkLog:e.data.work_log_id});else if(e.type=="App\\Notifications\\AbsenceNotification")o=route("dispute.index",{openAbsence:e.data.absence_id});else if(e.type=="App\\Notifications\\AbsencePatchNotification")o=route("dispute.index",{openAbsencePatch:e.data.absence_patch_id});else if(e.type=="App\\Notifications\\AbsenceDeleteNotification")o=route("dispute.index",{openAbsenceDelete:e.data.absence_id});else if(e.type=="App\\Notifications\\DisputeStatusNotification"){if(e.data.type=="delete")return;e.data.log_model=="App\\Models\\Absence"?o=route("absence.index",{openAbsence:e.data.log_id}):e.data.log_model=="App\\Models\\AbsencePatch"?o=route("absence.index",{openAbsencePatch:e.data.log_id}):e.data.log_model=="App\\Models\\WorkLogPatch"?o=route("user.workLog.index",{user:_().props.auth.user.id,openWorkLogPatch:e.data.log_id}):e.data.log_model=="App\\Models\\WorkLog"&&(o=route("user.workLog.index",{user:_().props.auth.user.id,workLog:e.data.log_id}))}return o&&b.get(o,{},{onSuccess:()=>t(e)})}const p=Y();function i(e){const o=O.fromISO(e.created_at),n=p.value.diff(o);return n.as("minutes")<1?"Jetzt":n.as("hours")<1?"vor "+Math.floor(n.as("minutes"))+" minuten":o.day!==p.value.day||o.month!==p.value.month||o.year!==p.value.year?o.toFormat("dd.MM - HH:mm")+" Uhr":o.toFormat("HH:mm")+" Uhr"}return(e,o)=>(s(),k(y,null,[e.$page.props.unreadNotifications.length>0?(s(),d(H,{key:0},{activator:r(({props:n})=>[a(g,T({color:"primary"},n,{stacked:""}),{default:r(()=>[a(B,{content:e.$page.props.unreadNotifications.length,color:"error"},{default:r(()=>[a(P,{icon:"mdi-bell"})]),_:2},1032,["content"])]),_:2},1040)]),default:r(()=>[a(I,{onClick:c(()=>{},["stop"])},{default:r(()=>[(s(!0),k(y,null,W(e.$page.props.unreadNotifications.toSorted((n,h)=>h.created_at.localeCompare(n.created_at)),(n,h)=>(s(),k(y,{key:n.id},[h!=0?(s(),d(w,{key:0})):v("",!0),a(S,null,{append:r(()=>[m("div",x,[a(w,{vertical:""}),n.type!="App\\Notifications\\DisputeStatusNotification"||n.type=="App\\Notifications\\DisputeStatusNotification"&&n.data.type!="delete"?(s(),d(g,{key:0,color:"primary",icon:"mdi-eye",variant:"tonal",onClick:c(C=>l(n),["stop"])},null,8,["onClick"])):(s(),k("div",ee)),a(g,{color:"error",icon:"mdi-delete",variant:"tonal",onClick:c(C=>t(n),["stop"])},null,8,["onClick"])])]),default:r(()=>[a(z,null,{default:r(()=>[m("div",null,f(n.data.title),1),m("div",null,[m("sub",null,f(i(n)),1)])]),_:2},1024)]),_:2},1024)],64))),128))]),_:1})]),_:1})):v("",!0),a(u($),{href:e.route("user.profile",{user:e.$page.props.auth.user.id})},{default:r(()=>[a(g,{stacked:"",color:"black","prepend-icon":"mdi-account",title:"Profil"})]),_:1},8,["href"]),a(u($),{method:"post",href:e.route("logout"),as:"button"},{default:r(()=>[a(g,{stacked:"",color:"black","prepend-icon":"mdi-logout",title:"Abmelden"})]),_:1},8,["href"])],64))}}),ae=N({__name:"DrawerMenu",setup(V){return(t,l)=>(s(),d(I,{nav:"","onClick:select":l[0]||(l[0]=p=>u(b).get(p.id)),items:[{props:{active:t.route().current("dashboard"),prependIcon:"mdi-view-dashboard"},value:t.route("dashboard"),title:"Dashboard"},t.can("absence","viewIndex")&&{props:{active:t.route().current("absence.index"),prependIcon:"mdi-timer-cancel-outline"},value:t.route("absence.index"),title:"Abwesenheiten"},t.can("workLog","viewIndex")&&{props:{active:t.route().current("workLog.index"),prependIcon:"mdi-clock-outline"},value:t.route("workLog.index"),title:"Arbeitszeiten"},t.can("dispute","viewIndex")&&{props:{active:t.route().current("dispute.index"),prependIcon:"mdi-bookmark-outline"},value:t.route("dispute.index"),title:"Anträge"},t.can("organization","viewShow")&&{title:"Organisation",subtitle:"test",value:t.route("organization.show",{organization:t.$page.props.organization.id}),props:{prependIcon:"mdi-domain",active:t.route().current("organization.show")}},t.can("operatingSite","viewIndex")&&{props:{active:t.route().current("operatingSite.index"),prependIcon:"mdi-map-marker"},value:t.route("operatingSite.index"),title:"Betriebsstätten"},t.can("group","viewIndex")&&{props:{active:t.route().current("group.index"),prependIcon:"mdi-dots-circle"},value:t.route("group.index"),title:"Abteilungen"},t.can("user","viewIndex")&&{props:{active:t.route().current("user.index"),prependIcon:"mdi-account-group"},value:t.route("user.index"),title:"Mitarbeitende"},t.can("user","viewIndex")&&{props:{prependIcon:"mdi-tree",active:t.route().current("organization.tree")},value:t.route("organization.tree",{organization:t.$page.props.organization.id}),title:"Organigramm"},...t.can("organization","viewIndex")?[{type:"divider"},{type:"subheader",title:"Super-Admin"},{props:{prependIcon:"mdi-security",active:t.route().current("organization.index")},value:t.route("organization.index"),title:"Organisationen"}]:[]].filter(Boolean)},null,8,["items"]))}}),oe=Z(ae,[["__scopeId","data-v-d2eb9acd"]]),re={class:"d-flex align-center"},ne={class:"text-center font-weight-medium"},de=N({__name:"AdminLayout",props:{title:{},backurl:{}},setup(V){const t=F().smAndDown,l=U(!t.value),p="Herta";return j(1e4,{only:["unreadNotifications"]}),(i,e)=>(s(),d(G,null,{default:r(()=>[a(u(J),{title:i.title},null,8,["title"]),a(Q,{color:"background",style:{border:"none"},modelValue:l.value,"onUpdate:modelValue":e[2]||(e[2]=o=>l.value=o),image:"/img/loggedin-background.png"},{default:r(()=>[a(I,null,{default:r(()=>[a(S,{onClick:e[1]||(e[1]=c(o=>u(b).get("/"),["stop"]))},{prepend:r(()=>[a(E,{src:"/img/logo-symbol.png",style:{width:"24px"},class:"me-8"})]),append:r(()=>[a(g,{onClick:e[0]||(e[0]=c(o=>l.value=!1,["stop"])),icon:"mdi-close",variant:"text"})]),default:r(()=>[a(z,null,{default:r(()=>[m("div",re,[m("h1",ne,[m("span",null,f(u(p)),1)])])]),_:1})]),_:1})]),_:1}),a(w),a(oe)]),_:1},8,["modelValue"]),a(q,{elevation:"0",color:"background"},{default:r(()=>[!l.value||u(t)?(s(),d(L,{key:0,variant:"text",onClick:e[3]||(e[3]=c(o=>l.value=!l.value,["stop"]))})):v("",!0),i.backurl?(s(),d(L,{key:1,variant:"text",icon:"mdi-arrow-left",onClick:e[4]||(e[4]=c(o=>u(b).visit(i.backurl,{preserveState:!0}),["stop"]))})):v("",!0),a(R,null,{default:r(()=>[A(f(i.title),1)]),_:1}),D(i.$slots,"appbarActions"),a(te)]),_:3}),a(X,null,{default:r(()=>[a(K,{class:"pt-0",fluid:""},{default:r(()=>[i.$page.props.flash.error?(s(),d(M,{type:"error",closable:"",class:"mb-6",key:Math.random()},{default:r(()=>[A(f(i.$page.props.flash.error),1)]),_:1})):v("",!0),i.$page.props.flash.success?(s(),d(M,{type:"success",closable:"",class:"mb-6",key:Math.random()},{default:r(()=>[A(f(i.$page.props.flash.success),1)]),_:1})):v("",!0),D(i.$slots,"default")]),_:3})]),_:3})]),_:3}))}});export{de as _};
