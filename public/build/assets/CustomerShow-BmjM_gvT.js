import{_ as b}from"./ConfirmDelete.vue_vue_type_script_setup_true_lang-FGC30f26.js";import{A as V}from"./AdminLayout-HC8yYScd.js";import{f as y}from"./utils-DGsYL1Mm.js";import{_ as C}from"./TicketOverview.vue_vue_type_script_setup_true_lang-BjOex475.js";import{_ as h}from"./CreateEditCustomerOperatingSite.vue_vue_type_script_setup_true_lang-Bt0GVs2J.js";import{_ as v}from"./CustomerContactDialog.vue_vue_type_script_setup_true_lang-V1wmhQGY.js";import{_ as $}from"./CustomerForm.vue_vue_type_script_setup_true_lang-DSrSLtP-.js";import{_ as w}from"./CustomerNotes.vue_vue_type_script_setup_true_lang-OXHNnSOz.js";import{d as O,r as T,a as m,b as s,e as r,g as a,G as B,H as d,t as i,I as E,J as p,V as g,a0 as _,h as N,f as n,m as F,q as u,k as f,v as k}from"./app-DvILYWbg.js";import"./ChatDetails-F6E8hL1x.js";import"./ChatMessage-unkuQv19.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./TicketTable.vue_vue_type_script_setup_true_lang-BEOcPvYM.js";import"./TicketCreateDialog.vue_vue_type_script_setup_true_lang-B1ekAJwF.js";import"./types-BVvW7sCV.js";import"./TicketShowDialog.vue_vue_type_script_setup_true_lang-B9Ia4pPe.js";import"./RecordCreateDialog.vue_vue_type_script_setup_true_lang-Dl9bSPkJ.js";import"./TicketFinishDialog.vue_vue_type_script_setup_true_lang-C-zS2q1H.js";import"./TicketArchiveTable.vue_vue_type_script_setup_true_lang-C8TWDy4j.js";import"./TicketArchiveFilter.vue_vue_type_script_setup_true_lang-TM0V6XNm.js";import"./CreateEditCustomerNoteFolder.vue_vue_type_script_setup_true_lang-B-mTICHF.js";import"./CreateEditCustomerNoteEntry.vue_vue_type_script_setup_true_lang-DklkUBTv.js";const K=["href"],A=["href"],D=["href"],se=O({__name:"CustomerShow",props:{customer:{},operatingSites:{},customerNoteFolders:{},customerNoteEntries:{},users:{},ticketableOperatingSites:{},tickets:{},archiveTickets:{},ticketTab:{},tab:{}},setup(S){const l=T(S.tab),c=T(Number(route().queryParams.fromTicket)??null);return(e,o)=>(s(),m(V,{title:"Kunde: "+e.customer.name,backurl:c.value?e.route("ticket.index",{openTicket:c.value}):e.route("customer.index"),backurlTitle:c.value?"zum Ticket":""},{default:r(()=>[a(B,{modelValue:l.value,"onUpdate:modelValue":o[0]||(o[0]=t=>l.value=t)},{default:r(()=>[a(d,{value:"customerData"},{default:r(()=>[...o[1]||(o[1]=[i("Stammdaten",-1)])]),_:1}),a(d,{value:"customerNotes"},{default:r(()=>[...o[2]||(o[2]=[i("Unterlagen",-1)])]),_:1}),a(d,{value:"tickets"},{default:r(()=>[...o[3]||(o[3]=[i("Tickets",-1)])]),_:1})]),_:1},8,["modelValue"]),a(E,{"model-value":l.value},{default:r(()=>[a(p,{value:"customerData"},{default:r(()=>[a($,{customer:e.customer},null,8,["customer"]),a(g,{title:"Standort",class:"mt-4"},{default:r(()=>[a(_,{"fixed-header":"",headers:[{title:"Name",key:"name",sortable:!1},{title:"Adresse",key:"address",sortable:!1},{title:"",key:"actions",align:"end"}],items:e.operatingSites.map(t=>({...t,address:N(y)(t.current_address)}))},{"header.actions":r(()=>[e.can("customerOperatingSite","create")?(s(),m(h,{key:0,customer:e.customer},null,8,["customer"])):n("",!0)]),"item.actions":r(({item:t})=>[a(F,{color:"primary",variant:"text",target:"_blank",href:`https://www.google.com/maps/place/${N(y)(t.current_address)}/`},{default:r(()=>[a(u,null,{default:r(()=>[...o[4]||(o[4]=[i("mdi-map-marker-multiple",-1)])]),_:1})]),_:1},8,["href"]),e.can("customerOperatingSite","update")?(s(),m(h,{key:0,customer:e.customer,item:t},null,8,["customer","item"])):n("",!0),e.can("customerOperatingSite","delete")?(s(),m(b,{key:1,title:"Kundenstandort löschen",content:"Bist du dir sicher, dass du den Standort "+t.name+" löschen möchtest?",route:e.route("customerOperatingSite.destroy",{customerOperatingSite:t.id})},null,8,["content","route"])):n("",!0)]),_:1},8,["items"])]),_:1}),a(g,{title:"Kontakte",class:"mt-4"},{default:r(()=>[a(_,{"fixed-header":"",headers:[{title:"Name",key:"name",sortable:!1},{title:"Tätigkeit",key:"occupation",sortable:!1},{title:"Telefonnummer",key:"phone_number",sortable:!1},{title:"Mobiltelefonnummer",key:"mobile_number",sortable:!1},{title:"Email",key:"email",sortable:!1},{title:"",key:"actions",align:"end"}],items:e.customer.contacts},{"header.actions":r(()=>[e.can("customerContact","create")?(s(),m(v,{key:0,customer:e.customer},null,8,["customer"])):n("",!0)]),"item.phone_number":r(({item:t})=>[t.phone_number?(s(),f("a",{key:0,class:"text-decoration-none text-black py-1",href:`tel:${t.phone_number}`},[a(u,{variant:"text"},{default:r(()=>[...o[5]||(o[5]=[i("mdi-phone",-1)])]),_:1}),i(" "+k(t.phone_number),1)],8,K)):n("",!0)]),"item.mobile_number":r(({item:t})=>[t.mobile_number?(s(),f("a",{key:0,class:"text-decoration-none text-black py-1",href:`tel:${t.mobile_number}`},[a(u,{variant:"text"},{default:r(()=>[...o[6]||(o[6]=[i("mdi-phone",-1)])]),_:1}),i(" "+k(t.mobile_number),1)],8,A)):n("",!0)]),"item.email":r(({item:t})=>[t.email?(s(),f("a",{key:0,class:"text-decoration-none text-black py-1",href:`mailto:${t.email}`},[a(u,{variant:"text"},{default:r(()=>[...o[7]||(o[7]=[i("mdi-email",-1)])]),_:1}),i(" "+k(t.email),1)],8,D)):n("",!0)]),"item.actions":r(({item:t})=>[e.can("customerContact","update")?(s(),m(v,{key:0,customer:e.customer,contact:t},null,8,["customer","contact"])):n("",!0),e.can("customerContact","delete")?(s(),m(b,{key:1,title:"Kundenkontakt löschen",content:"Bist du dir sicher, dass du den Kontakt "+t.name+" löschen möchtest?",route:e.route("customerContact.destroy",{customerContact:t.id})},null,8,["content","route"])):n("",!0)]),_:1},8,["items"])]),_:1})]),_:1}),a(p,{value:"customerNotes"},{default:r(()=>[a(w,{customerNoteEntries:e.customerNoteEntries,customer:e.customer,customerNoteFolders:e.customerNoteFolders},null,8,["customerNoteEntries","customer","customerNoteFolders"])]),_:1}),a(p,{value:"tickets"},{default:r(()=>[a(C,{tickets:e.tickets,archiveTickets:e.archiveTickets,customers:[e.customer],users:e.users,operatingSites:e.ticketableOperatingSites,tab:e.ticketTab},null,8,["tickets","archiveTickets","customers","users","operatingSites","tab"])]),_:1})]),_:1},8,["model-value"])]),_:1},8,["title","backurl","backurlTitle"]))}});export{se as default};
