import{A as b}from"./AdminLayout-a7KNtOkX.js";import{e as v,c as A}from"./utils-BNfJ7iMN.js";import{d as D,as as N,a as r,b as a,e as n,g as T,a0 as B,h as s,D as C,f as l,a6 as S,l as w,k as x,az as c,t as H,v as i,j as u,q as d}from"./app-BdSnz42T.js";import{_ as I}from"./UserShowNavBar.vue_vue_type_script_setup_true_lang-B5WBRU_e.js";import"./ChatDetails-DcICtXuv.js";import"./ChatMessage-BbPq3UxZ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const M={class:"text-black"},R={key:1},U=D({__name:"TimeAccountTransactions",props:{user:{},time_accounts:{},time_account_transactions:{}},setup(h){const p=h,{currentPage:m,data:P,lastPage:f,itemsPerPage:V}=v(N(p),"time_account_transactions",{tab:"timeAccountTransactions"});function _(o){return o.from_id&&o.to_id?"transfer":o.to_id?"positive":"negative"}function y(o){const t=p.time_accounts.find(e=>e.id==o);return t?(t==null?void 0:t.name)+(t!=null&&t.deleted_at?" (gelöscht)":""):""}return(o,t)=>(a(),r(b,{title:o.user.first_name+" "+o.user.last_name},{default:n(()=>[T(I,{user:o.user,tab:"timeAccountTransactions"},null,8,["user"]),T(B,{itemsPerPage:s(V),items:s(P).map(e=>({...e,created_at:s(C).fromISO(e.created_at).toFormat("dd.MM.yyyy HH:mm"),transactionType:_(e),from:y(e.from_id),to:y(e.to_id),amount:e.amount*(_(e)=="negative"?-1:1),formatted_amount:s(A)(e.amount)})),headers:[{title:"",key:"transactionType",width:0,sortable:!1},{title:"Durchgeführt",key:"created_at"},{title:"Von",key:"from"},{title:"Nach",key:"to"},{title:"Durch",key:"modified_by"},{title:"Beschreibung",key:"description"},{title:"Stunden",key:"amount",align:"end",width:0,cellProps:{class:"pe-8"},headerProps:{class:"pe-8"}}]},{"item.transactionType":n(({item:e})=>[e.transactionType=="positive"?(a(),r(d,{key:0,icon:"mdi-plus-circle",color:"success"})):e.transactionType=="negative"?(a(),r(d,{key:1,icon:"mdi-minus-circle",color:"error"})):e.transactionType=="transfer"?(a(),r(d,{key:2,icon:"mdi-circle",color:"grey"})):l("",!0)]),"item.amount":n(({item:e})=>[e.transactionType=="positive"?(a(),r(c,{key:0,color:"success"},{default:n(()=>[u("span",null,"+ "+i(e.formatted_amount),1)]),_:2},1024)):e.transactionType=="negative"?(a(),r(c,{key:1,color:"error"},{default:n(()=>[u("span",null,"- "+i(e.formatted_amount),1)]),_:2},1024)):e.transactionType=="transfer"?(a(),r(c,{key:2,color:"grey"},{default:n(()=>[u("span",M,i(e.formatted_amount),1)]),_:2},1024)):l("",!0)]),"item.modified_by":n(({item:e})=>[e.modified_by?(a(),r(c,{key:0,color:"purple-darken-1"},{default:n(()=>{var g,k;return[H(i((g=e.user)==null?void 0:g.first_name)+" "+i((k=e.user)==null?void 0:k.last_name),1)]}),_:2},1024)):(a(),x("span",R,"System"))]),bottom:n(()=>[s(f)>1?(a(),r(S,{key:0,modelValue:s(m),"onUpdate:modelValue":t[0]||(t[0]=e=>w(m)?m.value=e:null),length:s(f)},null,8,["modelValue","length"])):l("",!0)]),_:1},8,["itemsPerPage","items"])]),_:1},8,["title"]))}});export{U as default};
