import{d as C,n as b,T as x,D as g,I as S,o as f,c as k,b as s,V as B,e as t,u as a,H as V,f as m,p as N,q as u,x as r,U as c,g as p,h as i,t as d,k as L,j as T,E as $,m as y,i as I}from"./app-C2n3qynK.js";import{a as M}from"./utils--wXi5y9G.js";const A={class:"d-flex align-center ga-3"},D={class:"d-flex flex-column"},E={class:"text-h6"},G={class:"d-flex align-center ga-3"},F={class:"d-flex flex-column"},K={class:"text-h6"},Q={class:"d-flex align-center ga-3"},U={class:"d-flex flex-column"},Z={class:"text-h6"},j={class:"d-flex align-center ga-3"},q={class:"d-flex flex-column"},O={class:"text-h6"},R={key:1},Y=C({__name:"WorkingHours",props:{lastWorkLog:{},operating_times:{},overtime:{},workingHours:{}},setup(z){const n=z,v=b(),W=M();function h(e=!1){var o,l;V.post(route("workLog.store"),{is_home_office:e,id:(o=n.lastWorkLog)!=null&&o.end?null:(l=n.lastWorkLog)==null?void 0:l.id})}const _=n.operating_times.find(e=>{var o;return e.type==((o=x.weekdays("long",{locale:"en"})[g.now().weekday-1])==null?void 0:o.toLowerCase())}),w=S(()=>{var e,o;return(e=n.lastWorkLog)!=null&&e.end?n.workingHours.current:W.value.diff(g.fromSQL(((o=n.lastWorkLog)==null?void 0:o.start)||"")).as("hours")+n.workingHours.current});return(e,o)=>(f(),k(B,{title:"Arbeitszeit"},{append:s(()=>[t(m,{icon:"mdi-eye",variant:"text",onClick:o[0]||(o[0]=l=>a(V).get(e.route("user.workLog.index",{user:a(v).props.auth.user.id})))})]),default:s(()=>[t(I,null,{default:s(()=>[t(N,null,{default:s(()=>[t(u,{cols:"12",sm:"6"},{default:s(()=>[r("div",A,[t(c,{color:"blue-grey",rounded:"",size:"40",class:"elevation-2"},{default:s(()=>[t(p,{size:"24",icon:"mdi-clock"})]),_:1}),r("div",D,[o[3]||(o[3]=i(" Woche Soll ")),r("div",E,d(e.workingHours.should),1)])])]),_:1}),t(u,{cols:"12",sm:"6"},{default:s(()=>[r("div",G,[t(c,{color:"green",rounded:"",size:"40",class:"elevation-2"},{default:s(()=>[t(p,{size:"24",icon:"mdi-clock-check"})]),_:1}),r("div",F,[o[4]||(o[4]=i(" Woche Ist ")),r("div",K,d(Math.floor(w.value||0))+":"+d(Math.floor((w.value||0)%1*60).toString().padStart(2,"0")),1)])])]),_:1}),t(u,{cols:"12",sm:"6"},{default:s(()=>[r("div",Q,[t(c,{color:"orange",rounded:"",size:"40",class:"elevation-2 text-white"},{default:s(()=>[t(p,{size:"24",icon:"mdi-clock-plus"})]),_:1}),r("div",U,[o[5]||(o[5]=i(" Ãœberstunden ")),r("div",Z,d(e.overtime),1)])])]),_:1}),e.lastWorkLog&&e.lastWorkLog.end==null?(f(),k(u,{key:0,cols:"12",sm:"6"},{default:s(()=>[r("div",j,[t(c,{color:"blue",rounded:"",size:"40",class:"elevation-2"},{default:s(()=>[t(p,{size:"24",icon:"mdi-timer"})]),_:1}),r("div",q,[o[6]||(o[6]=i(" Hier seit ")),r("div",O,d(a(g).fromSQL(e.lastWorkLog.start).toFormat("HH:mm"))+" Uhr",1)])])]),_:1})):L("",!0),t(u,{cols:"12"},{default:s(()=>[a(_)&&a(W).diff(a(g).fromFormat(a(_).end,"HH:mm")).as("minutes")>0?(f(),k(T,{key:0,color:"error"},{default:s(()=>{var l;return[o[8]||(o[8]=i(" Es fehlt eine Meldung. Bitte Zeitkorrektur. ")),t(m,{color:"error",href:`/user/${a(v).props.auth.user.id}/workLogs?workLog=${(l=e.lastWorkLog)==null?void 0:l.id}`},{default:s(()=>o[7]||(o[7]=[i(" Zeitkorrektur ")])),_:1},8,["href"])]}),_:1})):a(v).props.auth.user.home_office&&(!e.lastWorkLog||e.lastWorkLog.end)||e.lastWorkLog&&e.lastWorkLog.is_home_office&&!e.lastWorkLog.end?(f(),$("div",R,[t(m,{block:"",size:"large",onClick:o[1]||(o[1]=y(l=>h(!0),["stop"])),color:"primary",class:"me-2"},{default:s(()=>[i(d(!e.lastWorkLog||e.lastWorkLog.end?"Kommen Homeoffice":"Gehen Homeoffice"),1)]),_:1})])):L("",!0)]),_:1}),t(u,{cols:"12"},{default:s(()=>{var l,H;return[(l=e.lastWorkLog)!=null&&l.end||!((H=e.lastWorkLog)!=null&&H.is_home_office)?(f(),k(m,{key:0,block:"",size:"large",onClick:o[2]||(o[2]=y(J=>h(),["stop"])),color:"primary"},{default:s(()=>[i(d(!e.lastWorkLog||e.lastWorkLog.end?"Kommen":"Gehen"),1)]),_:1})):L("",!0)]}),_:1})]),_:1})]),_:1})]),_:1}))}});export{Y as _};
