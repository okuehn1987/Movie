import{d as N,a6 as C,a as l,o as c,aq as _,b as n,f as p,l as d,m,e as f,i as t,a4 as B,k as y,A as u,p as x,s as A,t as T,D as U,y as w}from"./app-Bb2svyBo.js";import{e as D,g as P}from"./utils-DZJaSbix.js";const H=N({__name:"NotificationTable",props:{notifications:{},triggeredByUsers:{},tab:{}},setup(b){const o=b,{currentPage:a,lastPage:g,data:k}=D(C(o),"notifications",{tab:o.tab},{flow:"flowNotifications",archive:"archiveNotifications",tide:"tideNotifications"}[o.tab]);function v(i){u.patch(route("notification.update",{notification:i.id}))}function h(){o.tab!="archive"&&u.post(route("notification.readAll"),{tab:o.tab})}return(i,r)=>(c(),l(w,{page:t(a),"onUpdate:page":r[1]||(r[1]=e=>y(a)?a.value=e:null),headers:[{title:"Titel",key:"data.title"},{title:"Am",key:"created_at"},{title:"Von",key:"triggered_by"},{title:"",key:"actions",align:"end",sortable:!1}],items:t(k).map(e=>{var s;return{...e,triggered_by:((s=i.triggeredByUsers.find(V=>V.id==e.data.triggered_by))==null?void 0:s.name)||"System"}}),"no-data-text":"Keine ungelesenen Benachrichtigungen"},_({"item.created_at":n(({item:e})=>[A(T(t(U).fromISO(e.created_at).toFormat("dd.MM.yyyy HH:mm")),1)]),"item.actions":n(({item:e})=>[i.tab!=="archive"?(c(),l(d,{key:0,color:"primary",icon:"mdi-eye",variant:"text",onClick:m(s=>t(u).get(t(P)(e)),["stop"])},{default:n(()=>[p(x,{icon:"mdi-eye"})]),_:1},8,["onClick"])):f("",!0),i.tab!=="archive"?(c(),l(d,{key:1,color:"primary",icon:"mdi-close",variant:"text",onClick:m(s=>v(e),["stop"])},null,8,["onClick"])):f("",!0)]),bottom:n(()=>[t(g)>1?(c(),l(B,{key:0,modelValue:t(a),"onUpdate:modelValue":r[0]||(r[0]=e=>y(a)?a.value=e:null),length:t(g)},null,8,["modelValue","length"])):f("",!0)]),_:2},[i.tab!="archive"?{name:"header.actions",fn:n(()=>[p(d,{variant:"text",title:"Alle als gelesen markieren",color:"primary",onClick:m(h,["stop"]),icon:"mdi-close-box-multiple"})]),key:"0"}:void 0]),1032,["page","items"]))}});export{H as _};
