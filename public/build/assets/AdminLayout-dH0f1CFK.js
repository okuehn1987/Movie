import{d as z,a as d,o as p,Q as J,b as a,f as t,V as Z,x as I,g as E,J as Q,m,i as r,K as X,L as V,O as L,a1 as Y,a2 as q,l as b,s as N,p as w,h as c,a7 as G,a8 as ee,u as R,R as H,j as A,e as k,a9 as x,F as T,z as te,aa as M,ab as oe,P as S,ac as $,A as h,ad as K,t as y,D as ae,r as F,ae as ie,w as re,af as se,c as ne,W as le,X as pe,ag as ue,n as P,Y as B,ah as de,Z as U,ai as W,aj as ce,ak as me,S as O}from"./app-9FOu14I-.js";import{d as ge}from"./utils-BHCeikZt.js";import{_}from"./_plugin-vue_export-helper-DlAUqK2U.js";const fe=z({__name:"ReportBugDialog",setup(C){const e=useForm({location:null,summary:null,description:null,attachments:[]});return(g,i)=>(p(),d(J,{"max-width":"1000"},{activator:a(({props:f})=>[c("div",G(ee(f)),[t(w,{icon:"mdi-bug",class:"me-2"}),i[4]||(i[4]=N(" Fehler melden ",-1))],16)]),default:a(({isActive:f})=>[t(Z,{title:"Fehler melden"},{append:a(()=>[t(b,{icon:"",variant:"text",onClick:u=>{f.value=!1,r(e).reset()}},{default:a(()=>[t(w,null,{default:a(()=>[...i[5]||(i[5]=[N("mdi-close",-1)])]),_:1})]),_:1},8,["onClick"])]),default:a(()=>[t(I),t(E,null,{default:a(()=>[t(Q,{onSubmit:m(u=>{r(e).post(g.route("reportBug.store"),{onSuccess:()=>{f.value=!1,r(e).reset()}})},["prevent"])},{default:a(()=>[t(X,null,{default:a(()=>[t(V,{cols:"12"},{default:a(()=>[t(L,{modelValue:r(e).location,"onUpdate:modelValue":i[0]||(i[0]=u=>r(e).location=u),errorMessages:r(e).errors.location,label:"Wo ist der Fehler aufgetreten?"},null,8,["modelValue","errorMessages"])]),_:1}),t(V,{cols:"12"},{default:a(()=>[t(L,{modelValue:r(e).summary,"onUpdate:modelValue":i[1]||(i[1]=u=>r(e).summary=u),errorMessages:r(e).errors.summary,label:"Fasse den Fehler zusammen"},null,8,["modelValue","errorMessages"])]),_:1}),t(V,{cols:"12"},{default:a(()=>[t(Y,{modelValue:r(e).description,"onUpdate:modelValue":i[2]||(i[2]=u=>r(e).description=u),errorMessages:r(e).errors.description,label:"Zusätzliche Informationen zum Fehler"},null,8,["modelValue","errorMessages"])]),_:1}),t(V,{cols:"12"},{default:a(()=>[t(q,{modelValue:r(e).attachments,"onUpdate:modelValue":i[3]||(i[3]=u=>r(e).attachments=u),errorMessages:Object.entries(r(e).errors).filter(([u,v])=>u.includes("attachments")&&v).map(([u])=>"Alle Dateien müssen ein Bild sein."),label:"Anhang",multiple:"",accept:"image/*"},null,8,["modelValue","errorMessages"])]),_:1}),t(V,{cols:"12",class:"text-end"},{default:a(()=>[t(b,{type:"submit",color:"primary"},{default:a(()=>[...i[6]||(i[6]=[N("Absenden",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:2},1024)]),_:2},1024)]),_:1}))}}),ve={key:0},ke={key:1},Ae={class:"ms-md-4 ms-2 ga-md-4 ga-2 d-flex"},be={key:1,style:{width:"48px"}},he=z({__name:"AppbarActions",setup(C){const e=R(),g=H();function i(o){h.post(route("notification.update",{notification:o.id}))}function f(o){const s=(()=>{if(o.type=="App\\Notifications\\WorkLogPatchNotification")return route("dispute.index",{openPatch:o.data.work_log_patch_id});if(o.type=="App\\Notifications\\WorkLogNotification")return route("dispute.index",{openWorkLog:o.data.work_log_id});if(o.type=="App\\Notifications\\AbsenceNotification")return route("dispute.index",{openAbsence:o.data.absence_id});if(o.type=="App\\Notifications\\AbsencePatchNotification")return route("dispute.index",{openAbsencePatch:o.data.absence_patch_id});if(o.type=="App\\Notifications\\AbsenceDeleteNotification")return route("dispute.index",{openAbsenceDelete:o.data.absence_id});if("ticket_id"in o.data&&["App\\Notifications\\TicketCreationNotification","App\\Notifications\\TicketRecordCreationNotification","App\\Notifications\\TicketUpdateNotification","App\\Notifications\\TicketDeletionNotification","App\\Notifications\\TicketFinishNotification"].includes(o.type))return route("ticket.index",{openTicket:o.data.ticket_id});if(o.type=="App\\Notifications\\DisputeStatusNotification"){if(o.data.type=="delete")return;if(o.data.log_model=="App\\Models\\Absence")return route("absence.index",{openAbsence:o.data.log_id});if(o.data.log_model=="App\\Models\\AbsencePatch")return route("absence.index",{openAbsencePatch:o.data.log_id});if(o.data.log_model=="App\\Models\\WorkLogPatch")return route("user.workLog.index",{user:g.props.auth.user.id,openWorkLogPatch:o.data.log_id});if(o.data.log_model=="App\\Models\\WorkLog")return route("user.workLog.index",{user:g.props.auth.user.id,workLog:o.data.log_id})}})();s&&h.get(s,{},{onSuccess:()=>i(o)})}const u=ge();function v(o){const s=ae.fromISO(o.created_at),n=u.value.diff(s);return n.as("minutes")<1?"Jetzt":n.as("hours")<1?"vor "+Math.floor(n.as("minutes"))+" minuten":s.day!==u.value.day||s.month!==u.value.month||s.year!==u.value.year?s.toFormat("dd.MM. - HH:mm")+" Uhr":s.toFormat("HH:mm")+" Uhr"}const l={"App\\Notifications\\AbsenceNotification":"neuer Antrag ","App\\Notifications\\AbsencePatchNotification":"neue Korrektur","App\\Notifications\\WorkLogPatchNotification":"neue Korrektur","App\\Notifications\\DisputeStatusNotification":"Antrag bearbeitet","App\\Notifications\\AbsenceDeleteNotification":"neuer Antrag","App\\Notifications\\WorkLogNotification":"neue Buchung","App\\Notifications\\TicketCreationNotification":"neues Ticket","App\\Notifications\\TicketUpdateNotification":"Ticket Update","App\\Notifications\\TicketFinishNotification":"Ticket abgeschlossen","App\\Notifications\\TicketDeletionNotification":"Ticket gelöscht","App\\Notifications\\TicketRecordCreationNotification":"Ticket Update"};return(o,s)=>(p(),A(T,null,[o.$page.props.unreadNotifications.length>0?(p(),d(x,{key:0,id:"notification-menu"},{activator:a(({props:n})=>[t(b,S({color:"primary"},n,{stacked:""}),{default:a(()=>[t(oe,{content:o.$page.props.unreadNotifications.length,color:"error"},{default:a(()=>[t(w,{icon:"mdi-bell"})]),_:1},8,["content"])]),_:2},1040)]),default:a(()=>[t(M,{"min-width":"200px",onClick:m(()=>{},["stop"])},{default:a(()=>[(p(!0),A(T,null,te(o.$page.props.unreadNotifications.toSorted((n,D)=>D.created_at.localeCompare(n.created_at)),(n,D)=>(p(),A(T,{key:n.id},[D!=0?(p(),d(I,{key:0})):k("",!0),t($,null,{append:a(()=>[c("div",Ae,[t(I,{vertical:""}),n.type!="App\\Notifications\\TicketDeletionNotification"&&(n.type!="App\\Notifications\\DisputeStatusNotification"||n.type=="App\\Notifications\\DisputeStatusNotification"&&n.data.type!="delete")?(p(),d(b,{key:0,size:r(e).smAndDown.value?"small":void 0,color:"primary",icon:"mdi-eye",variant:"text",onClick:m(j=>f(n),["stop"])},null,8,["size","onClick"])):(p(),A("div",be)),t(b,{size:r(e).smAndDown.value?"small":void 0,color:"primary",icon:"mdi-close",variant:"text",onClick:m(j=>i(n),["stop"])},null,8,["size","onClick"])])]),default:a(()=>[t(K,null,{default:a(()=>[r(e).smAndDown.value?(p(),A("div",ve,y(l[n.type]),1)):(p(),A("div",ke,y(n.data.title),1)),c("div",null,[c("sub",null,y(v(n)),1)])]),_:2},1024)]),_:2},1024)],64))),128))]),_:1})]),_:1})):k("",!0),t(x,{location:r(e).smAndDown.value?"bottom left":"bottom"},{activator:a(({props:n})=>[t(b,S({stacked:"",color:"black","prepend-icon":"mdi-account-details"},n),null,16)]),default:a(()=>[t(M,{"min-width":"200px"},{default:a(()=>[t($,{onClick:s[0]||(s[0]=m(n=>r(h).get(o.route("user.profile",{user:o.$page.props.auth.user.id})),["stop"]))},{default:a(()=>[t(w,{icon:"mdi-account",class:"me-2"}),s[2]||(s[2]=N(" Profil ",-1))]),_:1}),t($,{onClick:m(()=>{},["stop"])},{default:a(()=>[t(fe)]),_:1}),t($,{onClick:s[1]||(s[1]=m(n=>r(h).post(o.route("logout")),["stop"]))},{default:a(()=>[t(w,{icon:"mdi-logout",class:"me-2"}),s[3]||(s[3]=N(" Abmelden ",-1))]),_:1})]),_:1})]),_:1},8,["location"])],64))}}),ye=_(he,[["__scopeId","data-v-10687b98"]]),Ne=z({__name:"DrawerMenu",setup(C){return(e,g)=>(p(),d(M,{nav:"","onClick:select":g[0]||(g[0]=i=>r(h).get(i.id)),items:[{props:{active:e.route().current("dashboard"),prependIcon:"mdi-view-dashboard"},value:e.route("dashboard"),title:"Dashboard"},...e.$page.props.currentAppModule=="herta"?[e.can("workLog","viewIndex")&&{props:{active:e.route().current("workLog.index"),prependIcon:"mdi-clock-outline"},value:e.route("workLog.index"),title:"Arbeitszeiten"}]:[],...e.$page.props.currentAppModule=="timesheets"?[e.can("customer","viewIndex")&&{props:{active:e.route().current("customer.index"),prependIcon:"mdi-folder-account-outline"},value:e.route("customer.index"),title:"Kundenliste"},{props:{active:e.route().current("ticket.index"),prependIcon:"mdi-ticket-account"},value:e.route("ticket.index"),title:"Tickets"}]:[],e.can("dispute","viewIndex")&&{props:{active:e.route().current("dispute.index"),prependIcon:"mdi-bookmark-outline"},value:e.route("dispute.index"),title:"Anträge"},e.can("absence","viewIndex")&&{props:{active:e.route().current("absence.index"),prependIcon:"mdi-timer-cancel-outline"},value:e.route("absence.index"),title:"Abwesenheiten"},e.can("organization","viewShow")&&{title:"Organisation",value:e.route("organization.show",{organization:e.$page.props.organization.id}),props:{prependIcon:"mdi-domain",active:e.route().current("organization.show")}},e.can("operatingSite","viewIndex")&&{props:{active:e.route().current("operatingSite.index"),prependIcon:"mdi-map-marker"},value:e.route("operatingSite.index"),title:"Betriebsstätten"},e.can("group","viewIndex")&&{props:{active:e.route().current("group.index"),prependIcon:"mdi-dots-circle"},value:e.route("group.index"),title:"Abteilungen"},e.can("user","viewIndex")&&{props:{active:e.route().current("user.index"),prependIcon:"mdi-account-group"},value:e.route("user.index"),title:"Mitarbeitende"},e.can("user","viewIndex")&&{props:{prependIcon:"mdi-tree",active:e.route().current("organization.tree")},value:e.route("organization.tree",{organization:e.$page.props.organization.id}),title:"Organigramm"},...e.can("organization","viewIndex")?[{type:"divider"},{type:"subheader",title:"Super-Admin"},{props:{prependIcon:"mdi-security",active:e.route().current("organization.index")},value:e.route("organization.index"),title:"Organisationen"}]:[]].filter(Boolean)},null,8,["items"]))}}),we=_(Ne,[["__scopeId","data-v-10604770"]]),Ve={key:0,class:"posiion-relative",style:{width:"56px"}},$e={class:"d-flex align-center"},Ie={class:"text-center text-h5 font-weight-medium"},Me={style:{"user-select":"none"}},ze={class:"d-flex align-center mr-auto ga-2"},Ce={class:"text-h6 ps-0 mx-md-5 px-2 mb-0",style:{"text-overflow":"ellipsis",overflow:"hidden","white-space":"nowrap","max-width":"calc(100vw - 72px - 72px - 52px)"}},De=z({__name:"AdminLayout",props:{title:{},backurl:{}},setup(C){const e=H(),g=R().smAndDown,i=F(!g.value);ie(1e3*60*2,{only:["unreadNotifications"]},{keepAlive:!0});const f=F(!!e.props.organization.logo);re(()=>e.props.organization.logo,()=>{f.value=!1,se(()=>f.value=!0)});function u(l){h.post(route("switchAppModule",{module:l}),{preserveState:!0,preserveScroll:!0,replace:!0})}const v=ne(()=>e.props.appModules.find(l=>l.value===e.props.currentAppModule));return(l,o)=>(p(),d(le,null,{default:a(()=>[t(r(pe),{title:l.title},null,8,["title"]),t(ue,{color:"background",style:{border:"none"},modelValue:i.value,"onUpdate:modelValue":o[2]||(o[2]=s=>i.value=s),image:"/img/loggedin-background.png"},{default:a(()=>[v.value?(p(),d(M,{key:0},{default:a(()=>[t($,{onClick:o[1]||(o[1]=m(s=>u(l.$page.props.currentAppModule=="herta"?"timesheets":"herta"),["stop"])),class:"pe-2"},{prepend:a(()=>[r(e).props.appModules.length==2?(p(),A("div",Ve,[c("img",{src:"/img/logo-symbol.png",id:"herta-logo",class:P({ActiveLogo:v.value.value=="herta"})},null,2),t(w,{icon:"mdi-undo",style:{top:"0",position:"absolute",rotate:"-20deg",scale:"0.8"}}),c("img",{src:"/img/TS_Logo.png",id:"timesheets-logo",class:P({ActiveLogo:v.value.value=="timesheets"})},null,2),t(w,{icon:"mdi-undo",style:{top:"25px",left:"40px",position:"absolute",rotate:"140deg",scale:"0.8"}})])):(p(),d(B,{key:1,width:"24px",class:"me-8",src:"/img/logo-symbol.png"}))]),append:a(()=>[t(b,{onClick:o[0]||(o[0]=m(s=>i.value=!1,["stop"])),icon:"mdi-close",variant:"text"})]),default:a(()=>[t(K,null,{default:a(()=>[c("div",$e,[c("h1",Ie,[c("span",Me,y(v.value.title),1)])])]),_:1})]),_:1})]),_:1})):k("",!0),t(I),t(we)]),_:1},8,["modelValue"]),t(de,{elevation:"0",color:"background"},{default:a(()=>[!i.value||r(g)?(p(),d(W,{key:0,variant:"text",onClick:o[3]||(o[3]=m(s=>i.value=!i.value,["stop"]))})):k("",!0),l.backurl?(p(),d(W,{key:1,variant:"text",icon:"mdi-arrow-left",onClick:o[4]||(o[4]=m(s=>r(h).visit(l.backurl,{preserveState:!0}),["stop"]))})):k("",!0),c("div",ze,[c("span",Ce,y(l.title),1),f.value?(p(),d(B,{key:0,src:l.route("organization.getLogo",{organization:l.$page.props.organization.id,key:l.$page.props.organization.logo}),"max-height":"48px","max-width":"48px",width:"100%",height:"100%",class:"rounded"},null,8,["src"])):k("",!0)]),U(l.$slots,"appbarActions",{},void 0,!0),t(ye)]),_:3}),t(ce,null,{default:a(()=>[t(me,{class:"pt-0",fluid:""},{default:a(()=>[l.$page.props.flash.error?(p(),d(O,{type:"error",closable:"",class:"mb-6",key:Math.random()},{default:a(()=>[N(y(l.$page.props.flash.error),1)]),_:1})):k("",!0),l.$page.props.flash.success?(p(),d(O,{type:"success",closable:"",class:"mb-6",key:Math.random()},{default:a(()=>[N(y(l.$page.props.flash.success),1)]),_:1})):k("",!0),U(l.$slots,"default",{},void 0,!0)]),_:3})]),_:3})]),_:3}))}}),xe=_(De,[["__scopeId","data-v-92ad132c"]]);export{xe as A};
