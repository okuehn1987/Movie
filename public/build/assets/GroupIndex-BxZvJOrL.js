import{d as _,a6 as C,a as i,o as m,b as e,f as a,V as f,y as A,i as t,q as P,e as V,a4 as S,k as M,Q as h,x as w,g as F,J as T,m as B,K as D,L as d,O as H,M as N,l as p,s as b,p as c,P as R}from"./app-9FOu14I-.js";import{A as U}from"./AdminLayout-dH0f1CFK.js";import{e as z,u as G}from"./utils-BHCeikZt.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const E=_({__name:"GroupIndex",props:{groups:{},users:{}},setup(y){const x=y,{currentPage:n,lastPage:g,data:k}=z(C(x),"groups"),s=useForm({name:"",users:[]}),v=G(0);return(u,l)=>(m(),i(U,{title:"Abteilungen"},{default:e(()=>[a(f,null,{default:e(()=>[a(A,{style:P({maxHeight:t(v)}),"fixed-header":"",headers:[{title:"Abteilungsname",key:"name"},{title:"Mitarbeitende",key:"users_count"},{title:"",key:"actions",align:"end"}],items:t(k)},{"header.actions":e(()=>[u.can("group","create")?(m(),i(h,{key:0,"max-width":"1000"},{activator:e(({props:r})=>[a(p,R(r,{color:"primary"}),{default:e(()=>[a(c,{icon:"mdi-plus"})]),_:1},16)]),default:e(({isActive:r})=>[a(f,{title:"Abteilung erstellen"},{append:e(()=>[a(p,{icon:"",variant:"text",onClick:o=>{r.value=!1,t(s).reset()}},{default:e(()=>[a(c,null,{default:e(()=>[...l[3]||(l[3]=[b("mdi-close",-1)])]),_:1})]),_:1},8,["onClick"])]),default:e(()=>[a(w),a(F,null,{default:e(()=>[a(T,{onSubmit:B(o=>{t(s).post(u.route("group.store"),{onSuccess:()=>{t(s).reset(),r.value=!1}})},["prevent"])},{default:e(()=>[a(D,null,{default:e(()=>[a(d,{cols:"12",sm:"6"},{default:e(()=>[a(H,{modelValue:t(s).name,"onUpdate:modelValue":l[0]||(l[0]=o=>t(s).name=o),"error-messages":t(s).errors.name,label:"Abteilungsname"},null,8,["modelValue","error-messages"])]),_:1}),a(d,{cols:"12",sm:"6"},{default:e(()=>[a(N,{"data-testid":"employeeGroupAssignment",modelValue:t(s).users,"onUpdate:modelValue":l[1]||(l[1]=o=>t(s).users=o),"error-messages":t(s).errors.users,items:u.users.map(o=>({value:o.id,title:o.name})),label:"Wähle Mitarbeiter aus, die zur Abteilung gehören (optional)",multiple:""},null,8,["modelValue","error-messages","items"])]),_:1}),a(d,{cols:"12",class:"text-end"},{default:e(()=>[a(p,{loading:t(s).processing,type:"submit",color:"primary"},{default:e(()=>[...l[4]||(l[4]=[b("Erstellen",-1)])]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:2},1024)]),_:2},1024)]),_:1})):V("",!0)]),bottom:e(()=>[t(g)>1?(m(),i(S,{key:0,modelValue:t(n),"onUpdate:modelValue":l[2]||(l[2]=r=>M(n)?n.value=r:null),length:t(g)},null,8,["modelValue","length"])):V("",!0)]),_:1},8,["style","items"])]),_:1})]),_:1}))}});export{E as default};
