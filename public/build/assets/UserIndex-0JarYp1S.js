import{_ as p}from"./ConfirmDelete.vue_vue_type_script_setup_true_lang-B6biBGL8.js";import{_ as f}from"./AdminLayout.vue_vue_type_script_setup_true_lang-4xGvx3Hq.js";import{g as c,f as _}from"./utils-DAjb0m9u.js";import{d as y,o as a,c as i,a as t,b as r,A as h,B as g,u as n,D as k,v,e as l,T as V,f as m,g as b,j as d,x as M,P as w,E as B,V as C}from"./app-Cn4mL76G.js";import N from"./UserForm-C1fshGvM.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./PermissionSelector.vue_vue_type_script_setup_true_lang-CmaR2CtL.js";const S={class:"d-flex justify-end"},x={key:2,style:{width:"48px"}},I=y({__name:"UserIndex",props:{users:{},supervisors:{},groups:{},operating_sites:{},permissions:{},countries:{}},setup(D){return(s,u)=>(a(),i(f,{title:"Mitarbeiter"},{default:t(()=>[r(C,null,{default:t(()=>[r(h,{"fixed-header":"",style:g({maxHeight:n(c)(0)}),"no-data-text":"Es wurden keine Mitarbeiter gefunden",headers:[{title:"Vorname",key:"first_name"},{title:"Nachname",key:"last_name"},{title:"Email",key:"email"},{title:"Abteilung",key:"group.name"},{title:"Personalnummer",key:"staff_number"},{title:"Geburtsdatum",key:"date_of_birth"},{title:"",key:"actions",align:"end"}],items:s.users.map(e=>({...n(_)(e),date_of_birth:n(k).fromFormat(e.date_of_birth,"yyyy-MM-dd").toFormat("dd.MM.yyyy")})).toSorted((e,o)=>(e.first_name+e.last_name).localeCompare(o.first_name+o.last_name)),hover:""},{"header.actions":t(()=>[s.can("user","create")?(a(),i(v,{key:0,"max-width":"1000"},{activator:t(({props:e})=>[r(l,V(e,{color:"primary"}),{default:t(()=>[r(m,{icon:"mdi-plus"})]),_:2},1040)]),default:t(({isActive:e})=>[r(N,{countries:s.countries,supervisors:s.supervisors,groups:s.groups,operating_sites:s.operating_sites,permissions:s.permissions,mode:"create",onSuccess:o=>e.value=!1},{append:t(()=>[r(l,{icon:"",variant:"text",onClick:o=>e.value=!1},{default:t(()=>[r(m,null,{default:t(()=>u[0]||(u[0]=[b("mdi-close")])),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["countries","supervisors","groups","operating_sites","permissions","onSuccess"])]),_:1})):d("",!0)]),"item.actions":t(({item:e})=>[M("div",S,[s.can("user","viewShow",e)?(a(),i(n(w),{key:0,href:s.route("user.show",{user:e.id})},{default:t(()=>[r(l,{color:"primary",variant:"text",icon:"mdi-eye"})]),_:2},1032,["href"])):d("",!0),s.can("user","delete",e)?(a(),i(p,{key:1,content:"Bist du dir sicher, dass du "+e.first_name+" "+e.last_name+" entfernen möchtest?",route:s.route("user.destroy",{user:e.id}),title:"Mitarbeiter löschen"},null,8,["content","route"])):(a(),B("div",x))])]),_:1},8,["style","items"])]),_:1})]),_:1}))}});export{I as default};
