import{d as w,a as U,b as x,e as s,g as e,L as V,M as t,V as _,z as C,h as a,D as S,j as m,S as z,aD as A,i as b,m as u,p as y,q as f,t as g,R as v,X as F,y as O,K as N,P as i,N as k,Q as p}from"./app-BnNJe6XS.js";import{A as T}from"./AdminLayout-wjwCvMNd.js";import{i as D,j as I}from"./utils-CV5_pW2n.js";import{_ as L}from"./PaymentTable.vue_vue_type_script_setup_true_lang-DtLxlcD6.js";import"./ChatDetails-Byztl057.js";import"./ChatMessage-BUUITEWL.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const M={class:"d-flex ga-2 align-center"},H=w({__name:"OrganizationIndex",props:{organizations:{},countries:{}},setup(B){const r=useForm({organization_name:"",organization_street:"",organization_house_number:"",organization_address_suffix:"",organization_country:"",organization_city:"",organization_zip:"",organization_federal_state:"",head_quarter_name:"",first_name:"",last_name:"",email:"",password:"",date_of_birth:"",isa_active:!1,openai_api_key:null,flow_active:!1,tide_active:!1});function q(){r.transform(d=>({...d,openai_api_key:d.isa_active?d.openai_api_key:null})).post(route("organization.store"),{onSuccess:()=>r.reset()})}return(d,l)=>(x(),U(T,{title:"Organisationen"},{default:s(()=>[e(V,null,{default:s(()=>[e(t,{cols:"12"},{default:s(()=>[e(_,null,{default:s(()=>[e(C,{hover:"",headers:[{title:"id",key:"id"},{title:"Owner",key:"owner_name"},{title:"Name",key:"name"},{title:"Erstellt am",key:"created_at"},{title:"Mitarbeiter",key:"users_count"},{title:"",key:"actions",width:"1px",align:"end"}],items:d.organizations.map(({stats:n,...o})=>({...a(D)(o),stats:n,owner_name:o.owner.first_name+" "+o.owner.last_name,created_at:a(S).fromISO(o.created_at).toFormat("dd.MM.yyyy")}))},{"header.actions":s(()=>[e(z,{"max-width":"1000"},{activator:s(({props:n})=>[e(u,v(n,{color:"primary"}),{default:s(()=>[e(f,{icon:"mdi-plus"})]),_:1},16)]),default:s(({isActive:n})=>[e(_,{title:"Organisation erstellen"},{append:s(()=>[e(u,{icon:"",variant:"text",onClick:o=>{n.value=!1,a(r).reset()}},{default:s(()=>[e(f,null,{default:s(()=>[...l[18]||(l[18]=[g("mdi-close",-1)])]),_:1})]),_:1},8,["onClick"])]),default:s(()=>[e(O),e(b,null,{default:s(()=>[e(N,{onSubmit:y(q,["prevent"])},{default:s(()=>[e(V,null,{default:s(()=>[e(t,{cols:"12"},{default:s(()=>[...l[19]||(l[19]=[m("h3",null,"Adresse",-1)])]),_:1}),e(t,{cols:"12",md:"6"},{default:s(()=>[e(i,{label:"Firmenname",required:"","error-messages":a(r).errors.organization_name,modelValue:a(r).organization_name,"onUpdate:modelValue":l[0]||(l[0]=o=>a(r).organization_name=o)},null,8,["error-messages","modelValue"])]),_:1}),e(t,{cols:"12",md:"6"},{default:s(()=>[e(i,{label:"Standortname",required:"","error-messages":a(r).errors.head_quarter_name,modelValue:a(r).head_quarter_name,"onUpdate:modelValue":l[1]||(l[1]=o=>a(r).head_quarter_name=o)},null,8,["error-messages","modelValue"])]),_:1}),e(t,{cols:"12",sm:"6"},{default:s(()=>[e(k,{"data-testid":"organizationLand",label:"Land",required:"",items:d.countries.map(o=>({title:o.title,value:o.value})),"error-messages":a(r).errors.organization_country,modelValue:a(r).organization_country,"onUpdate:modelValue":l[2]||(l[2]=o=>a(r).organization_country=o)},null,8,["items","error-messages","modelValue"])]),_:1}),e(t,{cols:"12",sm:"6"},{default:s(()=>[e(k,{"data-testid":"federalState",label:"Bundesland",items:a(I)(a(r).organization_country,d.countries),disabled:!a(r).organization_country,required:"","error-messages":a(r).errors.organization_federal_state,modelValue:a(r).organization_federal_state,"onUpdate:modelValue":l[3]||(l[3]=o=>a(r).organization_federal_state=o)},null,8,["items","disabled","error-messages","modelValue"])]),_:1}),e(t,{cols:"12",sm:"6"},{default:s(()=>[e(i,{label:"PLZ",required:"","error-messages":a(r).errors.organization_zip,modelValue:a(r).organization_zip,"onUpdate:modelValue":l[4]||(l[4]=o=>a(r).organization_zip=o)},null,8,["error-messages","modelValue"])]),_:1}),e(t,{cols:"12",sm:"6"},{default:s(()=>[e(i,{label:"Ort",required:"","error-messages":a(r).errors.organization_city,modelValue:a(r).organization_city,"onUpdate:modelValue":l[5]||(l[5]=o=>a(r).organization_city=o)},null,8,["error-messages","modelValue"])]),_:1}),e(t,{cols:"12",sm:"6"},{default:s(()=>[e(i,{label:"Straße",required:"","error-messages":a(r).errors.organization_street,modelValue:a(r).organization_street,"onUpdate:modelValue":l[6]||(l[6]=o=>a(r).organization_street=o)},null,8,["error-messages","modelValue"])]),_:1}),e(t,{cols:"12",sm:"6"},{default:s(()=>[e(i,{label:"Hausnummer",required:"","error-messages":a(r).errors.organization_house_number,modelValue:a(r).organization_house_number,"onUpdate:modelValue":l[7]||(l[7]=o=>a(r).organization_house_number=o)},null,8,["error-messages","modelValue"])]),_:1}),e(t,{cols:"12",sm:"6"},{default:s(()=>[e(i,{label:"Addresszusatz (optional)","error-messages":a(r).errors.organization_address_suffix,modelValue:a(r).organization_address_suffix,"onUpdate:modelValue":l[8]||(l[8]=o=>a(r).organization_address_suffix=o)},null,8,["error-messages","modelValue"])]),_:1}),e(t,{cols:"12"},{default:s(()=>[...l[20]||(l[20]=[m("h3",null,"Admin Account",-1)])]),_:1}),e(t,{cols:"12",sm:"6"},{default:s(()=>[e(i,{label:"Vorname",required:"","error-messages":a(r).errors.first_name,modelValue:a(r).first_name,"onUpdate:modelValue":l[9]||(l[9]=o=>a(r).first_name=o)},null,8,["error-messages","modelValue"])]),_:1}),e(t,{cols:"12",sm:"6"},{default:s(()=>[e(i,{label:"Nachname",required:"","error-messages":a(r).errors.last_name,modelValue:a(r).last_name,"onUpdate:modelValue":l[10]||(l[10]=o=>a(r).last_name=o)},null,8,["error-messages","modelValue"])]),_:1}),e(t,{cols:"12",sm:"6"},{default:s(()=>[e(i,{label:"E-Mail",required:"","error-messages":a(r).errors.email,modelValue:a(r).email,"onUpdate:modelValue":l[11]||(l[11]=o=>a(r).email=o)},null,8,["error-messages","modelValue"])]),_:1}),e(t,{cols:"12",sm:"6"},{default:s(()=>[e(i,{label:"Password",required:"","error-messages":a(r).errors.password,modelValue:a(r).password,"onUpdate:modelValue":l[12]||(l[12]=o=>a(r).password=o)},null,8,["error-messages","modelValue"])]),_:1}),e(t,{cols:"12",sm:"6"},{default:s(()=>[e(i,{type:"date",label:"Geburtsdatum",required:"","error-messages":a(r).errors.date_of_birth,modelValue:a(r).date_of_birth,"onUpdate:modelValue":l[13]||(l[13]=o=>a(r).date_of_birth=o)},null,8,["error-messages","modelValue"])]),_:1}),e(t,{cols:"12"},{default:s(()=>[...l[21]||(l[21]=[m("h3",null,"Funktionen",-1)])]),_:1}),e(t,{cols:"12",sm:"6"},{default:s(()=>[e(p,{label:"FLow aktivieren",required:"",modelValue:a(r).flow_active,"onUpdate:modelValue":l[14]||(l[14]=o=>a(r).flow_active=o),"error-messages":a(r).errors.flow_active},null,8,["modelValue","error-messages"])]),_:1}),e(t,{cols:"12",sm:"6"},{default:s(()=>[e(p,{label:"Tide aktivieren",required:"",modelValue:a(r).tide_active,"onUpdate:modelValue":l[15]||(l[15]=o=>a(r).tide_active=o),"error-messages":a(r).errors.tide_active},null,8,["modelValue","error-messages"])]),_:1}),e(t,{cols:"12",sm:"6"},{default:s(()=>[e(p,{label:"ISA aktivieren",required:"",modelValue:a(r).isa_active,"onUpdate:modelValue":l[16]||(l[16]=o=>a(r).isa_active=o),"error-messages":a(r).errors.isa_active},null,8,["modelValue","error-messages"])]),_:1}),e(t,{cols:"12",sm:"6"},{default:s(()=>[e(i,{label:"OpenAI API Key",disabled:!a(r).isa_active,required:"",modelValue:a(r).openai_api_key,"onUpdate:modelValue":l[17]||(l[17]=o=>a(r).openai_api_key=o),"error-messages":a(r).errors.openai_api_key},null,8,["disabled","modelValue","error-messages"])]),_:1}),e(t,{cols:"12",class:"text-end"},{default:s(()=>[e(u,{type:"submit",color:"primary"},{default:s(()=>[...l[22]||(l[22]=[g("Erstellen",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:2},1024)]),_:1})]),"item.actions":s(({item:n})=>[m("div",M,[e(z,null,{activator:s(({props:o})=>[e(u,v({color:"primary",variant:"text",icon:"mdi-currency-eur"},o),null,16)]),default:s(({isActive:o})=>[e(_,{title:"Kostenübersicht der Organisation "+n.name},{append:s(()=>[e(u,{icon:"",variant:"text",onClick:y(P=>o.value=!1,["stop"])},{default:s(()=>[e(f,null,{default:s(()=>[...l[23]||(l[23]=[g("mdi-close",-1)])]),_:1})]),_:1},8,["onClick"])]),default:s(()=>[e(A),e(b,null,{default:s(()=>[e(L,{stats:n.stats},null,8,["stats"])]),_:2},1024)]),_:2},1032,["title"])]),_:2},1024),e(a(F),{href:d.route("organization.show",{organization:n.id})},{default:s(()=>[e(u,{color:"primary",variant:"text",icon:"mdi-eye"})]),_:1},8,["href"])])]),_:1},8,["items"])]),_:1})]),_:1})]),_:1})]),_:1}))}});export{H as default};
