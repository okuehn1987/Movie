import{d as x,r,o as f,c as v,b as a,V as A,e as l,R as D,k as M,u as d,D as i,S as B,v as F,f as p,g as T,h as b,i as _,p as L,q as m,K as y,m as w,H as N}from"./app-D-F7VYJF.js";const U=x({__name:"AbsenceRequests",props:{absenceRequests:{}},setup(C){var c;const V=C,s=r(((c=V.absenceRequests)==null?void 0:c.find(n=>n.id==Number(route().params.openAbsence)))??null),o=r(!!s.value),R=r(!1),u=r(1);function q(n,e){var k;const t=(k=V.absenceRequests)==null?void 0:k.find(S=>S.id===e.item.id);t&&(s.value=t,o.value=!0)}function g(n){s.value&&N.patch(route("absence.update",{absence:s.value.id}),{accepted:n},{onSuccess:()=>{o.value=!1,R.value=!0}})}return(n,e)=>(f(),v(A,{title:"Abwesenheitsanträge"},{default:a(()=>[l(B,{hover:"","items-per-page":"5",page:u.value,"onUpdate:page":e[1]||(e[1]=t=>u.value=t),"no-data-text":"keine Abwesenheitsanträge vorhanden.","onClick:row":q,items:n.absenceRequests.map(t=>({id:t.id,user:t.user.first_name+" "+t.user.last_name,start:d(i).fromSQL(t.start).toFormat("dd.MM.yyyy"),end:d(i).fromSQL(t.end).toFormat("dd.MM.yyyy")})),headers:[{title:"Mitarbeiter",key:"user"},{title:"Von",key:"start"},{title:"Bis",key:"end"}]},{bottom:a(()=>[n.absenceRequests.length>5?(f(),v(D,{key:0,modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=t=>u.value=t),length:Math.ceil(n.absenceRequests.length/5)},null,8,["modelValue","length"])):M("",!0)]),_:1},8,["page","items"]),s.value?(f(),v(F,{key:0,modelValue:o.value,"onUpdate:modelValue":e[6]||(e[6]=t=>o.value=t),"max-width":"1000"},{default:a(()=>[l(A,{title:"Abwesenheit von "+s.value.user.first_name+" "+s.value.user.last_name},{append:a(()=>[l(p,{icon:"",variant:"text",onClick:e[2]||(e[2]=t=>o.value=!1)},{default:a(()=>[l(T,null,{default:a(()=>e[7]||(e[7]=[b("mdi-close")])),_:1})]),_:1})]),default:a(()=>[l(_,null,{default:a(()=>[l(L,null,{default:a(()=>[l(m,{cols:"12"},{default:a(()=>[l(y,{label:"Abwesenheitsgrund",modelValue:s.value.absence_type.name,"onUpdate:modelValue":e[3]||(e[3]=t=>s.value.absence_type.name=t),readonly:""},null,8,["modelValue"])]),_:1}),l(m,{cols:"12",md:"6"},{default:a(()=>[l(y,{label:"Von:","model-value":d(i).fromSQL(s.value.start).toFormat("dd.MM.yyyy"),readonly:""},null,8,["model-value"])]),_:1}),l(m,{cols:"12",md:"6"},{default:a(()=>[l(y,{label:"Bis:","model-value":d(i).fromSQL(s.value.end).toFormat("dd.MM.yyyy"),readonly:""},null,8,["model-value"])]),_:1})]),_:1})]),_:1}),l(m,{cols:"12",class:"d-flex justify-end ga-3"},{default:a(()=>[l(p,{color:"error",onClick:e[4]||(e[4]=w(t=>g(!1),["stop"]))},{default:a(()=>e[8]||(e[8]=[b("Ablehnen")])),_:1}),l(p,{color:"success",onClick:e[5]||(e[5]=w(t=>g(!0),["stop"]))},{default:a(()=>e[9]||(e[9]=[b("Akzeptieren")])),_:1})]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])):M("",!0)]),_:1}))}});export{U as _};
