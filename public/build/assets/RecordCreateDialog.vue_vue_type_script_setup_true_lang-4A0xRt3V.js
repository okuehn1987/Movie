import{d as y,D as v,r as w,a as c,o as f,K as E,b as e,f as r,x as R,g as _,E as F,m as O,N as U,O as i,P as D,i as a,a0 as x,l as u,s as m,t as B,p as V,V as I,J as S}from"./app-DJJEESTk.js";import{D as A}from"./types-BVvW7sCV.js";import{s as L}from"./utils-BnXOmM-H.js";const z=y({__name:"RecordCreateDialog",props:{users:{},ticket:{},record:{},mode:{}},setup(C){var g,b,k;const s=C,t=useForm({start:s.record?v.fromSQL(s.record.start).toISO():null,duration:L(((g=s.record)==null?void 0:g.duration)??0),description:((b=s.record)==null?void 0:b.description)??"",resources:((k=s.record)==null?void 0:k.resources)??""}),n=w(!1);function T(){s.record?t.patch(route("ticketRecord.update",{ticketRecord:s.record.id}),{onSuccess:()=>{t.reset(),n.value=!1}}):t.post(route("ticket.ticketRecord.store",{ticket:s.ticket.id}),{onSuccess:()=>{t.reset(),n.value=!1}})}return(p,o)=>(f(),c(E,{"max-width":"600px",modelValue:n.value,"onUpdate:modelValue":o[4]||(o[4]=d=>n.value=d)},{activator:e(({props:d})=>[p.mode==="create"?(f(),c(u,S({key:0,title:"Eintrag hinzufügen"},d,{variant:"text"}),{default:e(()=>[r(V,null,{default:e(()=>[...o[5]||(o[5]=[m("mdi-plus",-1)])]),_:1})]),_:1},16)):(f(),c(u,S({key:1,title:"Eintrag bearbeiten"},d,{variant:"text"}),{default:e(()=>[r(V,null,{default:e(()=>[...o[6]||(o[6]=[m("mdi-pencil",-1)])]),_:1})]),_:1},16))]),default:e(({isActive:d})=>[r(I,{title:p.mode==="create"?"Eintrag erstellen":"Eintrag bearbeiten"},{append:e(()=>[r(u,{icon:"",variant:"text",onClick:l=>d.value=!1},{default:e(()=>[r(V,null,{default:e(()=>[...o[7]||(o[7]=[m("mdi-close",-1)])]),_:1})]),_:1},8,["onClick"])]),default:e(()=>[r(R),r(_,null,{default:e(()=>[r(F,{onSubmit:O(T,["prevent"])},{default:e(()=>[r(U,null,{default:e(()=>[r(i,{cols:"12",md:"6"},{default:e(()=>[r(D,{label:"Start",type:"datetime-local","model-value":a(v).fromISO(a(t).start??"").toFormat(a(A)),"onUpdate:modelValue":o[0]||(o[0]=l=>{a(t).start=l}),"error-messages":a(t).errors.start,required:""},null,8,["model-value","error-messages"])]),_:1}),r(i,{cols:"12",md:"6"},{default:e(()=>[r(D,{label:"Dauer (in Stunden)",type:"time",modelValue:a(t).duration,"onUpdate:modelValue":o[1]||(o[1]=l=>a(t).duration=l),"error-messages":a(t).errors.duration,required:""},null,8,["modelValue","error-messages"])]),_:1}),r(i,{cols:"12"},{default:e(()=>[r(x,{label:"Beschreibung",modelValue:a(t).description,"onUpdate:modelValue":o[2]||(o[2]=l=>a(t).description=l),"error-messages":a(t).errors.description},null,8,["modelValue","error-messages"])]),_:1}),r(i,{cols:"12"},{default:e(()=>[r(x,{label:"Verwendete Ressourcen",rows:"1",modelValue:a(t).resources,"onUpdate:modelValue":o[3]||(o[3]=l=>a(t).resources=l),"error-messages":a(t).errors.resources},null,8,["modelValue","error-messages"])]),_:1}),r(i,{class:"text-end"},{default:e(()=>[r(u,{color:"primary",type:"submit",loading:a(t).processing,disabled:!a(t).isDirty},{default:e(()=>[m(B(p.mode==="create"?"Speichern":"Änderungen speichern"),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:2},1032,["title"])]),_:1},8,["modelValue"]))}});export{z as _};
