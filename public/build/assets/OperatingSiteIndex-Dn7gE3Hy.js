import{d as x,U as B,T as C,o as i,c as m,b as l,e as r,z as w,u as e,s as A,f,W as N,g as _,V as S,h as k,y as T,i as P,l as h,m as D,n as E,p as d,v as g,I as n,q as c,Y as F,k as p,J as H,H as I,O as L,X as O}from"./app-C5y59EjJ.js";import{_ as R}from"./ConfirmDelete.vue_vue_type_script_setup_true_lang-Dsa3dhBB.js";import{_ as $}from"./AdminLayout.vue_vue_type_script_setup_true_lang-BMVERIAP.js";import{b as M,f as j,c as J}from"./utils-DxUQek33.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const G=x({__name:"OperatingSiteIndex",props:{operatingSites:{},countries:{}},setup(v){const q=v,{currentPage:V,lastPage:b,data:y}=M(B(q),"operatingSites"),t=C({address_suffix:"",city:"",country:"",email:"",fax:"",federal_state:"",house_number:"",is_headquarter:!1,phone_number:"",street:"",zip:"",name:""});function U(){t.post(route("operatingSite.store"),{onSuccess:()=>t.reset()})}return(u,s)=>(i(),m($,{title:"Betriebsstätten"},{default:l(()=>[r(S,null,{default:l(()=>[r(w,{hover:"",headers:[{title:"#",key:"id"},{title:"Name",key:"name"},{title:"Anschrift",key:"streetAddress"},{title:"Stadt",key:"cityAddress"},{title:"Land",key:"country"},{title:"Email",key:"email"},{title:"Telefonnummer",key:"phone_number"},{title:"",key:"action",align:"end",width:0}],items:e(y).map(o=>{const a=o.street&&o.house_number?o.street+" "+o.house_number:"/",z=o.zip&&o.city?o.zip+" "+o.city:"/";return{...e(j)(o),streetAddress:a,cityAddress:z}})},{"header.action":l(()=>[u.can("operatingSite","create")?(i(),m(A,{key:0,"max-width":"1000"},{activator:l(({props:o})=>[r(f,N(o,{color:"primary"}),{default:l(()=>[r(_,{icon:"mdi-plus"})]),_:2},1040)]),default:l(({isActive:o})=>[r(S,{title:"Betriebsstätte erstellen"},{append:l(()=>[r(f,{icon:"",variant:"text",onClick:a=>o.value=!1},{default:l(()=>[r(_,null,{default:l(()=>s[12]||(s[12]=[k("mdi-close")])),_:1})]),_:2},1032,["onClick"])]),default:l(()=>[r(T),r(P,null,{default:l(()=>[r(h,{onSubmit:D(U,["prevent"])},{default:l(()=>[r(E,null,{default:l(()=>[r(d,{cols:"12"},{default:l(()=>s[13]||(s[13]=[g("h3",null,"Kontaktinformationen",-1)])),_:1}),r(d,{cols:"12",md:"6"},{default:l(()=>[r(n,{label:"Name",required:"","error-messages":e(t).errors.street,modelValue:e(t).name,"onUpdate:modelValue":s[0]||(s[0]=a=>e(t).name=a)},null,8,["error-messages","modelValue"])]),_:1}),r(d,{cols:"12",md:"6"},{default:l(()=>[r(n,{label:"E-Mail ",required:"","error-messages":e(t).errors.email,modelValue:e(t).email,"onUpdate:modelValue":s[1]||(s[1]=a=>e(t).email=a)},null,8,["error-messages","modelValue"])]),_:1}),r(d,{cols:"12",md:"6"},{default:l(()=>[r(n,{label:"Telefonnummer",required:"","error-messages":e(t).errors.phone_number,modelValue:e(t).phone_number,"onUpdate:modelValue":s[2]||(s[2]=a=>e(t).phone_number=a)},null,8,["error-messages","modelValue"])]),_:1}),r(d,{cols:"12"},{default:l(()=>s[14]||(s[14]=[g("h3",null,"Adresse",-1)])),_:1}),r(d,{cols:"12",md:"6"},{default:l(()=>[r(c,{label:"Land",required:"",items:u.countries.map(a=>({title:a.title,value:a.value})),"error-messages":e(t).errors.country,modelValue:e(t).country,"onUpdate:modelValue":s[3]||(s[3]=a=>e(t).country=a)},null,8,["items","error-messages","modelValue"])]),_:1}),r(d,{cols:"12",md:"6"},{default:l(()=>[r(c,{label:"Bundesland",items:e(J)(e(t).country,u.countries),disabled:!e(t).country,required:"","error-messages":e(t).errors.federal_state,modelValue:e(t).federal_state,"onUpdate:modelValue":s[4]||(s[4]=a=>e(t).federal_state=a)},null,8,["items","disabled","error-messages","modelValue"])]),_:1}),r(d,{cols:"12",md:"6"},{default:l(()=>[r(n,{label:"PLZ",required:"","error-messages":e(t).errors.zip,modelValue:e(t).zip,"onUpdate:modelValue":s[5]||(s[5]=a=>e(t).zip=a)},null,8,["error-messages","modelValue"])]),_:1}),r(d,{cols:"12",md:"6"},{default:l(()=>[r(n,{label:"Ort",required:"","error-messages":e(t).errors.city,modelValue:e(t).city,"onUpdate:modelValue":s[6]||(s[6]=a=>e(t).city=a)},null,8,["error-messages","modelValue"])]),_:1}),r(d,{cols:"12",md:"6"},{default:l(()=>[r(n,{label:"Straße",required:"","error-messages":e(t).errors.street,modelValue:e(t).street,"onUpdate:modelValue":s[7]||(s[7]=a=>e(t).street=a)},null,8,["error-messages","modelValue"])]),_:1}),r(d,{cols:"12",md:"6"},{default:l(()=>[r(n,{label:"Hausnummer",required:"","error-messages":e(t).errors.house_number,modelValue:e(t).house_number,"onUpdate:modelValue":s[8]||(s[8]=a=>e(t).house_number=a)},null,8,["error-messages","modelValue"])]),_:1}),r(d,{cols:"12",md:"6"},{default:l(()=>[r(n,{label:"Addresszusatz","error-messages":e(t).errors.address_suffix,modelValue:e(t).address_suffix,"onUpdate:modelValue":s[9]||(s[9]=a=>e(t).address_suffix=a)},null,8,["error-messages","modelValue"])]),_:1}),r(d,{cols:"12",md:"6"},{default:l(()=>[r(F,{modelValue:e(t).is_headquarter,"onUpdate:modelValue":s[10]||(s[10]=a=>e(t).is_headquarter=a),label:"Hauptsitz?"},null,8,["modelValue"])]),_:1}),r(d,{cols:"12",class:"text-end"},{default:l(()=>[r(f,{loading:e(t).processing,type:"submit",color:"primary"},{default:l(()=>s[15]||(s[15]=[k("Erstellen")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:2},1024)]),_:1})):p("",!0)]),"item.action":l(({item:o})=>[g("div",{class:I(["d-flex",{"justify-end":!e(y).some(a=>a.users_count==0&&u.can("operatingSite","delete",a))}])},[u.can("operatingSite","viewShow",o)?(i(),m(e(H),{key:0,href:u.route("operatingSite.show",{operatingSite:o.id})},{default:l(()=>[r(f,{color:"primary",size:"large",variant:"text",icon:"mdi-eye"})]),_:2},1032,["href"])):p("",!0),o.users_count==0&&u.can("operatingSite","delete",o)?(i(),m(R,{key:1,content:"Bist du dir sicher, dass du die Betriebsstätte "+o.name+" entfernen möchtest?",route:u.route("operatingSite.destroy",{operatingSite:o.id}),title:"Betriebsstätte löschen"},null,8,["content","route"])):p("",!0)],2)]),bottom:l(()=>[e(b)>1?(i(),m(L,{key:0,modelValue:e(V),"onUpdate:modelValue":s[11]||(s[11]=o=>O(V)?V.value=o:null),length:e(b)},null,8,["modelValue","length"])):p("",!0)]),_:1},8,["items"])]),_:1})]),_:1}))}});export{G as default};
