import{d as h,a as d,o as p,Q as K,b as t,f as o,V as W,x as O,h as E,J as G,m,g as r,K as J,L as k,O as L,a0 as Q,a1 as X,l as V,s as w,p as g,i as c,a5 as Y,a6 as Z,u as U,j as R,a7 as q,A as v,a8 as B,a9 as $,P as H,aa as _,F as ee,R as oe,r as S,ab as te,ac as ae,w as re,ad as ne,c as se,U as ie,W as le,ae as ue,e as b,af as pe,t as A,n as C,X as D,ag as de,Y as x,ah as N,ai as me,aj as ce,S as P}from"./app-BzSCF_3H.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{s as T}from"./utils-xvx386M2.js";const ge=h({__name:"ReportBugDialog",setup(y){const e=useForm({location:null,summary:null,description:null,attachments:[]});return(n,a)=>(p(),d(K,{"max-width":"1000"},{activator:t(({props:i})=>[c("div",Y(Z(i)),[o(g,{icon:"mdi-bug",color:"primary",class:"me-2"}),a[4]||(a[4]=w(" Fehler melden ",-1))],16)]),default:t(({isActive:i})=>[o(W,{title:"Fehler melden"},{append:t(()=>[o(V,{icon:"",variant:"text",onClick:l=>{i.value=!1,r(e).reset()}},{default:t(()=>[o(g,null,{default:t(()=>[...a[5]||(a[5]=[w("mdi-close",-1)])]),_:1})]),_:1},8,["onClick"])]),default:t(()=>[o(O),o(E,null,{default:t(()=>[o(G,{onSubmit:m(l=>{r(e).post(n.route("reportBug.store"),{onSuccess:()=>{i.value=!1,r(e).reset()}})},["prevent"])},{default:t(()=>[o(J,null,{default:t(()=>[o(k,{cols:"12"},{default:t(()=>[o(L,{modelValue:r(e).location,"onUpdate:modelValue":a[0]||(a[0]=l=>r(e).location=l),errorMessages:r(e).errors.location,label:"Wo ist der Fehler aufgetreten?"},null,8,["modelValue","errorMessages"])]),_:1}),o(k,{cols:"12"},{default:t(()=>[o(L,{modelValue:r(e).summary,"onUpdate:modelValue":a[1]||(a[1]=l=>r(e).summary=l),errorMessages:r(e).errors.summary,label:"Fasse den Fehler zusammen"},null,8,["modelValue","errorMessages"])]),_:1}),o(k,{cols:"12"},{default:t(()=>[o(Q,{"max-rows":"16","auto-grow":"",modelValue:r(e).description,"onUpdate:modelValue":a[2]||(a[2]=l=>r(e).description=l),errorMessages:r(e).errors.description,label:"Zus채tzliche Informationen zum Fehler"},null,8,["modelValue","errorMessages"])]),_:1}),o(k,{cols:"12"},{default:t(()=>[o(X,{modelValue:r(e).attachments,"onUpdate:modelValue":a[3]||(a[3]=l=>r(e).attachments=l),errorMessages:Object.entries(r(e).errors).filter(([l,M])=>l.includes("attachments")&&M).map(([l])=>"Alle Dateien m체ssen ein Bild sein."),label:"Anhang",multiple:"",accept:"image/*"},null,8,["modelValue","errorMessages"])]),_:1}),o(k,{cols:"12",class:"text-end"},{default:t(()=>[o(V,{type:"submit",color:"primary"},{default:t(()=>[...a[6]||(a[6]=[w("Absenden",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:2},1024)]),_:2},1024)]),_:1}))}}),ve=h({__name:"AppbarActions",setup(y){const e=U();return(n,a)=>(p(),R(ee,null,[o(V,{color:"primary",stacked:"",onClick:a[0]||(a[0]=m(i=>r(v).get(n.route("notification.index")),["stop"]))},{default:t(()=>[n.$page.props.unreadNotifications.length>0?(p(),d(q,{key:0,content:n.$page.props.unreadNotifications.length<=99?n.$page.props.unreadNotifications.length:"99+",color:"error"},{default:t(()=>[o(g,{icon:"mdi-bell"})]),_:1},8,["content"])):(p(),d(g,{key:1,icon:"mdi-bell"}))]),_:1}),o(_,{location:r(e).smAndDown.value?"bottom left":"bottom"},{activator:t(({props:i})=>[o(V,H({stacked:"",color:"primary","prepend-icon":"mdi-account-details"},i),null,16)]),default:t(()=>[o(B,{"min-width":"200px"},{default:t(()=>[o($,{onClick:a[1]||(a[1]=m(i=>r(v).get(n.route("user.profile",{user:n.$page.props.auth.user.id})),["stop"]))},{default:t(()=>[o(g,{icon:"mdi-account",color:"primary",class:"me-2"}),a[3]||(a[3]=w(" Profil ",-1))]),_:1}),o($,{onClick:m(()=>{},["stop"])},{default:t(()=>[o(ge)]),_:1}),o($,{onClick:a[2]||(a[2]=m(i=>r(v).post(n.route("logout")),["stop"]))},{default:t(()=>[o(g,{icon:"mdi-logout",color:"primary",class:"me-2"}),a[4]||(a[4]=w(" Abmelden ",-1))]),_:1})]),_:1})]),_:1},8,["location"])],64))}}),fe=F(ve,[["__scopeId","data-v-d912afcd"]]),we=h({__name:"DrawerMenu",setup(y){return(e,n)=>(p(),d(B,{nav:"","onClick:select":n[0]||(n[0]=a=>r(v).get(a.id)),items:[{props:{active:e.route().current("dashboard"),prependIcon:"mdi-view-dashboard"},value:e.route("dashboard"),title:"Dashboard"},...e.$page.props.currentAppModule=="tide"?[e.can("workLog","viewIndex")&&{props:{active:e.route().current("workLog.index"),prependIcon:"mdi-clock-outline"},value:e.route("workLog.index"),title:"Arbeitszeiten"}]:[],...e.$page.props.currentAppModule=="flow"?[e.can("customer","viewIndex")&&{props:{active:e.route().current("customer.index"),prependIcon:"mdi-folder-account-outline"},value:e.route("customer.index"),title:"Kundenliste"},{props:{active:e.route().current("ticket.index"),prependIcon:"mdi-ticket-account"},value:e.route("ticket.index"),title:"Tickets"}]:[],e.can("dispute","viewIndex")&&{props:{active:e.route().current("dispute.index"),prependIcon:"mdi-bookmark-outline"},value:e.route("dispute.index"),title:"Antr채ge"},e.can("absence","viewIndex")&&{props:{active:e.route().current("absence.index"),prependIcon:"mdi-timer-cancel-outline"},value:e.route("absence.index"),title:"Abwesenheiten"},e.can("organization","viewShow")&&{title:"Organisation",value:e.route("organization.show",{organization:e.$page.props.organization.id}),props:{prependIcon:"mdi-domain",active:e.route().current("organization.show")}},e.can("operatingSite","viewIndex")&&{props:{active:e.route().current("operatingSite.index"),prependIcon:"mdi-map-marker"},value:e.route("operatingSite.index"),title:"Betriebsst채tten"},e.can("group","viewIndex")&&{props:{active:e.route().current("group.index"),prependIcon:"mdi-dots-circle"},value:e.route("group.index"),title:"Abteilungen"},e.can("user","viewIndex")&&{props:{active:e.route().current("user.index"),prependIcon:"mdi-account-group"},value:e.route("user.index"),title:"Mitarbeitende"},e.can("user","viewIndex")&&{props:{prependIcon:"mdi-tree",active:e.route().current("organization.tree")},value:e.route("organization.tree",{organization:e.$page.props.organization.id}),title:"Organigramm"},...e.can("organization","viewIndex")?[{type:"divider"},{type:"subheader",title:"Super-Admin"},{props:{prependIcon:"mdi-security",active:e.route().current("organization.index")},value:e.route("organization.index"),title:"Organisationen"}]:[]].filter(Boolean)},null,8,["items"]))}}),be=F(we,[["__scopeId","data-v-a7f0e367"]]),ke={key:0,class:"posiion-relative",style:{width:"56px"}},Ve={class:"d-flex align-center"},ye={class:"text-center text-h5 font-weight-medium"},Ie={style:{"user-select":"none"}},Ae={class:"d-flex align-center mr-auto ga-2"},$e={class:"text-h6 ps-0 mx-md-5 px-2 mb-0",style:{"text-overflow":"ellipsis",overflow:"hidden","white-space":"nowrap","max-width":"calc(100vw - 72px - 72px - 52px)"}},he=h({__name:"AdminLayout",props:{title:{},backurl:{},noInlinePadding:{type:Boolean}},setup(y){const e=y,n=oe(),a=U().smAndDown,i=S(!a.value),{start:l,stop:M}=te(1e3*60*2,{only:["unreadNotifications"]},{keepAlive:!0});ae(()=>{l()}),v.on("before",()=>{M()}),v.on("finish",()=>{l()});const z=S(!!n.props.organization.logo);re(()=>n.props.organization.logo,()=>{z.value=!1,ne(()=>z.value=!0)});function j(s){v.post(route("switchAppModule",{module:s}),{preserveState:!0,preserveScroll:!0,replace:!0})}const I=se(()=>n.props.appModules.find(s=>s.value===n.props.currentAppModule));return(s,u)=>(p(),d(ie,null,{default:t(()=>[o(r(le),{title:s.title},null,8,["title"]),o(ue,{color:"background",style:{border:"none"},modelValue:i.value,"onUpdate:modelValue":u[2]||(u[2]=f=>i.value=f),image:"/img/loggedin-background.png"},{default:t(()=>[I.value?(p(),d(B,{key:0},{default:t(()=>[o($,{onClick:u[1]||(u[1]=m(f=>j(s.$page.props.currentAppModule=="tide"?"flow":"tide"),["stop"])),class:"pe-2"},{prepend:t(()=>[r(n).props.appModules.length==2?(p(),R("div",ke,[c("img",{src:"/img/Tide-Logo.webp",id:"tide-logo",class:C({ActiveLogo:I.value.value=="tide"})},null,2),o(g,{icon:"mdi-undo",style:{top:"0",position:"absolute",rotate:"-20deg",scale:"0.8"}}),c("img",{src:"/img/Flow-Logo.webp",id:"flow-logo",class:C({ActiveLogo:I.value.value=="flow"})},null,2),o(g,{icon:"mdi-undo",style:{top:"25px",left:"40px",position:"absolute",rotate:"140deg",scale:"0.8"}})])):(p(),d(D,{key:1,width:"24px",class:"me-8",src:"/img/logo-symbol.png"}))]),append:t(()=>[o(V,{onClick:u[0]||(u[0]=m(f=>i.value=!1,["stop"])),icon:"mdi-close",variant:"text"})]),default:t(()=>[o(pe,null,{default:t(()=>[c("div",Ve,[c("h1",ye,[c("span",Ie,A(I.value.title),1)])])]),_:1})]),_:1})]),_:1})):b("",!0),o(O),o(be)]),_:1},8,["modelValue"]),o(de,{elevation:"0",color:"background"},{default:t(()=>[!i.value||r(a)?(p(),d(N,{key:0,variant:"text",onClick:u[3]||(u[3]=m(f=>i.value=!i.value,["stop"]))})):b("",!0),s.backurl?(p(),d(N,{key:1,variant:"text",icon:"mdi-arrow-left",onClick:u[4]||(u[4]=m(f=>r(v).visit(s.backurl,{preserveState:!0}),["stop"]))})):b("",!0),c("div",Ae,[c("span",$e,A(s.title),1),z.value?(p(),d(D,{key:0,src:s.route("organization.getLogo",{organization:s.$page.props.organization.id,key:s.$page.props.organization.logo}),"max-height":"48px","max-width":"48px",width:"100%",height:"100%",class:"rounded"},null,8,["src"])):b("",!0)]),x(s.$slots,"appbarActions",{},void 0,!0),o(fe)]),_:3}),o(me,null,{default:t(()=>[o(ce,{class:C(["pt-0",e.noInlinePadding?"px-0":""]),fluid:""},{default:t(()=>[s.$page.props.flash.error?(p(),d(P,{type:"error",closable:"",class:"mb-6",key:Math.random(),"onClick:close":u[5]||(u[5]=f=>T.value=!1)},{default:t(()=>[w(A(s.$page.props.flash.error),1)]),_:1})):b("",!0),s.$page.props.flash.success?(p(),d(P,{type:"success",closable:"",class:"mb-6",key:Math.random(),"onClick:close":u[6]||(u[6]=f=>T.value=!1)},{default:t(()=>[w(A(s.$page.props.flash.success),1)]),_:1})):b("",!0),x(s.$slots,"default",{},void 0,!0)]),_:3},8,["class"])]),_:3})]),_:3}))}}),Be=F(he,[["__scopeId","data-v-1d35acdd"]]);export{Be as A};
