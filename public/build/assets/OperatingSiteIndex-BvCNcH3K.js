import{d as z,ao as B,a as i,o as m,b as a,f as s,V as _,y as C,i as e,e as f,a3 as A,k as w,h as g,n as N,T as P,l as p,Q as T,x as F,g as L,J as h,m as D,K as E,L as d,O as u,M as S,am as M,s as k,p as c,P as O}from"./app-DHH_BMJQ.js";import{_ as R}from"./ConfirmDelete.vue_vue_type_script_setup_true_lang-CM3HJ3hq.js";import{A as j}from"./AdminLayout-CbCV0XxB.js";import{e as H,i as I,j as K}from"./utils-ClPNe2wo.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const W=z({__name:"OperatingSiteIndex",props:{operatingSites:{},countries:{}},setup(x){const v=x,{currentPage:V,lastPage:b,data:y}=H(B(v),"operatingSites"),r=useForm({address_suffix:"",city:"",country:"",email:"",fax:"",federal_state:"",house_number:"",is_headquarter:!1,phone_number:"",street:"",zip:"",name:""});function U(){r.post(route("operatingSite.store"),{onSuccess:()=>r.reset()})}return(n,t)=>(m(),i(j,{title:"Betriebsstätten"},{default:a(()=>[s(_,null,{default:a(()=>[s(C,{hover:"",headers:[{title:"Name",key:"name"},{title:"Anschrift",key:"streetAddress"},{title:"Stadt",key:"cityAddress"},{title:"Land",key:"country"},{title:"Email",key:"email"},{title:"Telefonnummer",key:"phone_number"},{title:"",key:"action",align:"end",width:0}],items:e(y).map(o=>{const l=o.current_address.street&&o.current_address.house_number?o.current_address.street+" "+o.current_address.house_number:"/",q=o.current_address.zip&&o.current_address.city?o.current_address.zip+" "+o.current_address.city:"/";return{...e(I)(o),streetAddress:l,cityAddress:q}})},{"header.action":a(()=>[n.can("operatingSite","create")?(m(),i(T,{key:0,"max-width":"1000"},{activator:a(({props:o})=>[s(p,O(o,{color:"primary"}),{default:a(()=>[s(c,{icon:"mdi-plus"})]),_:1},16)]),default:a(({isActive:o})=>[s(_,{title:"Betriebsstätte erstellen"},{append:a(()=>[s(p,{icon:"",variant:"text",onClick:l=>{o.value=!1,e(r).reset()}},{default:a(()=>[s(c,null,{default:a(()=>[...t[13]||(t[13]=[k("mdi-close",-1)])]),_:1})]),_:1},8,["onClick"])]),default:a(()=>[s(F),s(L,null,{default:a(()=>[s(h,{onSubmit:D(U,["prevent"])},{default:a(()=>[s(E,null,{default:a(()=>[s(d,{cols:"12"},{default:a(()=>[...t[14]||(t[14]=[g("h3",null,"Kontaktinformationen",-1)])]),_:1}),s(d,{cols:"12",md:"6"},{default:a(()=>[s(u,{label:"Name",required:"","error-messages":e(r).errors.name,modelValue:e(r).name,"onUpdate:modelValue":t[0]||(t[0]=l=>e(r).name=l)},null,8,["error-messages","modelValue"])]),_:1}),s(d,{cols:"12",md:"6"},{default:a(()=>[s(u,{label:"E-Mail ",required:"","error-messages":e(r).errors.email,modelValue:e(r).email,"onUpdate:modelValue":t[1]||(t[1]=l=>e(r).email=l)},null,8,["error-messages","modelValue"])]),_:1}),s(d,{cols:"12",md:"6"},{default:a(()=>[s(u,{label:"Telefonnummer",required:"","error-messages":e(r).errors.phone_number,modelValue:e(r).phone_number,"onUpdate:modelValue":t[2]||(t[2]=l=>e(r).phone_number=l)},null,8,["error-messages","modelValue"])]),_:1}),s(d,{cols:"12",md:"6"},{default:a(()=>[s(u,{label:"Fax (optional)",modelValue:e(r).fax,"onUpdate:modelValue":t[3]||(t[3]=l=>e(r).fax=l),"error-messages":e(r).errors.fax},null,8,["modelValue","error-messages"])]),_:1}),s(d,{cols:"12"},{default:a(()=>[...t[15]||(t[15]=[g("h3",null,"Adresse",-1)])]),_:1}),s(d,{cols:"12",md:"6"},{default:a(()=>[s(S,{"data-testid":"land",label:"Land",required:"",items:n.countries.map(l=>({title:l.title,value:l.value})),"error-messages":e(r).errors.country,modelValue:e(r).country,"onUpdate:modelValue":t[4]||(t[4]=l=>e(r).country=l)},null,8,["items","error-messages","modelValue"])]),_:1}),s(d,{cols:"12",md:"6"},{default:a(()=>[s(S,{"data-testid":"bundesland",label:"Bundesland",items:e(K)(e(r).country,n.countries),disabled:!e(r).country,required:"","error-messages":e(r).errors.federal_state,modelValue:e(r).federal_state,"onUpdate:modelValue":t[5]||(t[5]=l=>e(r).federal_state=l)},null,8,["items","disabled","error-messages","modelValue"])]),_:1}),s(d,{cols:"12",md:"6"},{default:a(()=>[s(u,{label:"PLZ",required:"","error-messages":e(r).errors.zip,modelValue:e(r).zip,"onUpdate:modelValue":t[6]||(t[6]=l=>e(r).zip=l)},null,8,["error-messages","modelValue"])]),_:1}),s(d,{cols:"12",md:"6"},{default:a(()=>[s(u,{label:"Ort",required:"","error-messages":e(r).errors.city,modelValue:e(r).city,"onUpdate:modelValue":t[7]||(t[7]=l=>e(r).city=l)},null,8,["error-messages","modelValue"])]),_:1}),s(d,{cols:"12",md:"6"},{default:a(()=>[s(u,{label:"Straße",required:"","error-messages":e(r).errors.street,modelValue:e(r).street,"onUpdate:modelValue":t[8]||(t[8]=l=>e(r).street=l)},null,8,["error-messages","modelValue"])]),_:1}),s(d,{cols:"12",md:"6"},{default:a(()=>[s(u,{label:"Hausnummer",required:"","error-messages":e(r).errors.house_number,modelValue:e(r).house_number,"onUpdate:modelValue":t[9]||(t[9]=l=>e(r).house_number=l)},null,8,["error-messages","modelValue"])]),_:1}),s(d,{cols:"12",md:"6"},{default:a(()=>[s(u,{label:"Addresszusatz (optional)","error-messages":e(r).errors.address_suffix,modelValue:e(r).address_suffix,"onUpdate:modelValue":t[10]||(t[10]=l=>e(r).address_suffix=l)},null,8,["error-messages","modelValue"])]),_:1}),s(d,{cols:"12",md:"6"},{default:a(()=>[s(M,{modelValue:e(r).is_headquarter,"onUpdate:modelValue":t[11]||(t[11]=l=>e(r).is_headquarter=l),label:"Hauptsitz?"},null,8,["modelValue"])]),_:1}),s(d,{cols:"12",class:"text-end"},{default:a(()=>[s(p,{loading:e(r).processing,type:"submit",color:"primary"},{default:a(()=>[...t[16]||(t[16]=[k("Erstellen",-1)])]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:2},1024)]),_:1})):f("",!0)]),"item.action":a(({item:o})=>[g("div",{class:N(["d-flex",{"justify-end":!e(y).some(l=>l.users_count==0&&n.can("operatingSite","delete",l))}])},[n.can("operatingSite","viewShow",o)?(m(),i(e(P),{key:0,href:n.route("operatingSite.show",{operatingSite:o.id})},{default:a(()=>[s(p,{color:"primary",size:"large",variant:"text",icon:"mdi-eye"})]),_:1},8,["href"])):f("",!0),o.users_count==0&&n.can("operatingSite","delete",o)?(m(),i(R,{key:1,content:"Bist du dir sicher, dass du die Betriebsstätte "+o.name+" entfernen möchtest?",route:n.route("operatingSite.destroy",{operatingSite:o.id}),title:"Betriebsstätte löschen"},null,8,["content","route"])):f("",!0)],2)]),bottom:a(()=>[e(b)>1?(m(),i(A,{key:0,modelValue:e(V),"onUpdate:modelValue":t[12]||(t[12]=o=>w(V)?V.value=o:null),length:e(b)},null,8,["modelValue","length"])):f("",!0)]),_:1},8,["items"])]),_:1})]),_:1}))}});export{W as default};
