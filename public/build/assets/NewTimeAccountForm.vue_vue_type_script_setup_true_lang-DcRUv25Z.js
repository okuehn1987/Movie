import{d as w,o as y,a as k,b as o,u as e,B as v,f as t,j as p,Y as T,h as u,i as g,k as f,V as C,E as S,H as x,I as i,K as m,J as N,v as A}from"./app-BCEOGN35.js";import{h as F,e as $,r as h}from"./utils-Dcjx9gHN.js";const z=w({__name:"NewTimeAccountForm",props:{user:{},time_account_settings:{}},setup(V){var c,_;const d=V,l=useForm({balance_limit:(((c=d.user.current_working_hours)==null?void 0:c.weekly_working_hours)??40)*2,balance:0,time_account_setting_id:((_=d.time_account_settings.filter(r=>r.type!=null)[0])==null?void 0:_.id)??null,name:""});return(r,s)=>(y(),k(v,{onAfterLeave:s[4]||(s[4]=n=>e(l).reset()),"max-width":"1000"},{activator:o(({props:n})=>[t(u,T(n,{color:"primary"}),{default:o(()=>[t(p,{icon:"mdi-plus"})]),_:2},1040)]),default:o(({isActive:n})=>[t(A,{title:"Neues Arbeitszeitkonto erstellen"},{append:o(()=>[t(u,{icon:"",variant:"text",onClick:g(a=>n.value=!1,["stop"])},{default:o(()=>[t(p,null,{default:o(()=>s[5]||(s[5]=[f("mdi-close")])),_:1})]),_:2},1032,["onClick"])]),default:o(()=>[t(C,null,{default:o(()=>[t(S,{onSubmit:g(a=>{e(l).post(r.route("user.timeAccount.store",{user:r.user.id}),{onSuccess:()=>{n.value=!1,e(l).reset()}})},["prevent"])},{default:o(()=>[t(x,null,{default:o(()=>[t(i,{cols:"12",md:"6"},{default:o(()=>[t(m,{label:"Name",modelValue:e(l).name,"onUpdate:modelValue":s[0]||(s[0]=a=>e(l).name=a),"error-messages":e(l).errors.name},null,8,["modelValue","error-messages"])]),_:1}),t(i,{cols:"12",md:"6"},{default:o(()=>[t(N,{items:r.time_account_settings.filter(a=>a.type!=null).map(a=>({title:`${e(F)(a.type)} (${e($)(a.truncation_cycle_length_in_months)})`,value:a.id})),label:"Typ",modelValue:e(l).time_account_setting_id,"onUpdate:modelValue":s[1]||(s[1]=a=>e(l).time_account_setting_id=a),"error-messages":e(l).errors.time_account_setting_id},null,8,["items","modelValue","error-messages"])]),_:1}),t(i,{cols:"12",md:"6"},{default:o(()=>{var a;return[t(m,{label:"Limit in Stunden",hint:"entspricht "+e(h)(e(l).balance_limit/(((a=r.user.current_working_hours)==null?void 0:a.weekly_working_hours)??40),2)+"x wÃ¶chentliche Arbeitszeit",modelValue:e(l).balance_limit,"onUpdate:modelValue":s[2]||(s[2]=b=>e(l).balance_limit=b),"error-messages":e(l).errors.balance_limit},null,8,["hint","modelValue","error-messages"])]}),_:1}),t(i,{cols:"12",md:"6"},{default:o(()=>[t(m,{label:"Startbetrag in Stunden",modelValue:e(l).balance,"onUpdate:modelValue":s[3]||(s[3]=a=>e(l).balance=a),"error-messages":e(l).errors.balance},null,8,["modelValue","error-messages"])]),_:1}),t(i,{cols:"12",class:"text-end"},{default:o(()=>[t(u,{type:"submit",color:"primary",loading:e(l).processing},{default:o(()=>s[6]||(s[6]=[f("Speichern")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:2},1032,["onSubmit"])]),_:2},1024)]),_:2},1024)]),_:1}))}});export{z as _};
