import{_ as p}from"./ConfirmDelete.vue_vue_type_script_setup_true_lang-QM1dct5i.js";import{_ as c}from"./AdminLayout.vue_vue_type_script_setup_true_lang-h16cUhxn.js";import{u as _,f as y,e as h}from"./utils-DhjBVoLn.js";import{d as g,o as r,c as i,a as s,b as a,A as k,B as l,u as o,D as V,v,e as u,T as b,f as M,V as m,h as w,m as C,p as B,j as d,x as S,P as x,C as H}from"./app-DGkPKo_g.js";import N from"./UserForm-C8yNkt4H.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./PermissionSelector.vue_vue_type_script_setup_true_lang-BNjOXvpI.js";const T={class:"d-flex justify-end"},D={key:2,style:{width:"48px"}},G=g({__name:"UserIndex",props:{users:{},supervisors:{},groups:{},operating_sites:{},permissions:{},countries:{}},setup(P){const f=_(0);return(t,E)=>(r(),i(c,{title:"Mitarbeiter"},{default:s(()=>[a(m,null,{default:s(()=>[a(k,{"fixed-header":"",style:l({maxHeight:o(f)}),"no-data-text":"Es wurden keine Mitarbeiter gefunden",headers:[{title:"Vorname",key:"first_name"},{title:"Nachname",key:"last_name"},{title:"Email",key:"email"},{title:"Abteilung",key:"group.name"},{title:"Personalnummer",key:"staff_number"},{title:"Geburtsdatum",key:"date_of_birth"},{title:"",key:"actions",align:"end"}],items:t.users.map(e=>({...o(y)(e),date_of_birth:o(V).fromFormat(e.date_of_birth,"yyyy-MM-dd").toFormat("dd.MM.yyyy")})).toSorted((e,n)=>(e.first_name+e.last_name).localeCompare(n.first_name+n.last_name)),hover:""},{"header.actions":s(()=>[t.can("user","create")?(r(),i(v,{key:0,"max-width":"1200"},{activator:s(({props:e})=>[a(u,b(e,{color:"primary"}),{default:s(()=>[a(M,{icon:"mdi-plus"})]),_:2},1040)]),default:s(({isActive:e})=>[a(m,{style:l([{overflow:"auto"},{maxHeight:o(h)(48)}])},{default:s(()=>[a(w,null,{default:s(()=>[a(C,null,{default:s(()=>[a(B,{cols:"12"},{default:s(()=>[a(N,{countries:t.countries,supervisors:t.supervisors,groups:t.groups,operating_sites:t.operating_sites,permissions:t.permissions,mode:"create",onSuccess:n=>e.value=!1},null,8,["countries","supervisors","groups","operating_sites","permissions","onSuccess"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["style"])]),_:1})):d("",!0)]),"item.actions":s(({item:e})=>[S("div",T,[t.can("user","viewShow",e)?(r(),i(o(x),{key:0,href:t.route("user.generalInformation",{user:e.id})},{default:s(()=>[a(u,{color:"primary",variant:"text",icon:"mdi-eye"})]),_:2},1032,["href"])):d("",!0),t.can("user","delete",e)?(r(),i(p,{key:1,content:"Bist du dir sicher, dass du "+e.first_name+" "+e.last_name+" entfernen möchtest?",route:t.route("user.destroy",{user:e.id}),title:"Mitarbeiter löschen"},null,8,["content","route"])):(r(),H("div",D))])]),_:1},8,["style","items"])]),_:1})]),_:1}))}});export{G as default};
