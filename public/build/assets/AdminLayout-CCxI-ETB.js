import{d as S,a as m,b as u,S as J,e as o,g as t,V as Q,y as H,i as X,K as _,p as c,h as n,L as ee,M as I,P as N,a3 as te,a4 as oe,m as g,t as v,q as b,j as d,a8 as ae,a9 as re,u as K,T as W,r as $,aa as ne,k as z,ab as se,B as k,ac as T,ad as M,R as ie,ae as le,F as ue,w as U,af as pe,c as de,D as ce,Y as me,Z as ge,ag as ve,f as w,ah as fe,v as C,n as L,_ as P,ai as he,$ as O,aj as E,ak as be,al as ke,s as we,U as R,am as j,an as q,ao as ye,ap as Ie}from"./app-CXlxVko1.js";import Ce from"./ChatDetails-Irog859E.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{s as G}from"./utils-CTYq3X8p.js";const Ve=S({__name:"ReportBugDialog",setup(V){const e=useForm({location:null,summary:null,description:null,attachments:[]});return(p,s)=>(u(),m(J,{"max-width":"1000"},{activator:o(({props:l})=>[d("div",ae(re(l)),[t(b,{icon:"mdi-bug",color:"primary",class:"me-2"}),s[4]||(s[4]=v(" Fehler melden ",-1))],16)]),default:o(({isActive:l})=>[t(Q,{title:"Fehler melden"},{append:o(()=>[t(g,{icon:"",variant:"text",onClick:r=>{l.value=!1,n(e).reset()}},{default:o(()=>[t(b,null,{default:o(()=>[...s[5]||(s[5]=[v("mdi-close",-1)])]),_:1})]),_:1},8,["onClick"])]),default:o(()=>[t(H),t(X,null,{default:o(()=>[t(_,{onSubmit:c(r=>{n(e).post(p.route("reportBug.store"),{onSuccess:()=>{l.value=!1,n(e).reset()}})},["prevent"])},{default:o(()=>[t(ee,null,{default:o(()=>[t(I,{cols:"12"},{default:o(()=>[t(N,{modelValue:n(e).location,"onUpdate:modelValue":s[0]||(s[0]=r=>n(e).location=r),errorMessages:n(e).errors.location,label:"Wo ist der Fehler aufgetreten?"},null,8,["modelValue","errorMessages"])]),_:1}),t(I,{cols:"12"},{default:o(()=>[t(N,{modelValue:n(e).summary,"onUpdate:modelValue":s[1]||(s[1]=r=>n(e).summary=r),errorMessages:n(e).errors.summary,label:"Fasse den Fehler zusammen"},null,8,["modelValue","errorMessages"])]),_:1}),t(I,{cols:"12"},{default:o(()=>[t(te,{"max-rows":"16","auto-grow":"",modelValue:n(e).description,"onUpdate:modelValue":s[2]||(s[2]=r=>n(e).description=r),errorMessages:n(e).errors.description,label:"Zusätzliche Informationen zum Fehler"},null,8,["modelValue","errorMessages"])]),_:1}),t(I,{cols:"12"},{default:o(()=>[t(oe,{modelValue:n(e).attachments,"onUpdate:modelValue":s[3]||(s[3]=r=>n(e).attachments=r),errorMessages:Object.entries(n(e).errors).filter(([r,f])=>r.includes("attachments")&&f).map(([r])=>"Alle Dateien müssen ein Bild sein."),label:"Anhang",multiple:"",accept:"image/*"},null,8,["modelValue","errorMessages"])]),_:1}),t(I,{cols:"12",class:"text-end"},{default:o(()=>[t(g,{type:"submit",color:"primary"},{default:o(()=>[...s[6]||(s[6]=[v("Absenden",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:2},1024)]),_:2},1024)]),_:1}))}}),Ae=S({__name:"AppbarActions",setup(V){const e=K(),p=W(),s=$(p.props.unreadNotifications.length);return ne("notification."+p.props.auth.user.id,"NotificationCreated",l=>{s.value=l.unreadCount}),(l,r)=>(u(),z(ue,null,[t(g,{color:"primary",stacked:"",onClick:r[0]||(r[0]=c(f=>n(k).get(l.route("notification.index")),["stop"]))},{default:o(()=>[s.value>0?(u(),m(se,{key:0,content:s.value<=99?s.value:"99+",color:"error"},{default:o(()=>[t(b,{icon:"mdi-bell"})]),_:1},8,["content"])):(u(),m(b,{key:1,icon:"mdi-bell"}))]),_:1}),t(le,{location:n(e).smAndDown.value?"bottom left":"bottom"},{activator:o(({props:f})=>[t(g,ie({stacked:"",color:"primary","prepend-icon":"mdi-account-details"},f),null,16)]),default:o(()=>[t(T,{"min-width":"200px"},{default:o(()=>[t(M,{onClick:r[1]||(r[1]=c(f=>n(k).get(l.route("user.profile",{user:l.$page.props.auth.user.id})),["stop"]))},{default:o(()=>[t(b,{icon:"mdi-account",color:"primary",class:"me-2"}),r[3]||(r[3]=v(" Profil ",-1))]),_:1}),t(M,{onClick:c(()=>{},["stop"])},{default:o(()=>[t(Ve)]),_:1}),t(M,{onClick:r[2]||(r[2]=c(f=>n(k).post(l.route("logout")),["stop"]))},{default:o(()=>[t(b,{icon:"mdi-logout",color:"primary",class:"me-2"}),r[4]||(r[4]=v(" Abmelden ",-1))]),_:1})]),_:1})]),_:1},8,["location"])],64))}}),$e=D(Ae,[["__scopeId","data-v-3ce3236f"]]),ze=S({__name:"DrawerMenu",setup(V){return(e,p)=>(u(),m(T,{nav:"","onClick:select":p[0]||(p[0]=s=>n(k).get(s.id)),items:[{props:{active:e.route().current("dashboard"),prependIcon:"mdi-view-dashboard"},value:e.route("dashboard"),title:"Dashboard"},...e.$page.props.currentAppModule=="tide"?[e.can("workLog","viewIndex")&&{props:{active:e.route().current("workLog.index"),prependIcon:"mdi-clock-outline"},value:e.route("workLog.index"),title:"Arbeitszeiten"}]:[],...e.$page.props.currentAppModule=="flow"?[e.can("customer","viewIndex")&&{props:{active:e.route().current("customer.index"),prependIcon:"mdi-folder-account-outline"},value:e.route("customer.index"),title:"Kundenliste"},{props:{active:e.route().current("ticket.index"),prependIcon:"mdi-ticket-account"},value:e.route("ticket.index"),title:"Tickets"}]:[],e.can("dispute","viewIndex")&&{props:{active:e.route().current("dispute.index"),prependIcon:"mdi-bookmark-outline"},value:e.route("dispute.index"),title:"Anträge"},e.can("absence","viewIndex")&&{props:{active:e.route().current("absence.index"),prependIcon:"mdi-timer-cancel-outline"},value:e.route("absence.index"),title:"Abwesenheiten"},e.can("organization","viewShow")&&{title:"Organisation",value:e.route("organization.show",{organization:e.$page.props.organization.id}),props:{prependIcon:"mdi-domain",active:e.route().current("organization.show")}},e.can("operatingSite","viewIndex")&&{props:{active:e.route().current("operatingSite.index"),prependIcon:"mdi-map-marker"},value:e.route("operatingSite.index"),title:"Betriebsstätten"},e.can("group","viewIndex")&&{props:{active:e.route().current("group.index"),prependIcon:"mdi-dots-circle"},value:e.route("group.index"),title:"Abteilungen"},e.can("user","viewIndex")&&{props:{active:e.route().current("user.index"),prependIcon:"mdi-account-group"},value:e.route("user.index"),title:"Mitarbeitende"},e.can("user","viewIndex")&&{props:{prependIcon:"mdi-tree",active:e.route().current("organization.tree")},value:e.route("organization.tree",{organization:e.$page.props.organization.id}),title:"Organigramm"},e.can("chatAssistant","viewIndex")&&e.$page.props.organization.isa_active&&{props:{prependIcon:"mdi-chat-question-outline",active:e.route().current("isa.index")},value:e.route("isa.index"),title:"ISA"},...e.can("organization","viewIndex")?[{type:"divider"},{type:"subheader",title:"Super-Admin"},{props:{prependIcon:"mdi-security",active:e.route().current("organization.index")},value:e.route("organization.index"),title:"Organisationen"}]:[]].filter(Boolean)},null,8,["items"]))}}),Me=D(ze,[["__scopeId","data-v-e1f699b5"]]),Se={key:0,class:"posiion-relative",style:{width:"56px"}},Le={class:"d-flex align-center"},Te={class:"text-center text-h5 font-weight-medium"},De={style:{"user-select":"none"}},xe={key:1,class:"ms-1 d-flex justify-content-center align-center"},Be={class:"d-flex align-center mr-auto ga-2"},Fe={class:"text-h6 ps-0 mx-5 px-2 mb-0",style:{"text-overflow":"ellipsis",overflow:"hidden","white-space":"nowrap","max-width":"calc(100vw - 72px - 72px - 52px)"}},Ne={key:0},Ue={class:"chat-space bg-white elevation-12"},Pe={class:"chat-header"},Oe={class:"d-flex align-center gap-2 chat-button"},Ee={style:{width:"fit-content"}},Re={class:"chat-body"},je=S({__name:"AdminLayout",props:{title:{},backurl:{},backurlTitle:{},noInlinePadding:{type:Boolean}},setup(V){const e=V,p=W(),s=K().smAndDown,l=$(!s.value),r=$(!!p.props.organization.logo);U(()=>p.props.organization.logo,()=>{r.value=!1,pe(()=>r.value=!0)});function f(a){k.post(route("switchAppModule",{module:a}),{preserveState:!0,preserveScroll:!0,replace:!0})}const A=de(()=>p.props.appModules.find(a=>a.value===p.props.currentAppModule)),y=$(!1),x={id:-999,role:"assistant",created_at:ce.local().toISO(),msg:"Hallo, ich bin ISA. Wie kann ich Ihnen helfen?"},B={id:-999,chat_messages:[x]};U(()=>!!p.props.currentUserChat,()=>{B.chat_messages=[x]});function Z(){y.value=!0}function F(){y.value=!1}function Y(){var a;k.delete(route("isa.deleteChat",{chat:(a=p.props.currentUserChat)==null?void 0:a.id}),{preserveState:!0,preserveScroll:!0}),y.value=!0}return(a,i)=>(u(),m(me,null,{default:o(()=>[t(n(ge),{title:a.title},null,8,["title"]),t(ve,{color:"background",style:{border:"none"},modelValue:l.value,"onUpdate:modelValue":i[2]||(i[2]=h=>l.value=h),image:"/img/loggedin-background.png"},{default:o(()=>[A.value?(u(),m(T,{key:0},{default:o(()=>[t(M,{onClick:i[1]||(i[1]=c(h=>f(a.$page.props.currentAppModule=="tide"?"flow":"tide"),["stop"])),class:"pe-2"},{prepend:o(()=>[n(p).props.appModules.length==2?(u(),z("div",Se,[d("img",{src:"/img/Tide-Logo.webp",id:"tide-logo",class:L({ActiveLogo:A.value.value=="tide"})},null,2),t(b,{icon:"mdi-undo",style:{top:"0",position:"absolute",rotate:"-20deg",scale:"0.8"}}),d("img",{src:"/img/Flow-Logo.webp",id:"flow-logo",class:L({ActiveLogo:A.value.value=="flow"})},null,2),t(b,{icon:"mdi-undo",style:{top:"25px",left:"40px",position:"absolute",rotate:"140deg",scale:"0.8"}})])):(u(),m(P,{key:1,width:"24px",class:"me-8",src:"/img/logo-symbol.png"}))]),append:o(()=>[t(g,{onClick:i[0]||(i[0]=c(h=>l.value=!1,["stop"])),icon:"mdi-close",variant:"text"})]),default:o(()=>[t(fe,null,{default:o(()=>[d("div",Le,[d("h1",Te,[d("span",De,C(A.value.title),1)])])]),_:1})]),_:1})]),_:1})):w("",!0),t(H),t(Me)]),_:1},8,["modelValue"]),t(he,{elevation:"0",color:"background"},{default:o(()=>[!l.value||n(s)?(u(),m(E,{key:0,variant:"text",onClick:i[3]||(i[3]=c(h=>l.value=!l.value,["stop"]))})):w("",!0),a.backurl?(u(),z("span",xe,[a.backurlTitle?(u(),m(g,{key:0,"prepend-icon":"mdi-arrow-left",color:"info",variant:"flat",size:"small",class:"ms-3 text-subtitle-2",onClick:i[4]||(i[4]=c(h=>n(k).visit(a.backurl,{preserveState:!0}),["stop"]))},{default:o(()=>[v(C(a.backurlTitle),1)]),_:1})):(u(),m(E,{key:1,variant:"text",icon:"mdi-arrow-left",onClick:i[5]||(i[5]=c(h=>n(k).visit(a.backurl,{preserveState:!0}),["stop"]))}))])):w("",!0),d("div",Be,[d("span",Fe,C(a.title),1),r.value?(u(),m(P,{key:0,src:a.route("organization.getLogo",{organization:a.$page.props.organization.id,key:a.$page.props.organization.logo}),"max-height":"48px","max-width":"48px",width:"100%",height:"100%",class:"rounded"},null,8,["src"])):w("",!0)]),O(a.$slots,"appbarActions",{},void 0,!0),t($e)]),_:3}),t(be,null,{default:o(()=>[t(ke,{class:L(["pt-0",e.noInlinePadding?"px-0":""]),style:we(a.$page.props.organization.isa_active?"padding-bottom: calc(60px + 16px + 4px)":""),fluid:""},{default:o(()=>[a.$page.props.flash.error?(u(),m(R,{type:"error",closable:"",class:"mb-6",key:Math.random(),"onClick:close":i[6]||(i[6]=h=>G.value=!1)},{default:o(()=>[v(C(a.$page.props.flash.error),1)]),_:1})):w("",!0),a.$page.props.flash.success?(u(),m(R,{type:"success",closable:"",class:"mb-6",key:Math.random(),"onClick:close":i[7]||(i[7]=h=>G.value=!1)},{default:o(()=>[v(C(a.$page.props.flash.success),1)]),_:1})):w("",!0),O(a.$slots,"default",{},void 0,!0)]),_:3},8,["style","class"]),a.$page.props.organization.isa_active?(u(),z("div",Ne,[j(t(g,{class:"chat-button",style:{position:"fixed",bottom:"20px",right:"20px"},type:"button",title:"Chat öffnen",onClick:c(Z,["stop"])},{default:o(()=>[...i[8]||(i[8]=[d("img",{src:"/img/Isa-klein.png",alt:""},null,-1)])]),_:1},512),[[q,!y.value]]),t(ye,{name:"chat-pop"},{default:o(()=>[j(d("div",Ue,[d("div",Pe,[d("div",Oe,[d("img",{src:"/img/Isa-klein.png",role:"button",onClick:c(F,["stop"]),alt:"ISA Logo"}),t(Ie,{class:"text-h6"},{default:o(()=>[...i[9]||(i[9]=[v("ISA",-1)])]),_:1})]),d("div",Ee,[t(g,{icon:"mdi-window-minimize",color:"primary",variant:"text",onClick:c(F,["stop"]),title:"Chat minimieren"}),t(g,{icon:"mdi-chat-plus",color:"primary",variant:"text",onClick:c(Y,["stop"]),title:"Neuer Chat"})])]),d("div",Re,[t(Ce,{showChat:y.value,chat:a.$page.props.currentUserChat?a.$page.props.currentUserChat:B,reachedMonthlyTokenLimit:a.$page.props.reachedMonthlyTokenLimit},null,8,["showChat","chat","reachedMonthlyTokenLimit"])])],512),[[q,y.value]])]),_:1})])):w("",!0)]),_:3})]),_:3}))}}),We=D(je,[["__scopeId","data-v-943e31c0"]]);export{We as A};
