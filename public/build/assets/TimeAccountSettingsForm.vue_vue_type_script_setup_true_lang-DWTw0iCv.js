import{d as p,C as g,w as f,o as b,c as V,b as i,u as t,v as y,e as a,g as u,W as v,f as m,m as d,h as c,i as C,l as w,p as S,q as r,K as _,s as k,V as T}from"./app-CFxoSykr.js";import{e as $,d as A,r as F}from"./utils-DBoVH0qs.js";const h=p({__name:"TimeAccountSettingsForm",props:{user:{},item:{},time_account_settings:{}},setup(N){const e=g({name:"",time_account_setting_id:null,balance_limit:0});return f(()=>e.balance_limit,()=>{e.balance_limit=+e.balance_limit.toString().replace(/[^\d,.]/g,"").replace(/,/,".")}),(o,l)=>(b(),V(y,{onAfterLeave:l[4]||(l[4]=s=>t(e).reset()),"max-width":"1000"},{activator:i(({props:s})=>[a(m,v(s,{onClick:l[0]||(l[0]=()=>{t(e).name=o.item.name,t(e).balance_limit=o.item.balance_limit,t(e).time_account_setting_id=o.item.time_account_setting_id}),color:"primary",icon:"",variant:"text"}),{default:i(()=>[a(u,{icon:"mdi-cog"})]),_:2},1040)]),default:i(({isActive:s})=>[a(T,{title:`Einstellungen für Konto ${o.item.name} bearbeiten`},{append:i(()=>[a(m,{icon:"",variant:"text",onClick:d(n=>s.value=!1,["stop"])},{default:i(()=>[a(u,null,{default:i(()=>l[5]||(l[5]=[c("mdi-close")])),_:1})]),_:2},1032,["onClick"])]),default:i(()=>[a(C,null,{default:i(()=>[a(w,{onSubmit:d(n=>{t(e).patch(o.route("timeAccount.update",{timeAccount:o.item.id}),{onSuccess:()=>{s.value=!1,t(e).reset()}})},["prevent"])},{default:i(()=>[a(S,null,{default:i(()=>[a(r,{cols:"12",md:"6"},{default:i(()=>[a(_,{modelValue:t(e).name,"onUpdate:modelValue":l[1]||(l[1]=n=>t(e).name=n),label:"Name","error-messages":t(e).errors.name},null,8,["modelValue","error-messages"])]),_:1}),a(r,{cols:"12",md:"6"},{default:i(()=>[a(k,{disabled:o.item.time_account_setting.type===null,label:"Typ",items:o.time_account_settings.filter(n=>o.item.time_account_setting.type===null||n.type!=null).map(n=>({title:`${t($)(n.type)} (${t(A)(n.truncation_cycle_length_in_months)})`,value:n.id})),modelValue:t(e).time_account_setting_id,"onUpdate:modelValue":l[2]||(l[2]=n=>t(e).time_account_setting_id=n),"error-messages":t(e).errors.time_account_setting_id},null,8,["disabled","items","modelValue","error-messages"])]),_:1}),a(r,{cols:"12",md:"6"},{default:i(()=>[a(_,{modelValue:t(e).balance_limit,"onUpdate:modelValue":l[3]||(l[3]=n=>t(e).balance_limit=n),label:"Limit in Stunden",hint:"entspricht "+t(F)(t(e).balance_limit/o.user.currentWorkingHours.weekly_working_hours,2)+"x wöchentliche Arbeitszeit","error-messages":t(e).errors.balance_limit},null,8,["modelValue","hint","error-messages"])]),_:1}),a(r,{cols:"12",class:"text-end"},{default:i(()=>[a(m,{type:"submit",color:"primary",loading:t(e).processing},{default:i(()=>l[6]||(l[6]=[c(" Speichern ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:2},1032,["onSubmit"])]),_:2},1024)]),_:2},1032,["title"])]),_:1}))}});export{h as _};
