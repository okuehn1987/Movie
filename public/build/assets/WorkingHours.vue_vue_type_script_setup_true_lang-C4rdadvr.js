import{d as x,Q as z,R as C,D as f,G as S,o as u,c,b as o,V as b,e as s,u as l,E as H,f as m,n as B,p as d,v as r,S as g,g as k,h as a,t as n,k as v,j as N,B as $,m as V,i as M}from"./app-C8gMSAsN.js";import{a as T}from"./utils-VsGlMTo6.js";const A={class:"d-flex align-center ga-3"},D={class:"d-flex flex-column"},E={class:"text-h6"},F={class:"d-flex align-center ga-3"},G={class:"d-flex flex-column"},I={class:"text-h6"},Q={class:"d-flex align-center ga-3"},K={class:"d-flex flex-column"},R={class:"text-h6"},Z={class:"d-flex align-center ga-3"},j={class:"d-flex flex-column"},O={class:"text-h6"},U={key:1},P=x({__name:"WorkingHours",props:{lastWorkLog:{},operating_times:{},overtime:{},workingHours:{}},setup(y){const i=y,p=z(),_=T();function h(t=!1){H.post(route("workLog.store"),{is_home_office:t,id:i.lastWorkLog.end?null:i.lastWorkLog.id})}const L=i.operating_times.find(t=>{var e;return t.type==((e=C.weekdays("long",{locale:"en"})[f.now().weekday-1])==null?void 0:e.toLowerCase())}),W=S(()=>i.lastWorkLog.end?i.workingHours.current:_.value.diff(f.fromSQL(i.lastWorkLog.start)).as("hours")+i.workingHours.current);return(t,e)=>(u(),c(b,{title:"Arbeitszeit"},{append:o(()=>[s(m,{icon:"mdi-eye",variant:"text",onClick:e[0]||(e[0]=w=>l(H).get(t.route("user.workLog.index",{user:l(p).props.auth.user.id})))})]),default:o(()=>[s(M,null,{default:o(()=>[s(B,null,{default:o(()=>[s(d,{cols:"12",sm:"6"},{default:o(()=>[r("div",A,[s(g,{color:"blue-grey",rounded:"",size:"40",class:"elevation-2"},{default:o(()=>[s(k,{size:"24",icon:"mdi-clock"})]),_:1}),r("div",D,[e[3]||(e[3]=a(" Woche Soll ")),r("div",E,n(t.workingHours.should),1)])])]),_:1}),s(d,{cols:"12",sm:"6"},{default:o(()=>[r("div",F,[s(g,{color:"green",rounded:"",size:"40",class:"elevation-2"},{default:o(()=>[s(k,{size:"24",icon:"mdi-clock-check"})]),_:1}),r("div",G,[e[4]||(e[4]=a(" Woche Ist ")),r("div",I,n(Math.floor(W.value))+":"+n(Math.floor(W.value%1*60).toString().padStart(2,"0")),1)])])]),_:1}),s(d,{cols:"12",sm:"6"},{default:o(()=>[r("div",Q,[s(g,{color:"orange",rounded:"",size:"40",class:"elevation-2 text-white"},{default:o(()=>[s(k,{size:"24",icon:"mdi-clock-plus"})]),_:1}),r("div",K,[e[5]||(e[5]=a(" Ãœberstunden ")),r("div",R,n(t.overtime),1)])])]),_:1}),t.lastWorkLog.end==null?(u(),c(d,{key:0,cols:"12",sm:"6"},{default:o(()=>[r("div",Z,[s(g,{color:"blue",rounded:"",size:"40",class:"elevation-2"},{default:o(()=>[s(k,{size:"24",icon:"mdi-timer"})]),_:1}),r("div",j,[e[6]||(e[6]=a(" Hier seit ")),r("div",O,n(l(f).fromSQL(t.lastWorkLog.start).toFormat("HH:mm"))+" Uhr",1)])])]),_:1})):v("",!0),s(d,{cols:"12"},{default:o(()=>[l(L)&&l(_).diff(l(f).fromFormat(l(L).end,"HH:mm")).as("minutes")>0?(u(),c(N,{key:0,color:"error"},{default:o(()=>[e[8]||(e[8]=a(" Es fehlt eine Meldung. Bitte Zeitkorrektur. ")),s(m,{color:"error",href:`/user/${l(p).props.auth.user.id}/workLogs?workLog=${t.lastWorkLog.id}`},{default:o(()=>e[7]||(e[7]=[a(" Zeitkorrektur ")])),_:1},8,["href"])]),_:1})):l(p).props.auth.user.home_office&&t.lastWorkLog.end||t.lastWorkLog.is_home_office&&!t.lastWorkLog.end?(u(),$("div",U,[s(m,{block:"",size:"large",onClick:e[1]||(e[1]=V(w=>h(!0),["stop"])),color:"primary",class:"me-2"},{default:o(()=>[a(n(t.lastWorkLog.end?"Kommen Homeoffice":"Gehen Homeoffice"),1)]),_:1})])):v("",!0)]),_:1}),s(d,{cols:"12"},{default:o(()=>[t.lastWorkLog.end||!t.lastWorkLog.is_home_office?(u(),c(m,{key:0,block:"",size:"large",onClick:e[2]||(e[2]=V(w=>h(),["stop"])),color:"primary"},{default:o(()=>[a(n(t.lastWorkLog.end?"Kommen":"Gehen"),1)]),_:1})):v("",!0)]),_:1})]),_:1})]),_:1})]),_:1}))}});export{P as _};
