import{d as x,r as v,o as y,q as B,f as l,b as a,u,Q as L,a as c,B as S,e as k,F as T,R as Q,D as d,h as p,j as N,k as b,V as P,H as U,I as i,K as V,i as A,v as R}from"./app-DrMW2YkR.js";const j=x({__name:"AbsenceDeleteRequests",props:{requestedDeletes:{}},setup(F){var D;const g=F,n=v(((D=g.requestedDeletes)==null?void 0:D.find(s=>s.id==Number(route().params.openAbsenceDelete)))??null),o=v(!!n.value),r=v(1);function M(s){var t;const e=(t=g.requestedDeletes)==null?void 0:t.find(f=>f.id===s.id);e&&(n.value=e,o.value=!0)}const m=useForm({});function w(){n.value&&m.delete(route("absence.destroy",{absence:n.value.id}),{onSuccess:()=>{o.value=!1}})}const C=useForm({});function q(){n.value&&C.post(route("absence.denyDestroy",{absence:n.value.id}),{onSuccess:()=>{o.value=!1}})}return(s,e)=>(y(),B(T,null,[l(L,{hover:"","items-per-page":"5",page:r.value,"onUpdate:page":e[1]||(e[1]=t=>r.value=t),"no-data-text":"keine Abwesenheitsanträge vorhanden.","onClick:row":e[2]||(e[2]=(t,f)=>M(f.item)),items:s.requestedDeletes.map(t=>({id:t.id,user:t.user.first_name+" "+t.user.last_name,start:u(d).fromSQL(t.start).toFormat("dd.MM.yyyy"),end:u(d).fromSQL(t.end).toFormat("dd.MM.yyyy")})),headers:[{title:"Mitarbeiter",key:"user"},{title:"Von",key:"start"},{title:"Bis",key:"end"}]},{bottom:a(()=>[s.requestedDeletes.length>5?(y(),c(Q,{key:0,modelValue:r.value,"onUpdate:modelValue":e[0]||(e[0]=t=>r.value=t),length:Math.ceil(s.requestedDeletes.length/5)},null,8,["modelValue","length"])):k("",!0)]),_:1},8,["page","items"]),n.value?(y(),c(S,{key:0,modelValue:o.value,"onUpdate:modelValue":e[7]||(e[7]=t=>o.value=t),"max-width":"1000"},{default:a(()=>[l(R,{title:"Abwesenheit von "+n.value.user.first_name+" "+n.value.user.last_name},{append:a(()=>[l(p,{icon:"",variant:"text",onClick:e[3]||(e[3]=t=>o.value=!1)},{default:a(()=>[l(N,null,{default:a(()=>e[8]||(e[8]=[b("mdi-close")])),_:1})]),_:1})]),default:a(()=>[l(P,null,{default:a(()=>[l(U,null,{default:a(()=>[l(i,{cols:"12"},{default:a(()=>[l(V,{label:"Abwesenheitsgrund",modelValue:n.value.absence_type.name,"onUpdate:modelValue":e[4]||(e[4]=t=>n.value.absence_type.name=t),readonly:""},null,8,["modelValue"])]),_:1}),l(i,{cols:"12",md:"6"},{default:a(()=>[l(V,{label:"Von:","model-value":u(d).fromSQL(n.value.start).toFormat("dd.MM.yyyy"),readonly:""},null,8,["model-value"])]),_:1}),l(i,{cols:"12",md:"6"},{default:a(()=>[l(V,{label:"Bis:","model-value":u(d).fromSQL(n.value.end).toFormat("dd.MM.yyyy"),readonly:""},null,8,["model-value"])]),_:1})]),_:1})]),_:1}),l(i,{cols:"12",class:"d-flex justify-end ga-2"},{default:a(()=>[l(p,{color:"primary",onClick:e[5]||(e[5]=A(t=>q(),["stop"])),loading:u(m).processing},{default:a(()=>e[9]||(e[9]=[b("Löschen ablehnen")])),_:1},8,["loading"]),l(p,{color:"error",onClick:e[6]||(e[6]=A(t=>w(),["stop"])),loading:u(m).processing},{default:a(()=>e[10]||(e[10]=[b("Abwesenheit Löschen")])),_:1},8,["loading"])]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])):k("",!0)],64))}});export{j as _};
