import{d as k,r as x,a as V,o as g,Q as b,b as o,f as t,x as S,h as v,J as C,m as D,K as F,L as n,O as u,g as a,D as d,a0 as L,am as U,e as B,l as f,s as p,t as P,p as _,V as q,P as H}from"./app-B1cliZyJ.js";const M=k({__name:"CreateNewWorkLog",props:{user:{}},setup(c){const w=c,i=x(!1),e=useForm({start:new Date,end:new Date,comment:null,start_time:"09:00",end_time:"17:00",is_home_office:!1});function y(){e.transform(l=>{const r=d.fromFormat(l.start_time,"HH:mm"),m=d.fromFormat(l.end_time,"HH:mm");return{...l,start:d.fromISO(l.start.toISOString()).set({hour:r.hour,minute:r.minute,second:0}),end:d.fromISO(l.end.toISOString()).set({hour:m.hour,minute:m.minute,second:0})}}).post(route("user.workLog.store",{user:w.user.id}),{onSuccess:()=>{i.value=!1,e.reset()}})}return(l,r)=>(g(),V(b,{"max-width":"1000",modelValue:i.value,"onUpdate:modelValue":r[6]||(r[6]=m=>i.value=m)},{activator:o(({props:m})=>[t(f,H(m,{color:"primary"}),{default:o(()=>[t(_,null,{default:o(()=>[...r[7]||(r[7]=[p("mdi-plus",-1)])]),_:1})]),_:1},16)]),default:o(({isActive:m})=>[t(q,{title:"Neue Buchung "+(l.can("workLogPatch","update")?"erstellen":"beantragen")},{append:o(()=>[t(f,{icon:"",variant:"text",onClick:s=>{m.value=!1,a(e).reset()}},{default:o(()=>[t(_,null,{default:o(()=>[...r[8]||(r[8]=[p("mdi-close",-1)])]),_:1})]),_:1},8,["onClick"])]),default:o(()=>[t(S),t(v,null,{default:o(()=>[t(C,{onSubmit:D(y,["prevent"])},{default:o(()=>[t(F,null,{default:o(()=>[t(n,{cols:"12",md:"3"},{default:o(()=>[t(u,{type:"date",label:"Start",required:"","error-messages":a(e).errors.start,modelValue:a(e).start,"onUpdate:modelValue":r[0]||(r[0]=s=>a(e).start=s),max:a(d).now().toFormat("yyyy-MM-dd")},null,8,["error-messages","modelValue","max"])]),_:1}),t(n,{cols:"12",md:"3"},{default:o(()=>[t(u,{type:"time",label:"Start",required:"","error-messages":a(e).errors.start_time,modelValue:a(e).start_time,"onUpdate:modelValue":r[1]||(r[1]=s=>a(e).start_time=s)},null,8,["error-messages","modelValue"])]),_:1}),t(n,{cols:"12",md:"3"},{default:o(()=>[t(u,{type:"date",label:"Ende",required:"","error-messages":a(e).errors.end,modelValue:a(e).end,"onUpdate:modelValue":r[2]||(r[2]=s=>a(e).end=s),max:a(d).now().toFormat("yyyy-MM-dd")},null,8,["error-messages","modelValue","max"])]),_:1}),t(n,{cols:"12",md:"3"},{default:o(()=>[t(u,{type:"time",label:"Ende",required:"","error-messages":a(e).errors.end_time,modelValue:a(e).end_time,"onUpdate:modelValue":r[3]||(r[3]=s=>a(e).end_time=s)},null,8,["error-messages","modelValue"])]),_:1}),t(n,{cols:"12"},{default:o(()=>[t(L,{label:"Bemerkung (optional)",modelValue:a(e).comment,"onUpdate:modelValue":r[4]||(r[4]=s=>a(e).comment=s),"error-messages":a(e).errors.comment,variant:"filled","max-rows":"10","auto-grow":""},null,8,["modelValue","error-messages"])]),_:1}),t(n,{cols:"12",md:"3"},{default:o(()=>[t(U,{label:"Homeoffice",required:"","error-messages":a(e).errors.is_home_office,modelValue:a(e).is_home_office,"onUpdate:modelValue":r[5]||(r[5]=s=>a(e).is_home_office=s),variant:"plain","hide-details":""},null,8,["error-messages","modelValue"])]),_:1}),t(n,{cols:"12",class:"text-end"},{default:o(()=>[l.can("workLogPatch","create")||l.can("workLogPatch","update")?(g(),V(f,{key:0,loading:a(e).processing,type:"submit",color:"primary"},{default:o(()=>[p(P(l.can("workLogPatch","update")?"Speichern":"Beantragen"),1)]),_:1},8,["loading"])):B("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:2},1032,["title"])]),_:1},8,["modelValue"]))}});export{M as _};
