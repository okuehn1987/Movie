import{d as I,a as m,o as d,J as j,b as o,f as t,V as J,v as $,g as K,C as Z,m as c,j as s,N as q,O as h,P as x,Z as E,a7 as G,l as b,q as w,n as N,h as f,a8 as Q,a9 as X,u as U,i as y,e as v,aa as L,F as C,y as Y,a4 as z,ab as ee,I as S,a5 as V,z as k,ac as O,t as A,L as _,D as te,r as P,ad as ae,w as oe,ae as re,R as se,S as ne,af as ie,T as F,ag as le,U as B,ah as T,p as ue,ai as de,aj as pe,M as W}from"./app-Cpag3Xj2.js";import{a as me}from"./utils-BCbTDmxl.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ce=I({__name:"ReportBugDialog",setup(D){const e=useForm({location:null,summary:null,description:null,attachments:[]});return(g,n)=>(d(),m(j,{"max-width":"1000"},{activator:o(({props:p})=>[f("div",Q(X(p)),[t(N,{icon:"mdi-bug",class:"me-2"}),n[4]||(n[4]=w(" Fehler melden ",-1))],16)]),default:o(({isActive:p})=>[t(J,{title:"Fehler melden"},{append:o(()=>[t(b,{icon:"",variant:"text",onClick:l=>p.value=!1},{default:o(()=>[t(N,null,{default:o(()=>[...n[5]||(n[5]=[w("mdi-close",-1)])]),_:1})]),_:1},8,["onClick"])]),default:o(()=>[t($),t(K,null,{default:o(()=>[t(Z,{onSubmit:c(l=>{s(e).post(g.route("reportBug.store"),{onSuccess:()=>{p.value=!1,s(e).reset()}})},["prevent"])},{default:o(()=>[t(q,null,{default:o(()=>[t(h,{cols:"12"},{default:o(()=>[t(x,{modelValue:s(e).location,"onUpdate:modelValue":n[0]||(n[0]=l=>s(e).location=l),errorMessages:s(e).errors.location,label:"Wo ist der Fehler aufgetreten?"},null,8,["modelValue","errorMessages"])]),_:1}),t(h,{cols:"12"},{default:o(()=>[t(x,{modelValue:s(e).summary,"onUpdate:modelValue":n[1]||(n[1]=l=>s(e).summary=l),errorMessages:s(e).errors.summary,label:"Fasse den Fehler zusammen"},null,8,["modelValue","errorMessages"])]),_:1}),t(h,{cols:"12"},{default:o(()=>[t(E,{modelValue:s(e).description,"onUpdate:modelValue":n[2]||(n[2]=l=>s(e).description=l),errorMessages:s(e).errors.description,label:"Zus채tzliche Informationen zum Fehler"},null,8,["modelValue","errorMessages"])]),_:1}),t(h,{cols:"12"},{default:o(()=>[t(G,{modelValue:s(e).attachments,"onUpdate:modelValue":n[3]||(n[3]=l=>s(e).attachments=l),errorMessages:Object.entries(s(e).errors).filter(([l,u])=>l.includes("attachments")&&u).map(([l])=>"Alle Dateien m체ssen ein Bild sein."),label:"Anhang",multiple:"",accept:"image/*"},null,8,["modelValue","errorMessages"])]),_:1}),t(h,{cols:"12",class:"text-end"},{default:o(()=>[t(b,{type:"submit",color:"primary"},{default:o(()=>[...n[6]||(n[6]=[w("Absenden",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:2},1024)]),_:2},1024)]),_:1}))}}),ge={key:0},fe={key:1},ve={class:"ms-md-4 ms-2 ga-md-4 ga-2 d-flex"},be={key:1,style:{width:"48px"}},ke=I({__name:"AppbarActions",setup(D){const e=U();function g(a){k.post(route("notification.update",{notification:a.id}))}function n(a){let r;if(a.type=="App\\Notifications\\WorkLogPatchNotification")r=route("dispute.index",{openPatch:a.data.work_log_patch_id});else if(a.type=="App\\Notifications\\WorkLogNotification")r=route("dispute.index",{openWorkLog:a.data.work_log_id});else if(a.type=="App\\Notifications\\AbsenceNotification")r=route("dispute.index",{openAbsence:a.data.absence_id});else if(a.type=="App\\Notifications\\AbsencePatchNotification")r=route("dispute.index",{openAbsencePatch:a.data.absence_patch_id});else if(a.type=="App\\Notifications\\AbsenceDeleteNotification")r=route("dispute.index",{openAbsenceDelete:a.data.absence_id});else if(a.type=="App\\Notifications\\DisputeStatusNotification"){if(a.data.type=="delete")return;a.data.log_model=="App\\Models\\Absence"?r=route("absence.index",{openAbsence:a.data.log_id}):a.data.log_model=="App\\Models\\AbsencePatch"?r=route("absence.index",{openAbsencePatch:a.data.log_id}):a.data.log_model=="App\\Models\\WorkLogPatch"?r=route("user.workLog.index",{user:_().props.auth.user.id,openWorkLogPatch:a.data.log_id}):a.data.log_model=="App\\Models\\WorkLog"&&(r=route("user.workLog.index",{user:_().props.auth.user.id,workLog:a.data.log_id}))}return r&&k.get(r,{},{onSuccess:()=>g(a)})}const p=me();function l(a){const r=te.fromISO(a.created_at),i=p.value.diff(r);return i.as("minutes")<1?"Jetzt":i.as("hours")<1?"vor "+Math.floor(i.as("minutes"))+" minuten":r.day!==p.value.day||r.month!==p.value.month||r.year!==p.value.year?r.toFormat("dd.MM - HH:mm")+" Uhr":r.toFormat("HH:mm")+" Uhr"}const u={"App\\Notifications\\AbsenceNotification":"neuer Antrag ","App\\Notifications\\AbsencePatchNotification":"neue Korrektur","App\\Notifications\\WorkLogPatchNotification":"neue Korrektur","App\\Notifications\\DisputeStatusNotification":"Antrag bearbeitet","App\\Notifications\\AbsenceDeleteNotification":"neuer Antrag","App\\Notifications\\WorkLogNotification":"neue Buchung"};return(a,r)=>(d(),y(C,null,[a.$page.props.unreadNotifications.length>0?(d(),m(L,{key:0,id:"notification-menu"},{activator:o(({props:i})=>[t(b,S({color:"primary"},i,{stacked:""}),{default:o(()=>[t(ee,{content:a.$page.props.unreadNotifications.length,color:"error"},{default:o(()=>[t(N,{icon:"mdi-bell"})]),_:1},8,["content"])]),_:2},1040)]),default:o(()=>[t(z,{"min-width":"200px",onClick:c(()=>{},["stop"])},{default:o(()=>[(d(!0),y(C,null,Y(a.$page.props.unreadNotifications.toSorted((i,M)=>M.created_at.localeCompare(i.created_at)),(i,M)=>(d(),y(C,{key:i.id},[M!=0?(d(),m($,{key:0})):v("",!0),t(V,null,{append:o(()=>[f("div",ve,[t($,{vertical:""}),i.type!="App\\Notifications\\DisputeStatusNotification"||i.type=="App\\Notifications\\DisputeStatusNotification"&&i.data.type!="delete"?(d(),m(b,{key:0,size:s(e).smAndDown.value?"small":void 0,color:"primary",icon:"mdi-eye",variant:"tonal",onClick:c(R=>n(i),["stop"])},null,8,["size","onClick"])):(d(),y("div",be)),t(b,{size:s(e).smAndDown.value?"small":void 0,color:"error",icon:"mdi-delete",variant:"tonal",onClick:c(R=>g(i),["stop"])},null,8,["size","onClick"])])]),default:o(()=>[t(O,null,{default:o(()=>[s(e).smAndDown.value?(d(),y("div",ge,A(u[i.type]),1)):(d(),y("div",fe,A(i.data.title),1)),f("div",null,[f("sub",null,A(l(i)),1)])]),_:2},1024)]),_:2},1024)],64))),128))]),_:1})]),_:1})):v("",!0),t(L,{location:s(e).smAndDown.value?"bottom left":"bottom"},{activator:o(({props:i})=>[t(b,S({stacked:"",color:"black","prepend-icon":"mdi-account-details"},i),null,16)]),default:o(()=>[t(z,{"min-width":"200px"},{default:o(()=>[t(V,{onClick:r[0]||(r[0]=c(i=>s(k).get(a.route("user.profile",{user:a.$page.props.auth.user.id})),["stop"]))},{default:o(()=>[t(N,{icon:"mdi-account",class:"me-2"}),r[2]||(r[2]=w(" Profil ",-1))]),_:1}),t(V,{onClick:c(()=>{},["stop"])},{default:o(()=>[t(ce)]),_:1}),t(V,{onClick:r[1]||(r[1]=c(i=>s(k).post(a.route("logout")),["stop"]))},{default:o(()=>[t(N,{icon:"mdi-logout",class:"me-2"}),r[3]||(r[3]=w(" Abmelden ",-1))]),_:1})]),_:1})]),_:1},8,["location"])],64))}}),Ae=H(ke,[["__scopeId","data-v-1bfc4e39"]]),we=I({__name:"DrawerMenu",setup(D){return(e,g)=>(d(),m(z,{nav:"","onClick:select":g[0]||(g[0]=n=>s(k).get(n.id)),items:[{props:{active:e.route().current("dashboard"),prependIcon:"mdi-view-dashboard"},value:e.route("dashboard"),title:"Dashboard"},e.can("absence","viewIndex")&&{props:{active:e.route().current("absence.index"),prependIcon:"mdi-timer-cancel-outline"},value:e.route("absence.index"),title:"Abwesenheiten"},e.can("workLog","viewIndex")&&{props:{active:e.route().current("workLog.index"),prependIcon:"mdi-clock-outline"},value:e.route("workLog.index"),title:"Arbeitszeiten"},e.can("dispute","viewIndex")&&{props:{active:e.route().current("dispute.index"),prependIcon:"mdi-bookmark-outline"},value:e.route("dispute.index"),title:"Antr채ge"},e.can("organization","viewShow")&&{title:"Organisation",subtitle:"test",value:e.route("organization.show",{organization:e.$page.props.organization.id}),props:{prependIcon:"mdi-domain",active:e.route().current("organization.show")}},e.can("operatingSite","viewIndex")&&{props:{active:e.route().current("operatingSite.index"),prependIcon:"mdi-map-marker"},value:e.route("operatingSite.index"),title:"Betriebsst채tten"},e.can("group","viewIndex")&&{props:{active:e.route().current("group.index"),prependIcon:"mdi-dots-circle"},value:e.route("group.index"),title:"Abteilungen"},e.can("user","viewIndex")&&{props:{active:e.route().current("user.index"),prependIcon:"mdi-account-group"},value:e.route("user.index"),title:"Mitarbeitende"},e.can("user","viewIndex")&&{props:{prependIcon:"mdi-tree",active:e.route().current("organization.tree")},value:e.route("organization.tree",{organization:e.$page.props.organization.id}),title:"Organigramm"},...e.can("organization","viewIndex")?[{type:"divider"},{type:"subheader",title:"Super-Admin"},{props:{prependIcon:"mdi-security",active:e.route().current("organization.index")},value:e.route("organization.index"),title:"Organisationen"}]:[]].filter(Boolean)},null,8,["items"]))}}),ye=H(we,[["__scopeId","data-v-d2eb9acd"]]),he={class:"d-flex align-center"},Ve={class:"text-center font-weight-medium"},Ne={class:"d-flex align-center mr-auto ga-2"},De=I({__name:"AdminLayout",props:{title:{},backurl:{}},setup(D){const e=_(),g=U().smAndDown,n=P(!g.value),p="Herta";ae(1e3*60*2,{only:["unreadNotifications"]},{keepAlive:!0});const l=P(!!e.props.organization.logo);return oe(()=>e.props.organization.logo,()=>{l.value=!1,re(()=>l.value=!0)}),(u,a)=>(d(),m(se,null,{default:o(()=>[t(s(ne),{title:u.title},null,8,["title"]),t(ie,{color:"background",style:{border:"none"},modelValue:n.value,"onUpdate:modelValue":a[2]||(a[2]=r=>n.value=r),image:"/img/loggedin-background.png"},{default:o(()=>[t(z,null,{default:o(()=>[t(V,{onClick:a[1]||(a[1]=c(r=>s(k).get("/"),["stop"]))},{prepend:o(()=>[t(F,{src:"/img/logo-symbol.png",style:{width:"24px"},class:"me-8"})]),append:o(()=>[t(b,{onClick:a[0]||(a[0]=c(r=>n.value=!1,["stop"])),icon:"mdi-close",variant:"text"})]),default:o(()=>[t(O,null,{default:o(()=>[f("div",he,[f("h1",Ve,[f("span",null,A(s(p)),1)])])]),_:1})]),_:1})]),_:1}),t($),t(ye)]),_:1},8,["modelValue"]),t(le,{elevation:"0",color:"background"},{default:o(()=>[!n.value||s(g)?(d(),m(T,{key:0,variant:"text",onClick:a[3]||(a[3]=c(r=>n.value=!n.value,["stop"]))})):v("",!0),u.backurl?(d(),m(T,{key:1,variant:"text",icon:"mdi-arrow-left",onClick:a[4]||(a[4]=c(r=>s(k).visit(u.backurl,{preserveState:!0}),["stop"]))})):v("",!0),f("div",Ne,[f("span",{class:"text-h6 ps-0 mx-md-5 px-2 mb-0",style:ue([{"text-overflow":"ellipsis",overflow:"hidden","white-space":"nowrap"},{maxWidth:u.$page.props.unreadNotifications.length>0?"calc(100vw - 72px - 72px - 52px)":"calc(100vw -  72px - 52px)"}])},A(u.title),5),l.value?(d(),m(F,{key:0,src:u.route("organization.getLogo",{organization:u.$page.props.organization.id,key:u.$page.props.organization.logo}),"max-height":"48px","max-width":"48px",width:"100%",height:"100%",class:"rounded"},null,8,["src"])):v("",!0)]),B(u.$slots,"appbarActions"),t(Ae)]),_:3}),t(de,null,{default:o(()=>[t(pe,{class:"pt-0 px-sm-2 px-1",fluid:""},{default:o(()=>[u.$page.props.flash.error?(d(),m(W,{type:"error",closable:"",class:"mb-6",key:Math.random()},{default:o(()=>[w(A(u.$page.props.flash.error),1)]),_:1})):v("",!0),u.$page.props.flash.success?(d(),m(W,{type:"success",closable:"",class:"mb-6",key:Math.random()},{default:o(()=>[w(A(u.$page.props.flash.success),1)]),_:1})):v("",!0),B(u.$slots,"default")]),_:3})]),_:3})]),_:3}))}});export{De as _};
