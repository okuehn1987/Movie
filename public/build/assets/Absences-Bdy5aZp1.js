import{_ as h}from"./AdminLayout.vue_vue_type_script_setup_true_lang-U5Nf1AVF.js";import{d as g,r as k,a as _,o,b as a,f as t,V as D,j as d,g as v,N as p,O as i,au as S,i as y,F as V,y as C,e as w,av as x,aw as E,h as u,t as n,q as b,ax as F,x as T,D as c,a6 as M,ao as N}from"./app-CDxl7bQp.js";import{_ as A}from"./UserShowNavBar.vue_vue_type_script_setup_true_lang-uDTFCTFc.js";import{u as B}from"./utils-Hc_rD-4g.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const L={class:"text-h6"},P={class:"font-weight-bold"},G={colspan:"4"},j=g({__name:"Absences",props:{user:{},absenceTypes:{}},setup(U){const m=k([]);return(s,f)=>(o(),_(h,{title:s.user.first_name+" "+s.user.last_name},{default:a(()=>[t(A,{user:s.user,tab:"absences"},null,8,["user"]),t(D,{"max-height":d(B)(48).value,class:"overflow-auto"},{default:a(()=>[t(v,null,{default:a(()=>[t(p,null,{default:a(()=>[t(i,{cols:"12"},{default:a(()=>[t(S,{elevation:"1",multiple:"",modelValue:m.value,"onUpdate:modelValue":f[0]||(f[0]=l=>m.value=l)},{default:a(()=>[(o(!0),y(V,null,C(s.absenceTypes,l=>(o(),y(V,{key:l.id},[s.user.absences.filter(e=>e.absence_type_id==l.id).reduce((e,r)=>e+r.usedDays,0)>0?(o(),_(x,{key:0},{default:a(()=>[t(E,null,{default:a(()=>[t(p,null,{default:a(()=>[t(i,{cols:"12",md:"11"},{default:a(()=>[u("h2",L,n(l.name),1)]),_:2},1024),t(i,{cols:"12",md:"1",style:{"place-self":"center"}},{default:a(()=>[b(n(s.user.absences.filter(e=>e.absence_type_id==l.id).reduce((e,r)=>e+r.usedDays,0))+" Tage ",1)]),_:2},1024)]),_:2},1024)]),_:2},1024),t(F,null,{default:a(()=>[t(T,{id:"userAbsenceTable",items:s.user.absences.filter(e=>e.absence_type_id==l.id).toSorted((e,r)=>r.start.localeCompare(e.start)).map(e=>{var r;return{...e,start:d(c).fromSQL(e.start).toFormat("dd.MM.yyyy"),end:d(c).fromSQL(e.end).toFormat("dd.MM.yyyy"),absence_type:(r=e.absence_type)==null?void 0:r.name,usedDays:e.usedDays.toString()}}),headers:[{title:"Start",key:"start"},{title:"Ende",key:"end"},{title:"Status",key:"status"},{title:"Art",key:"absence_type"},{title:"Genutzte Tage",key:"usedDays"}]},M({"item.status":a(({item:e})=>[t(N,{color:{accepted:"success",created:"warning",declined:"error"}[e.status]},{default:a(()=>[b(n({accepted:"Genehmigt",created:"Offen",declined:"Abgelehnt"}[e.status]),1)]),_:2},1032,["color"])]),_:2},[l.name=="Urlaub"?{name:"body.append",fn:a(()=>[u("tr",P,[u("td",G," Genutzte Urlaubstage f√ºr das Jahr "+n(d(c).now().year)+": ",1),u("td",null,n(s.user.usedLeaveDaysForYear+" von "+s.user.leaveDaysForYear),1)])]),key:"0"}:void 0]),1032,["items"])]),_:2},1024)]),_:2},1024)):w("",!0)],64))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["max-height"])]),_:1},8,["title"]))}});export{j as default};
