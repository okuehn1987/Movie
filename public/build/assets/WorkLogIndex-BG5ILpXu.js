import{A as f}from"./AdminLayout-DG5N3mqU.js";import{u as h,c as k}from"./utils-BTSF0Lgh.js";import{d as g,a as o,b as i,e as r,g as l,z as y,h as n,D as w,s as p,X as b,m as B,k as T,f as c,F as x,q as s,t as L,v as z}from"./app-DpJhE1MF.js";import"./ChatDetails-BcK7c5dy.js";import"./ChatMessage-DpV2UOgz.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const D=g({__name:"WorkLogIndex",props:{users:{}},setup(A){function a(t){var m;return t.current_working_hours?Math.round(t.default_time_account.balance/3600/(((m=t.current_working_hours)==null?void 0:m.weekly_working_hours)/t.userWorkingWeekCount)*10)/10:null}const _=h(0);return(t,m)=>(i(),o(f,{title:"Arbeitszeiten"},{default:r(()=>[l(y,{style:p({maxHeight:n(_)}),"fixed-header":"",hover:"",items:t.users.map(e=>({...e,timeAccountBalance:e.default_time_account.balance,lastAction:(e.latest_work_log.end?"Gehen":"Kommen")+(e.latest_work_log.is_home_office?" Homeoffice":""),time:n(w).fromSQL(e.latest_work_log.end?e.latest_work_log.end:e.latest_work_log.start).toFormat("dd.MM.yyyy HH:mm"),timeBalanceTrafficLight:e.time_balance_red_threshold!==null&&e.time_balance_yellow_threshold!==null?Math.abs(e.default_time_account.balance)>=e.time_balance_red_threshold*3600?"error":Math.abs(e.default_time_account.balance)>=e.time_balance_yellow_threshold*3600?"warning":"success":null,userWorkingWeekCount:Object.entries(e.current_working_week??{}).filter(([u,d])=>["monday","tuesday","wednesday","thursday","friday","saturday","sunday"].includes(u)&&d).length})),headers:[{title:"",key:"isPresent",sortable:!1},{title:"Vorname",key:"first_name"},{title:"Nachname",key:"last_name"},{title:"",key:"timeBalanceTrafficLight",align:"end",width:"1px"},{title:"Gleitzeitkonto",key:"timeAccountBalance"},{title:"Letzte Buchung",key:"lastAction"},{title:"Uhrzeit",key:"time"},{title:"",key:"actions",sortable:!1,align:"end"}]},{"item.isPresent":r(({item:e})=>[l(s,{icon:"mdi-circle",color:e.latest_work_log.end?"error":"success",size:"md"},null,8,["color"])]),"item.timeAccountBalance":r(({item:e})=>[L(z(n(k)(e.default_time_account.balance)),1)]),"item.timeBalanceTrafficLight":r(({item:e})=>[e.timeBalanceTrafficLight?(i(),T(x,{key:0},[e.timeBalanceTrafficLight==="success"?(i(),o(s,{key:0,icon:"mdi-clock-time-three",color:"success",size:"x-large",title:a(e)?a(e)+" PT":"/"},null,8,["title"])):c("",!0),e.timeBalanceTrafficLight==="warning"?(i(),o(s,{key:1,icon:"mdi-clock-time-five",color:"warning",size:"x-large",title:a(e)?a(e)+" PT":"/"},null,8,["title"])):c("",!0),e.timeBalanceTrafficLight==="error"?(i(),o(s,{key:2,icon:"mdi-clock-time-nine",color:"error",size:"x-large",title:a(e)?a(e)+" PT":"/"},null,8,["title"])):c("",!0)],64)):c("",!0)]),"item.actions":r(({item:e})=>[l(n(b),{href:t.route("user.workLog.index",{user:e.id,fromUserWorkLogs:!0})},{default:r(()=>[l(B,{color:"primary",variant:"text",icon:"mdi-eye"})]),_:1},8,["href"])]),_:1},8,["style","items"])]),_:1}))}});export{D as default};
