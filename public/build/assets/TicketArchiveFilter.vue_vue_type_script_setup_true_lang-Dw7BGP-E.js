import{d as B,r as c,a as b,b as k,S,e as l,g as t,V as U,i as A,K,p as y,j as f,L as N,f as $,M as n,O as w,h as r,av as j,P as C,m as u,t as d,q as x,R as z,B as _}from"./app-VJNhXN4_.js";const D={class:"d-flex ga-2 justify-end"},M=B({__name:"TicketArchiveFilter",props:{customers:{},users:{},operatingSites:{}},setup(F){var g;const V=F,a=useForm({customer_id:V.customers.length==1?((g=V.customers[0])==null?void 0:g.id)??null:null,assignees:[],start:null,end:null}),i=c("");function T(){a.reset(),v()}function v(){_.reload({only:["archiveTickets"],data:{page:1,openTicket:null,tab:"archive",...a.data()},onSuccess:()=>{m.value=!1}})}const m=c(!1);return(p,e)=>(k(),b(S,{"max-width":"1000",modelValue:m.value,"onUpdate:modelValue":e[6]||(e[6]=o=>m.value=o)},{activator:l(({props:o})=>[t(u,z(o,{variant:"flat",color:"primary"}),{default:l(()=>[t(x,null,{default:l(()=>[...e[7]||(e[7]=[d("mdi-filter",-1)])]),_:1})]),_:1},16)]),default:l(({isActive:o})=>[t(U,null,{title:l(()=>[...e[8]||(e[8]=[f("div",{class:"d-flex justify-space-between align-center w-100"},[f("span",null,"Im Archiv suchen")],-1)])]),append:l(()=>[t(u,{icon:"",variant:"text",onClick:s=>o.value=!1},{default:l(()=>[t(x,null,{default:l(()=>[...e[9]||(e[9]=[d("mdi-close",-1)])]),_:1})]),_:1},8,["onClick"])]),default:l(()=>[t(A,null,{default:l(()=>[t(K,{onSubmit:y(v,["prevent"])},{default:l(()=>[t(N,null,{default:l(()=>[p.customers.length>1?(k(),b(n,{key:0,cols:"12"},{default:l(()=>[t(w,{clearable:"",label:"Kunde wählen",items:p.customers.map(s=>({value:s.id,title:s.name})),modelValue:r(a).customer_id,"onUpdate:modelValue":e[0]||(e[0]=s=>r(a).customer_id=s),"error-messages":r(a).errors.customer_id},null,8,["items","modelValue","error-messages"])]),_:1})):$("",!0),t(n,{cols:"12"},{default:l(()=>[t(w,{label:"Bearbeitet von",multiple:"",clearable:"",chips:"",items:p.users.map(s=>({value:s.id,title:`${s.first_name} ${s.last_name}`})),"error-messages":r(a).errors.assignees,modelValue:r(a).assignees,"onUpdate:modelValue":e[1]||(e[1]=s=>r(a).assignees=s),"auto-select-first":"",onKeydown:e[2]||(e[2]=j(s=>i.value="",["enter"])),search:i.value,"onUpdate:search":e[3]||(e[3]=s=>i.value=s)},null,8,["items","error-messages","modelValue","search"])]),_:1}),t(n,{cols:"12",md:"6"},{default:l(()=>[t(C,{type:"date",label:"von",modelValue:r(a).start,"onUpdate:modelValue":e[4]||(e[4]=s=>r(a).start=s),"error-messages":r(a).errors.start},null,8,["modelValue","error-messages"])]),_:1}),t(n,{cols:"12",md:"6"},{default:l(()=>[t(C,{type:"date",label:"bis",modelValue:r(a).end,"onUpdate:modelValue":e[5]||(e[5]=s=>r(a).end=s),"error-messages":r(a).errors.end},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),f("div",D,[t(u,{titel:"Abbrechen",color:"error",onClick:y(T,["stop"])},{default:l(()=>[...e[10]||(e[10]=[d("Filter zurücksetzen",-1)])]),_:1}),t(u,{titel:"Suchen",type:"submit",color:"primary"},{default:l(()=>[...e[11]||(e[11]=[d("Tickets anzeigen",-1)])]),_:1})])]),_:1})]),_:1})]),_:2},1024)]),_:1},8,["modelValue"]))}});export{M as _};
