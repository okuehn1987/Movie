import{d as S,r as i,o as d,E as w,e as s,b as o,u as m,R as D,c as y,v as H,k as V,G as L,Q as N,D as f,f as p,g as _,h as v,A as x,q as A,m as h,V as B,H as E}from"./app-cAe7VMGE.js";const Q=S({__name:"WorkLogPatches",props:{patches:{}},setup(b){var g;const k=b,a=i(((g=k.patches)==null?void 0:g.find(l=>l.id==Number(route().params.openPatch)))??null),r=i(!!a.value),P=i(!1),n=i(1);function C(l,t){var u;const e=(u=k.patches)==null?void 0:u.find(M=>M.id===t.item.id);e&&(a.value=e,r.value=!0)}function c(l){a.value&&E.patch(route("workLogPatch.update",{workLogPatch:a.value.id}),{accepted:l},{onSuccess:()=>{r.value=!1,P.value=!0}})}return(l,t)=>(d(),w(L,null,[s(D,{hover:"","items-per-page":"5",page:n.value,"onUpdate:page":t[1]||(t[1]=e=>n.value=e),"no-data-text":"keine Zeitkorrekturen vorhanden.","onClick:row":C,items:l.patches.map(e=>({id:e.id,user:e.user.first_name+" "+e.user.last_name,date:m(f).fromSQL(e.start).toFormat("dd.MM.yyyy")})),headers:[{title:"Mitarbeiter",key:"user"},{title:"Datum",key:"date"}]},{bottom:o(()=>[l.patches.length>5?(d(),y(N,{key:0,modelValue:n.value,"onUpdate:modelValue":t[0]||(t[0]=e=>n.value=e),length:Math.ceil(l.patches.length/5)},null,8,["modelValue","length"])):V("",!0)]),_:1},8,["page","items"]),a.value?(d(),y(H,{key:0,modelValue:r.value,"onUpdate:modelValue":t[5]||(t[5]=e=>r.value=e),"max-width":"1000"},{default:o(()=>[s(B,{title:"Zeitkorrektur von "+a.value.user.first_name+" "+a.value.user.last_name},{append:o(()=>[s(p,{icon:"",variant:"text",onClick:t[2]||(t[2]=e=>r.value=!1)},{default:o(()=>[s(_,null,{default:o(()=>t[6]||(t[6]=[v("mdi-close")])),_:1})]),_:1})]),default:o(()=>[s(x,{headers:[{title:"",key:"version",sortable:!1},{title:"Start",key:"start",sortable:!1},{title:"Ende",key:"end",sortable:!1},{title:"Homeoffice",key:"is_home_office",sortable:!1}],items:[a.value.work_log,a.value].map((e,u)=>({version:u==0?"Alter Stand:":"Neuer Stand:",start:m(f).fromSQL(e.start).toFormat("dd.MM.yyyy HH:mm"),end:e.end?m(f).fromSQL(e.end).toFormat("dd.MM.yyyy HH:mm"):"kein Ende",is_home_office:e.is_home_office?"Ja":"Nein"}))},null,8,["items"]),s(A,{cols:"12",class:"d-flex justify-end ga-3"},{default:o(()=>[s(p,{color:"error",onClick:t[3]||(t[3]=h(e=>c(!1),["stop"]))},{default:o(()=>t[7]||(t[7]=[v("Ablehnen")])),_:1}),s(p,{color:"success",onClick:t[4]||(t[4]=h(e=>c(!0),["stop"]))},{default:o(()=>t[8]||(t[8]=[v("Akzeptieren")])),_:1})]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])):V("",!0)],64))}});export{Q as _};
