import{d as $,a as u,o as i,I as U,b as r,f as t,V as W,p as N,g as H,B as R,k as d,u as l,M as j,N as w,O as _,Y as E,a6 as J,j as v,m as k,l as h,h as p,a7 as K,a8 as Q,v as A,e as f,a9 as D,F as z,x as Y,a3 as I,aa as Z,H as L,a4 as V,y as b,ab as T,t as y,K as C,D as q,ac as G,r as S,ad as X,w as ee,ae,Q as te,R as oe,af as re,S as F,ag as se,T as B,ah as P,ai as ne,aj as le,L as x}from"./app-D-CalFh6.js";import{a as ie}from"./utils-B4angkH8.js";import{_ as ue}from"./_plugin-vue_export-helper-DlAUqK2U.js";const de=$({__name:"ReportBugDialog",setup(M){const e=useForm({location:null,summary:null,description:null,attachments:[]});return(m,n)=>(i(),u(U,{"max-width":"1000"},{activator:r(({props:c})=>[p("div",K(Q(c)),[t(h,{icon:"mdi-bug",class:"me-2"}),n[4]||(n[4]=k(" Fehler melden ",-1))],16)]),default:r(({isActive:c})=>[t(W,{title:"Fehler melden"},{append:r(()=>[t(v,{icon:"",variant:"text",onClick:a=>c.value=!1},{default:r(()=>[t(h,null,{default:r(()=>[...n[5]||(n[5]=[k("mdi-close",-1)])]),_:1})]),_:1},8,["onClick"])]),default:r(()=>[t(N),t(H,null,{default:r(()=>[t(R,{onSubmit:d(a=>{l(e).post(m.route("reportBug.store"),{onSuccess:()=>{c.value=!1,l(e).reset()}})},["prevent"])},{default:r(()=>[t(j,null,{default:r(()=>[t(w,{cols:"12"},{default:r(()=>[t(_,{modelValue:l(e).location,"onUpdate:modelValue":n[0]||(n[0]=a=>l(e).location=a),errorMessages:l(e).errors.location,label:"Wo ist der Fehler aufgetreten?"},null,8,["modelValue","errorMessages"])]),_:1}),t(w,{cols:"12"},{default:r(()=>[t(_,{modelValue:l(e).summary,"onUpdate:modelValue":n[1]||(n[1]=a=>l(e).summary=a),errorMessages:l(e).errors.summary,label:"Fasse den Fehler zusammen"},null,8,["modelValue","errorMessages"])]),_:1}),t(w,{cols:"12"},{default:r(()=>[t(E,{modelValue:l(e).description,"onUpdate:modelValue":n[2]||(n[2]=a=>l(e).description=a),errorMessages:l(e).errors.description,label:"Zus채tzliche Informationen zum Fehler"},null,8,["modelValue","errorMessages"])]),_:1}),t(w,{cols:"12"},{default:r(()=>[t(J,{modelValue:l(e).attachments,"onUpdate:modelValue":n[3]||(n[3]=a=>l(e).attachments=a),errorMessages:Object.entries(l(e).errors).filter(([a,o])=>a.includes("attachments")&&o).map(([a])=>"Alle Dateien m체ssen ein Bild sein."),label:"Anhang",multiple:"",accept:"image/*"},null,8,["modelValue","errorMessages"])]),_:1}),t(w,{cols:"12",class:"text-end"},{default:r(()=>[t(v,{type:"submit",color:"primary"},{default:r(()=>[...n[6]||(n[6]=[k("Absenden",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:2},1024)]),_:2},1024)]),_:1}))}}),pe={class:"ms-4 ga-4 d-flex"},me={key:1,style:{width:"48px"}},ge=$({__name:"AppbarActions",setup(M){function e(a){b.post(route("notification.update",{notification:a.id}))}function m(a){let o;if(a.type=="App\\Notifications\\WorkLogPatchNotification")o=route("dispute.index",{openPatch:a.data.work_log_patch_id});else if(a.type=="App\\Notifications\\WorkLogNotification")o=route("dispute.index",{openWorkLog:a.data.work_log_id});else if(a.type=="App\\Notifications\\AbsenceNotification")o=route("dispute.index",{openAbsence:a.data.absence_id});else if(a.type=="App\\Notifications\\AbsencePatchNotification")o=route("dispute.index",{openAbsencePatch:a.data.absence_patch_id});else if(a.type=="App\\Notifications\\AbsenceDeleteNotification")o=route("dispute.index",{openAbsenceDelete:a.data.absence_id});else if(a.type=="App\\Notifications\\DisputeStatusNotification"){if(a.data.type=="delete")return;a.data.log_model=="App\\Models\\Absence"?o=route("absence.index",{openAbsence:a.data.log_id}):a.data.log_model=="App\\Models\\AbsencePatch"?o=route("absence.index",{openAbsencePatch:a.data.log_id}):a.data.log_model=="App\\Models\\WorkLogPatch"?o=route("user.workLog.index",{user:C().props.auth.user.id,openWorkLogPatch:a.data.log_id}):a.data.log_model=="App\\Models\\WorkLog"&&(o=route("user.workLog.index",{user:C().props.auth.user.id,workLog:a.data.log_id}))}return o&&b.get(o,{},{onSuccess:()=>e(a)})}const n=ie();function c(a){const o=q.fromISO(a.created_at),s=n.value.diff(o);return s.as("minutes")<1?"Jetzt":s.as("hours")<1?"vor "+Math.floor(s.as("minutes"))+" minuten":o.day!==n.value.day||o.month!==n.value.month||o.year!==n.value.year?o.toFormat("dd.MM - HH:mm")+" Uhr":o.toFormat("HH:mm")+" Uhr"}return(a,o)=>(i(),A(z,null,[a.$page.props.unreadNotifications.length>0?(i(),u(D,{key:0},{activator:r(({props:s})=>[t(v,L({color:"primary"},s,{stacked:""}),{default:r(()=>[t(Z,{content:a.$page.props.unreadNotifications.length,color:"error"},{default:r(()=>[t(h,{icon:"mdi-bell"})]),_:1},8,["content"])]),_:2},1040)]),default:r(()=>[t(I,{onClick:d(()=>{},["stop"])},{default:r(()=>[(i(!0),A(z,null,Y(a.$page.props.unreadNotifications.toSorted((s,g)=>g.created_at.localeCompare(s.created_at)),(s,g)=>(i(),A(z,{key:s.id},[g!=0?(i(),u(N,{key:0})):f("",!0),t(V,null,{append:r(()=>[p("div",pe,[t(N,{vertical:""}),s.type!="App\\Notifications\\DisputeStatusNotification"||s.type=="App\\Notifications\\DisputeStatusNotification"&&s.data.type!="delete"?(i(),u(v,{key:0,color:"primary",icon:"mdi-eye",variant:"tonal",onClick:d(O=>m(s),["stop"])},null,8,["onClick"])):(i(),A("div",me)),t(v,{color:"error",icon:"mdi-delete",variant:"tonal",onClick:d(O=>e(s),["stop"])},null,8,["onClick"])])]),default:r(()=>[t(T,null,{default:r(()=>[p("div",null,y(s.data.title),1),p("div",null,[p("sub",null,y(c(s)),1)])]),_:2},1024)]),_:2},1024)],64))),128))]),_:1})]),_:1})):f("",!0),t(D,null,{activator:r(({props:s})=>[t(v,L({stacked:"",color:"black","prepend-icon":"mdi-menu"},s),null,16)]),default:r(()=>[t(I,null,{default:r(()=>[t(V,{onClick:o[0]||(o[0]=d(s=>l(b).get(a.route("user.profile",{user:a.$page.props.auth.user.id})),["stop"]))},{default:r(()=>[t(h,{icon:"mdi-account",class:"me-2"}),o[2]||(o[2]=k(" Profil ",-1))]),_:1}),t(V,{onClick:d(()=>{},["stop"])},{default:r(()=>[t(de)]),_:1}),t(V,{onClick:o[1]||(o[1]=d(s=>l(b).post(a.route("logout")),["stop"]))},{default:r(()=>[t(h,{icon:"mdi-logout",class:"me-2"}),o[3]||(o[3]=k(" Abmelden ",-1))]),_:1})]),_:1})]),_:1})],64))}}),ce=$({__name:"DrawerMenu",setup(M){return(e,m)=>(i(),u(I,{nav:"","onClick:select":m[0]||(m[0]=n=>l(b).get(n.id)),items:[{props:{active:e.route().current("dashboard"),prependIcon:"mdi-view-dashboard"},value:e.route("dashboard"),title:"Dashboard"},e.can("absence","viewIndex")&&{props:{active:e.route().current("absence.index"),prependIcon:"mdi-timer-cancel-outline"},value:e.route("absence.index"),title:"Abwesenheiten"},e.can("workLog","viewIndex")&&{props:{active:e.route().current("workLog.index"),prependIcon:"mdi-clock-outline"},value:e.route("workLog.index"),title:"Arbeitszeiten"},e.can("dispute","viewIndex")&&{props:{active:e.route().current("dispute.index"),prependIcon:"mdi-bookmark-outline"},value:e.route("dispute.index"),title:"Antr채ge"},e.can("organization","viewShow")&&{title:"Organisation",subtitle:"test",value:e.route("organization.show",{organization:e.$page.props.organization.id}),props:{prependIcon:"mdi-domain",active:e.route().current("organization.show")}},e.can("operatingSite","viewIndex")&&{props:{active:e.route().current("operatingSite.index"),prependIcon:"mdi-map-marker"},value:e.route("operatingSite.index"),title:"Betriebsst채tten"},e.can("group","viewIndex")&&{props:{active:e.route().current("group.index"),prependIcon:"mdi-dots-circle"},value:e.route("group.index"),title:"Abteilungen"},e.can("user","viewIndex")&&{props:{active:e.route().current("user.index"),prependIcon:"mdi-account-group"},value:e.route("user.index"),title:"Mitarbeitende"},e.can("user","viewIndex")&&{props:{prependIcon:"mdi-tree",active:e.route().current("organization.tree")},value:e.route("organization.tree",{organization:e.$page.props.organization.id}),title:"Organigramm"},...e.can("organization","viewIndex")?[{type:"divider"},{type:"subheader",title:"Super-Admin"},{props:{prependIcon:"mdi-security",active:e.route().current("organization.index")},value:e.route("organization.index"),title:"Organisationen"}]:[]].filter(Boolean)},null,8,["items"]))}}),fe=ue(ce,[["__scopeId","data-v-d2eb9acd"]]),ve={class:"d-flex align-center"},be={class:"text-center font-weight-medium"},ke={class:"d-flex align-center mr-auto ga-2"},ye={class:"text-h6 pl-0 ml-5 mb-0",style:{"white-space":"nowrap"}},Ae=$({__name:"AdminLayout",props:{title:{},backurl:{}},setup(M){const e=C(),m=G().smAndDown,n=S(!m.value),c="Herta";X(1e3*60*2,{only:["unreadNotifications"]},{keepAlive:!0});const a=S(!!e.props.organization.logo);return ee(()=>e.props.organization.logo,()=>{a.value=!1,ae(()=>a.value=!0)}),(o,s)=>(i(),u(te,null,{default:r(()=>[t(l(oe),{title:o.title},null,8,["title"]),t(re,{color:"background",style:{border:"none"},modelValue:n.value,"onUpdate:modelValue":s[2]||(s[2]=g=>n.value=g),image:"/img/loggedin-background.png"},{default:r(()=>[t(I,null,{default:r(()=>[t(V,{onClick:s[1]||(s[1]=d(g=>l(b).get("/"),["stop"]))},{prepend:r(()=>[t(F,{src:"/img/logo-symbol.png",style:{width:"24px"},class:"me-8"})]),append:r(()=>[t(v,{onClick:s[0]||(s[0]=d(g=>n.value=!1,["stop"])),icon:"mdi-close",variant:"text"})]),default:r(()=>[t(T,null,{default:r(()=>[p("div",ve,[p("h1",be,[p("span",null,y(l(c)),1)])])]),_:1})]),_:1})]),_:1}),t(N),t(fe)]),_:1},8,["modelValue"]),t(se,{elevation:"0",color:"background"},{default:r(()=>[!n.value||l(m)?(i(),u(P,{key:0,variant:"text",onClick:s[3]||(s[3]=d(g=>n.value=!n.value,["stop"]))})):f("",!0),o.backurl?(i(),u(P,{key:1,variant:"text",icon:"mdi-arrow-left",onClick:s[4]||(s[4]=d(g=>l(b).visit(o.backurl,{preserveState:!0}),["stop"]))})):f("",!0),p("div",ke,[p("span",ye,y(o.title),1),a.value?(i(),u(F,{key:0,src:o.route("organization.getLogo",{organization:o.$page.props.organization.id,key:o.$page.props.organization.logo}),"max-height":"48px","max-width":"48px",width:"100%",height:"100%",class:"rounded"},null,8,["src"])):f("",!0)]),B(o.$slots,"appbarActions"),t(ge)]),_:3}),t(ne,null,{default:r(()=>[t(le,{class:"pt-0",fluid:""},{default:r(()=>[o.$page.props.flash.error?(i(),u(x,{type:"error",closable:"",class:"mb-6",key:Math.random()},{default:r(()=>[k(y(o.$page.props.flash.error),1)]),_:1})):f("",!0),o.$page.props.flash.success?(i(),u(x,{type:"success",closable:"",class:"mb-6",key:Math.random()},{default:r(()=>[k(y(o.$page.props.flash.success),1)]),_:1})):f("",!0),B(o.$slots,"default")]),_:3})]),_:3})]),_:3}))}});export{Ae as _};
