import{d as h,a as p,o as l,Q as O,b as t,f as o,V as U,x as N,g as R,J as j,m,i as r,K,L as V,O as C,a1 as W,a2 as Z,l as y,s as v,p as g,h as c,a8 as E,a9 as J,u as T,j as P,a7 as Q,A as w,aa as z,ab as I,P as X,ac as Y,F as q,R as G,r as F,ad as H,w as _,ae as ee,c as oe,W as te,X as ae,af as re,e as b,ag as ne,t as A,n as L,Y as S,ah as se,Z as B,ai as D,aj as ie,ak as le,S as x}from"./app-DpliNvEz.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ue=h({__name:"ReportBugDialog",setup($){const e=useForm({location:null,summary:null,description:null,attachments:[]});return(s,a)=>(l(),p(O,{"max-width":"1000"},{activator:t(({props:u})=>[c("div",E(J(u)),[o(g,{icon:"mdi-bug",class:"me-2"}),a[4]||(a[4]=v(" Fehler melden ",-1))],16)]),default:t(({isActive:u})=>[o(U,{title:"Fehler melden"},{append:t(()=>[o(y,{icon:"",variant:"text",onClick:i=>{u.value=!1,r(e).reset()}},{default:t(()=>[o(g,null,{default:t(()=>[...a[5]||(a[5]=[v("mdi-close",-1)])]),_:1})]),_:1},8,["onClick"])]),default:t(()=>[o(N),o(R,null,{default:t(()=>[o(j,{onSubmit:m(i=>{r(e).post(s.route("reportBug.store"),{onSuccess:()=>{u.value=!1,r(e).reset()}})},["prevent"])},{default:t(()=>[o(K,null,{default:t(()=>[o(V,{cols:"12"},{default:t(()=>[o(C,{modelValue:r(e).location,"onUpdate:modelValue":a[0]||(a[0]=i=>r(e).location=i),errorMessages:r(e).errors.location,label:"Wo ist der Fehler aufgetreten?"},null,8,["modelValue","errorMessages"])]),_:1}),o(V,{cols:"12"},{default:t(()=>[o(C,{modelValue:r(e).summary,"onUpdate:modelValue":a[1]||(a[1]=i=>r(e).summary=i),errorMessages:r(e).errors.summary,label:"Fasse den Fehler zusammen"},null,8,["modelValue","errorMessages"])]),_:1}),o(V,{cols:"12"},{default:t(()=>[o(W,{modelValue:r(e).description,"onUpdate:modelValue":a[2]||(a[2]=i=>r(e).description=i),errorMessages:r(e).errors.description,label:"Zus채tzliche Informationen zum Fehler"},null,8,["modelValue","errorMessages"])]),_:1}),o(V,{cols:"12"},{default:t(()=>[o(Z,{modelValue:r(e).attachments,"onUpdate:modelValue":a[3]||(a[3]=i=>r(e).attachments=i),errorMessages:Object.entries(r(e).errors).filter(([i,f])=>i.includes("attachments")&&f).map(([i])=>"Alle Dateien m체ssen ein Bild sein."),label:"Anhang",multiple:"",accept:"image/*"},null,8,["modelValue","errorMessages"])]),_:1}),o(V,{cols:"12",class:"text-end"},{default:t(()=>[o(y,{type:"submit",color:"primary"},{default:t(()=>[...a[6]||(a[6]=[v("Absenden",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:2},1024)]),_:2},1024)]),_:1}))}}),pe=h({__name:"AppbarActions",setup($){const e=T();return(s,a)=>(l(),P(q,null,[o(y,{color:"primary",stacked:"",onClick:a[0]||(a[0]=m(u=>r(w).get(s.route("notification.index")),["stop"]))},{default:t(()=>[s.$page.props.unreadNotifications.length>0?(l(),p(Q,{key:0,content:s.$page.props.unreadNotifications.length,color:"error"},{default:t(()=>[o(g,{icon:"mdi-bell"})]),_:1},8,["content"])):(l(),p(g,{key:1,icon:"mdi-bell"}))]),_:1}),o(Y,{location:r(e).smAndDown.value?"bottom left":"bottom"},{activator:t(({props:u})=>[o(y,X({stacked:"",color:"black","prepend-icon":"mdi-account-details"},u),null,16)]),default:t(()=>[o(z,{"min-width":"200px"},{default:t(()=>[o(I,{onClick:a[1]||(a[1]=m(u=>r(w).get(s.route("user.profile",{user:s.$page.props.auth.user.id})),["stop"]))},{default:t(()=>[o(g,{icon:"mdi-account",class:"me-2"}),a[3]||(a[3]=v(" Profil ",-1))]),_:1}),o(I,{onClick:m(()=>{},["stop"])},{default:t(()=>[o(ue)]),_:1}),o(I,{onClick:a[2]||(a[2]=m(u=>r(w).post(s.route("logout")),["stop"]))},{default:t(()=>[o(g,{icon:"mdi-logout",class:"me-2"}),a[4]||(a[4]=v(" Abmelden ",-1))]),_:1})]),_:1})]),_:1},8,["location"])],64))}}),de=M(pe,[["__scopeId","data-v-e0e7de1f"]]),me=h({__name:"DrawerMenu",setup($){return(e,s)=>(l(),p(z,{nav:"","onClick:select":s[0]||(s[0]=a=>r(w).get(a.id)),items:[{props:{active:e.route().current("dashboard"),prependIcon:"mdi-view-dashboard"},value:e.route("dashboard"),title:"Dashboard"},...e.$page.props.currentAppModule=="tide"?[e.can("workLog","viewIndex")&&{props:{active:e.route().current("workLog.index"),prependIcon:"mdi-clock-outline"},value:e.route("workLog.index"),title:"Arbeitszeiten"}]:[],...e.$page.props.currentAppModule=="flow"?[e.can("customer","viewIndex")&&{props:{active:e.route().current("customer.index"),prependIcon:"mdi-folder-account-outline"},value:e.route("customer.index"),title:"Kundenliste"},{props:{active:e.route().current("ticket.index"),prependIcon:"mdi-ticket-account"},value:e.route("ticket.index"),title:"Tickets"}]:[],e.can("dispute","viewIndex")&&{props:{active:e.route().current("dispute.index"),prependIcon:"mdi-bookmark-outline"},value:e.route("dispute.index"),title:"Antr채ge"},e.can("absence","viewIndex")&&{props:{active:e.route().current("absence.index"),prependIcon:"mdi-timer-cancel-outline"},value:e.route("absence.index"),title:"Abwesenheiten"},e.can("organization","viewShow")&&{title:"Organisation",value:e.route("organization.show",{organization:e.$page.props.organization.id}),props:{prependIcon:"mdi-domain",active:e.route().current("organization.show")}},e.can("operatingSite","viewIndex")&&{props:{active:e.route().current("operatingSite.index"),prependIcon:"mdi-map-marker"},value:e.route("operatingSite.index"),title:"Betriebsst채tten"},e.can("group","viewIndex")&&{props:{active:e.route().current("group.index"),prependIcon:"mdi-dots-circle"},value:e.route("group.index"),title:"Abteilungen"},e.can("user","viewIndex")&&{props:{active:e.route().current("user.index"),prependIcon:"mdi-account-group"},value:e.route("user.index"),title:"Mitarbeitende"},e.can("user","viewIndex")&&{props:{prependIcon:"mdi-tree",active:e.route().current("organization.tree")},value:e.route("organization.tree",{organization:e.$page.props.organization.id}),title:"Organigramm"},...e.can("organization","viewIndex")?[{type:"divider"},{type:"subheader",title:"Super-Admin"},{props:{prependIcon:"mdi-security",active:e.route().current("organization.index")},value:e.route("organization.index"),title:"Organisationen"}]:[]].filter(Boolean)},null,8,["items"]))}}),ce=M(me,[["__scopeId","data-v-a7f0e367"]]),ge={key:0,class:"posiion-relative",style:{width:"56px"}},ve={class:"d-flex align-center"},fe={class:"text-center text-h5 font-weight-medium"},be={style:{"user-select":"none"}},we={class:"d-flex align-center mr-auto ga-2"},ke={class:"text-h6 ps-0 mx-md-5 px-2 mb-0",style:{"text-overflow":"ellipsis",overflow:"hidden","white-space":"nowrap","max-width":"calc(100vw - 72px - 72px - 52px)"}},Ve=h({__name:"AdminLayout",props:{title:{},backurl:{}},setup($){const e=G(),s=T().smAndDown,a=F(!s.value);H(1e3*60*2,{only:["unreadNotifications"]},{keepAlive:!0});const u=F(!!e.props.organization.logo);_(()=>e.props.organization.logo,()=>{u.value=!1,ee(()=>u.value=!0)});function i(n){w.post(route("switchAppModule",{module:n}),{preserveState:!0,preserveScroll:!0,replace:!0})}const f=oe(()=>e.props.appModules.find(n=>n.value===e.props.currentAppModule));return(n,d)=>(l(),p(te,null,{default:t(()=>[o(r(ae),{title:n.title},null,8,["title"]),o(re,{color:"background",style:{border:"none"},modelValue:a.value,"onUpdate:modelValue":d[2]||(d[2]=k=>a.value=k),image:"/img/loggedin-background.png"},{default:t(()=>[f.value?(l(),p(z,{key:0},{default:t(()=>[o(I,{onClick:d[1]||(d[1]=m(k=>i(n.$page.props.currentAppModule=="tide"?"flow":"tide"),["stop"])),class:"pe-2"},{prepend:t(()=>[r(e).props.appModules.length==2?(l(),P("div",ge,[c("img",{src:"/img/Tide-Logo.webp",id:"tide-logo",class:L({ActiveLogo:f.value.value=="tide"})},null,2),o(g,{icon:"mdi-undo",style:{top:"0",position:"absolute",rotate:"-20deg",scale:"0.8"}}),c("img",{src:"/img/Flow-Logo.webp",id:"flow-logo",class:L({ActiveLogo:f.value.value=="flow"})},null,2),o(g,{icon:"mdi-undo",style:{top:"25px",left:"40px",position:"absolute",rotate:"140deg",scale:"0.8"}})])):(l(),p(S,{key:1,width:"24px",class:"me-8",src:"/img/logo-symbol.png"}))]),append:t(()=>[o(y,{onClick:d[0]||(d[0]=m(k=>a.value=!1,["stop"])),icon:"mdi-close",variant:"text"})]),default:t(()=>[o(ne,null,{default:t(()=>[c("div",ve,[c("h1",fe,[c("span",be,A(f.value.title),1)])])]),_:1})]),_:1})]),_:1})):b("",!0),o(N),o(ce)]),_:1},8,["modelValue"]),o(se,{elevation:"0",color:"background"},{default:t(()=>[!a.value||r(s)?(l(),p(D,{key:0,variant:"text",onClick:d[3]||(d[3]=m(k=>a.value=!a.value,["stop"]))})):b("",!0),n.backurl?(l(),p(D,{key:1,variant:"text",icon:"mdi-arrow-left",onClick:d[4]||(d[4]=m(k=>r(w).visit(n.backurl,{preserveState:!0}),["stop"]))})):b("",!0),c("div",we,[c("span",ke,A(n.title),1),u.value?(l(),p(S,{key:0,src:n.route("organization.getLogo",{organization:n.$page.props.organization.id,key:n.$page.props.organization.logo}),"max-height":"48px","max-width":"48px",width:"100%",height:"100%",class:"rounded"},null,8,["src"])):b("",!0)]),B(n.$slots,"appbarActions",{},void 0,!0),o(de)]),_:3}),o(ie,null,{default:t(()=>[o(le,{class:"pt-0",fluid:""},{default:t(()=>[n.$page.props.flash.error?(l(),p(x,{type:"error",closable:"",class:"mb-6",key:Math.random()},{default:t(()=>[v(A(n.$page.props.flash.error),1)]),_:1})):b("",!0),n.$page.props.flash.success?(l(),p(x,{type:"success",closable:"",class:"mb-6",key:Math.random()},{default:t(()=>[v(A(n.$page.props.flash.success),1)]),_:1})):b("",!0),B(n.$slots,"default",{},void 0,!0)]),_:3})]),_:3})]),_:3}))}}),Ie=M(Ve,[["__scopeId","data-v-1cab38d9"]]);export{Ie as A};
