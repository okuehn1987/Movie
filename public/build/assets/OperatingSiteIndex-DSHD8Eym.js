import{d as v,P as z,T as B,o as m,c as f,w as t,b as e,y as C,u as r,q as A,e as n,R as N,f as y,V as _,g as k,U as P,h as T,k as w,l as R,m as D,n as d,s as p,B as u,W as E,C as F,j as x,A as L,J as $,S as h}from"./app-Cnt5irAF.js";import{_ as j}from"./ConfirmDelete.vue_vue_type_script_setup_true_lang-8SMKQLmi.js";import{_ as H}from"./AdminLayout.vue_vue_type_script_setup_true_lang-YffiHutA.js";import{a as I,f as M}from"./utils-yjZTfaxM.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const G=v({__name:"OperatingSiteIndex",props:{operatingSites:{},success:{}},setup(S){const c=S,{currentPage:i,lastPage:V,data:g}=I(z(c),"operatingSites"),l=B({address_suffix:"",city:"",country:"",email:"",fax:"",federal_state:"",house_number:"",is_head_quarter:!1,phone_number:"",street:"",zip:"",name:""});function q(){l.post(route("operatingSite.store"),{onSuccess:()=>l.reset()})}return(b,s)=>(m(),f(H,{title:"Betriebsstätten"},{default:t(()=>[e(_,null,{default:t(()=>[e(C,{hover:"",headers:[{title:"#",key:"id"},{title:"Name",key:"name"},{title:"Anschrift",key:"streetAddress"},{title:"Stadt",key:"cityAddress"},{title:"Land",key:"country"},{title:"Email",key:"email"},{title:"Telefonnummer",key:"phone_number"},{title:"",key:"action",align:"end"}],items:r(g).map(o=>{const a=o.street&&o.house_number?o.street+" "+o.house_number:"/",U=o.zip&&o.city?o.zip+" "+o.city:"/";return{...r(M)(o),streetAddress:a,cityAddress:U}})},{"header.action":t(()=>[e(A,{"max-width":"1000"},{activator:t(({props:o})=>[e(n,N(o,{color:"primary"}),{default:t(()=>[e(y,{icon:"mdi-plus"})]),_:2},1040)]),default:t(({isActive:o})=>[e(_,{title:"Betriebsstätte erstellen"},{append:t(()=>[e(n,{icon:"",variant:"text",onClick:a=>o.value=!1},{default:t(()=>[e(y,null,{default:t(()=>s[12]||(s[12]=[k("mdi-close")])),_:1})]),_:2},1032,["onClick"])]),default:t(()=>[e(P),e(T,null,{default:t(()=>[e(w,{onSubmit:R(q,["prevent"])},{default:t(()=>[e(D,null,{default:t(()=>[e(d,{cols:"12"},{default:t(()=>s[13]||(s[13]=[p("h3",null,"Kontaktinformationen",-1)])),_:1}),e(d,{cols:"12",md:"6"},{default:t(()=>[e(u,{label:"Name",required:"","error-messages":r(l).errors.street,modelValue:r(l).name,"onUpdate:modelValue":s[0]||(s[0]=a=>r(l).name=a)},null,8,["error-messages","modelValue"])]),_:1}),e(d,{cols:"12",md:"6"},{default:t(()=>[e(u,{label:"E-Mail ",required:"","error-messages":r(l).errors.email,modelValue:r(l).email,"onUpdate:modelValue":s[1]||(s[1]=a=>r(l).email=a)},null,8,["error-messages","modelValue"])]),_:1}),e(d,{cols:"12",md:"6"},{default:t(()=>[e(u,{label:"Telefonnummer",required:"","error-messages":r(l).errors.email,modelValue:r(l).phone_number,"onUpdate:modelValue":s[2]||(s[2]=a=>r(l).phone_number=a)},null,8,["error-messages","modelValue"])]),_:1}),e(d,{cols:"12"},{default:t(()=>s[14]||(s[14]=[p("h3",null,"Adresse",-1)])),_:1}),e(d,{cols:"12",md:"6"},{default:t(()=>[e(u,{label:"Straße",required:"","error-messages":r(l).errors.street,modelValue:r(l).street,"onUpdate:modelValue":s[3]||(s[3]=a=>r(l).street=a)},null,8,["error-messages","modelValue"])]),_:1}),e(d,{cols:"12",md:"6"},{default:t(()=>[e(u,{label:"Hausnummer",required:"","error-messages":r(l).errors.house_number,modelValue:r(l).house_number,"onUpdate:modelValue":s[4]||(s[4]=a=>r(l).house_number=a)},null,8,["error-messages","modelValue"])]),_:1}),e(d,{cols:"12",md:"6"},{default:t(()=>[e(u,{label:"Addresszusatz","error-messages":r(l).errors.address_suffix,modelValue:r(l).address_suffix,"onUpdate:modelValue":s[5]||(s[5]=a=>r(l).address_suffix=a)},null,8,["error-messages","modelValue"])]),_:1}),e(d,{cols:"12",md:"6"},{default:t(()=>[e(u,{label:"PLZ",required:"","error-messages":r(l).errors.zip,modelValue:r(l).zip,"onUpdate:modelValue":s[6]||(s[6]=a=>r(l).zip=a)},null,8,["error-messages","modelValue"])]),_:1}),e(d,{cols:"12",md:"6"},{default:t(()=>[e(u,{label:"Ort",required:"","error-messages":r(l).errors.city,modelValue:r(l).city,"onUpdate:modelValue":s[7]||(s[7]=a=>r(l).city=a)},null,8,["error-messages","modelValue"])]),_:1}),e(d,{cols:"12",md:"6"},{default:t(()=>[e(u,{label:"Bundesland",required:"","error-messages":r(l).errors.federal_state,modelValue:r(l).federal_state,"onUpdate:modelValue":s[8]||(s[8]=a=>r(l).federal_state=a)},null,8,["error-messages","modelValue"])]),_:1}),e(d,{cols:"12",md:"6"},{default:t(()=>[e(u,{label:"Land",required:"","error-messages":r(l).errors.country,modelValue:r(l).country,"onUpdate:modelValue":s[9]||(s[9]=a=>r(l).country=a)},null,8,["error-messages","modelValue"])]),_:1}),e(d,{cols:"12",md:"6"},{default:t(()=>[e(E,{modelValue:r(l).is_head_quarter,"onUpdate:modelValue":s[10]||(s[10]=a=>r(l).is_head_quarter=a),label:"Hauptsitz?"},null,8,["modelValue"])]),_:1}),e(d,{cols:"12",class:"text-end"},{default:t(()=>[e(n,{loading:r(l).processing,type:"submit",color:"primary"},{default:t(()=>s[15]||(s[15]=[k("Erstellen")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:2},1024)]),_:1})]),"item.action":t(({item:o})=>[p("div",{class:L(["d-flex",{"justify-end":r(g).every(a=>a.users_count!=0)}])},[e(r(F),{href:b.route("operatingSite.show",{operatingSite:o.id})},{default:t(()=>[e(n,{color:"primary",size:"large",variant:"text",icon:"mdi-eye"})]),_:2},1032,["href"]),o.users_count==0?(m(),f(j,{key:0,content:"Bist du dir sicher, dass du die Betriebsstätte "+o.name+" entfernen möchtest?",route:b.route("operatingSite.destroy",{operatingSite:o.id}),title:"Betriebsstätte löschen"},null,8,["content","route"])):x("",!0)],2)]),bottom:t(()=>[r(V)>1?(m(),f($,{key:0,modelValue:r(i),"onUpdate:modelValue":s[11]||(s[11]=o=>h(i)?i.value=o:null),length:r(V)},null,8,["modelValue","length"])):x("",!0)]),_:1},8,["items"])]),_:1})]),_:1}))}});export{G as default};
