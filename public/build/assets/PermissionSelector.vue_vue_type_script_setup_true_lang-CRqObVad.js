import{d as y,C as w,E,a as m,b as r,M as p,e as t,g as o,f as h,k as c,A as v,F as f,aM as _,L as b,aN as j,aO as C,p as K,N as V,aP as M}from"./app-C3oRHGso.js";const L=y({__name:"PermissionSelector",props:w({permissions:{},label:{},errors:{},objKey:{},items:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(g){const u=E(g,"modelValue");return(s,P)=>(r(),m(p,{cols:"12"},{default:t(()=>[o(_,{multiple:"",elevation:"1",variant:"accordion"},{default:t(()=>[(r(!0),c(f,null,v(s.items.filter(l=>l.keys.length>1),l=>(r(),m(j,{key:l.label},{default:t(()=>[o(C,{"expand-icon":"mdi-chevron-double-down","collapse-icon":"mdi-chevron-double-up"},{default:t(()=>[o(b,{onClick:K(()=>{},["stop"])},{default:t(()=>[o(p,{cols:"12",md:"6"},{default:t(()=>[o(V,{items:[{title:"Keine Rechte",value:null},{title:"Lesen",value:"read"},{title:"Schreiben",value:"write"}],label:l.label,"onUpdate:modelValue":d=>{l.keys.forEach(e=>{var a;const n=(a=s.permissions.find(i=>i.name==e))==null?void 0:a.except;u.value[e]=n&&d==n?["read","write"].find(i=>i!=n):d})},variant:"outlined"},null,8,["label","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024),o(M,null,{default:t(()=>[o(b,null,{default:t(()=>[(r(!0),c(f,null,v(u.value,(d,e)=>(r(),c(f,{key:e},[l.keys.includes(e)?(r(),m(p,{key:0,cols:"12",sm:"6",md:"3"},{default:t(()=>{var n;return[o(V,{label:(n=s.permissions.find(a=>a.name==e))==null?void 0:n.label,items:[{title:"Keine Rechte",value:null},{title:"Lesen",value:"read"},{title:"Schreiben",value:"write"}].filter(a=>{var i;return a.value==null||a.value!=((i=s.permissions.find(k=>k.name==e))==null?void 0:i.except)}),modelValue:u.value[e],"onUpdate:modelValue":a=>u.value[e]=a,"error-messages":Object.entries(s.errors).filter(([a,i])=>a.includes(e)&&a.includes(s.objKey)&&i).map(([,a])=>a),variant:"outlined"},null,8,["label","items","modelValue","onUpdate:modelValue","error-messages"])]}),_:2},1024)):h("",!0)],64))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),s.items.some(l=>l.keys.length==1)?(r(),m(b,{key:0,class:"mt-4"},{default:t(()=>[(r(!0),c(f,null,v(s.items.filter(l=>l.keys.length==1),l=>(r(),m(p,{cols:"12",md:"6",key:l.label},{default:t(()=>{var d;return[o(V,{label:(d=s.permissions.find(e=>e.name==l.keys[0]))==null?void 0:d.label,items:[{title:"Keine Rechte",value:null},{title:"Lesen",value:"read"},{title:"Schreiben",value:"write"}].filter(e=>{var n;return e.value==null||e.value!=((n=s.permissions.find(a=>a.name==l.keys[0]))==null?void 0:n.except)}),modelValue:u.value[l.keys[0]],"onUpdate:modelValue":e=>u.value[l.keys[0]]=e,"error-messages":Object.entries(s.errors).filter(([e,n])=>e.includes(l.keys[0])&&e.includes(s.objKey)&&n).map(([,e])=>e),variant:"outlined"},null,8,["label","items","modelValue","onUpdate:modelValue","error-messages"])]}),_:2},1024))),128))]),_:1})):h("",!0)]),_:1}))}});export{L as _};
