import{d as h,c as _,D as f,o as c,q as i,p as m,u as b,t as g,e as k,x as v}from"./app-BjDVB6Ua.js";function C(a){return"patches_exists"in a&&a.patches_exists||"log"in a&&a.log.patches_exists?"hasOpenPatch":a.status==="created"?"created":"accepted"}const S=["role","title"],w={key:0},L=h({__name:"AbsenceTableCell",props:{user:{},date:{},entries:{},absenceTypes:{},holidays:{}},setup(a){const t=a,n=_(()=>t.entries.find(e=>f.fromSQL(e.start)<=t.date&&t.date<=f.fromSQL(e.end)));function u(e){var r,o;const l=t.user.user_working_weeks.toSorted((s,d)=>d.active_since.localeCompare(s.active_since)).find(s=>s.active_since<=e.toFormat("yyyy-MM-dd"));return l&&l[(r=e.setLocale("en-US").weekdayLong)==null?void 0:r.toLowerCase()]&&!((o=t.holidays)!=null&&o[t.date.toFormat("yyyy-MM-dd")])}return(e,l)=>{var r,o,s;return c(),i("td",{class:v(["pa-0",{"editable-cell":e.can("absence","create",t.user)}]),role:e.can("absence","create",t.user)?"button":"cell",title:((r=t.holidays)==null?void 0:r[t.date.toFormat("yyyy-MM-dd")])??((o=e.absenceTypes.find(d=>{var p,y;return d.id==((y=(p=n.value)==null?void 0:p.absence_type)==null?void 0:y.id)}))==null?void 0:o.name)},[n.value&&u(e.date)?(c(),i("div",{key:0,class:"h-100 w-100 d-flex justify-center align-center",style:m({backgroundColor:{accepted:"#f99",created:"#99f",hasOpenPatch:"#ff9"}[b(C)(n.value)]})},[n.value.absence_type_id?(c(),i("span",w,g((s=n.value.absence_type)==null?void 0:s.abbreviation),1)):k("",!0)],4)):(c(),i("div",{key:1,style:m({backgroundColor:u(e.date)?"":"lightgray"}),class:"h-100 w-100 empty"},null,4))],10,S)}}});export{L as _,C as g};
