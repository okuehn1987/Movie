import{d as S,r as i,v as x,o as m,f as o,a as L,e as w,b as l,W as F,u as s,D as f,U as N,V as _,g as B,M as T,N as g,q as W,Y as H,j as p,k as b,m as k,l as U,I as A,F as E}from"./app-CNKB5GAv.js";const $=S({__name:"WorkLogRequests",props:{workLogs:{}},setup(C){var y;const v=C,t=i(((y=v.workLogs)==null?void 0:y.find(n=>n.id==Number(route().params.openWorkLog)))??null),u=i(!!t.value),d=i(1),r=useForm({accepted:!1});function M(n,e){var c;const a=(c=v.workLogs)==null?void 0:c.find(D=>D.id===e.item.id);a&&(t.value=a,u.value=!0)}function V(){t.value&&r.patch(route("workLog.update",{workLog:t.value.id}),{onSuccess:()=>{u.value=!1}})}return(n,e)=>(m(),x(E,null,[o(N,{hover:"","items-per-page":"5",page:d.value,"onUpdate:page":e[1]||(e[1]=a=>d.value=a),"no-data-text":"kein Antrag vorhanden.","onClick:row":M,items:n.workLogs.map(a=>({id:a.id,user:a.user.first_name+" "+a.user.last_name,date:s(f).fromSQL(a.start).toFormat("dd.MM.yyyy")})),headers:[{title:"Mitarbeiter",key:"user"},{title:"Datum",key:"date"}]},{bottom:l(()=>[n.workLogs.length>5?(m(),L(F,{key:0,modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=a=>d.value=a),length:Math.ceil(n.workLogs.length/5)},null,8,["modelValue","length"])):w("",!0)]),_:1},8,["page","items"]),t.value?(m(),L(A,{key:0,modelValue:u.value,"onUpdate:modelValue":e[6]||(e[6]=a=>u.value=a),"max-width":"1000"},{default:l(()=>[o(_,{title:"Buchungsantrag von "+t.value.user.first_name+" "+t.value.user.last_name},{append:l(()=>[o(p,{icon:"",variant:"text",onClick:e[2]||(e[2]=a=>u.value=!1)},{default:l(()=>[o(U,null,{default:l(()=>[...e[7]||(e[7]=[k("mdi-close",-1)])]),_:1})]),_:1})]),default:l(()=>[o(B,null,{default:l(()=>[o(T,null,{default:l(()=>[o(g,{cols:"12"},{default:l(()=>[o(W,{headers:[{title:"",key:"version",sortable:!1},{title:"Start",key:"start",sortable:!1},{title:"Ende",key:"end",sortable:!1},{title:"Homeoffice",key:"is_home_office",sortable:!1}],items:[{version:"Neuer Stand:",start:s(f).fromSQL(t.value.start).toFormat("dd.MM.yyyy HH:mm"),end:t.value.end?s(f).fromSQL(t.value.end).toFormat("dd.MM.yyyy HH:mm"):"kein Ende",is_home_office:t.value.is_home_office?"Ja":"Nein"}]},null,8,["items"])]),_:1}),o(g,{cols:"12"},{default:l(()=>[o(H,{modelValue:t.value.comment,"onUpdate:modelValue":e[3]||(e[3]=a=>t.value.comment=a),readonly:"",label:"Bemerkung",variant:"filled",rows:"3"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),o(g,{cols:"12",class:"d-flex justify-end ga-3"},{default:l(()=>[o(p,{color:"error",loading:s(r).processing&&!s(r).accepted,onClick:e[4]||(e[4]=b(a=>{s(r).accepted=!1,V()},["stop"]))},{default:l(()=>[...e[8]||(e[8]=[k(" Ablehnen ",-1)])]),_:1},8,["loading"]),o(p,{color:"success",loading:s(r).processing&&s(r).accepted,onClick:e[5]||(e[5]=b(a=>{s(r).accepted=!0,V()},["stop"]))},{default:l(()=>[...e[9]||(e[9]=[k(" Akzeptieren ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])):w("",!0)],64))}});export{$ as _};
