import{d as D,r as d,o as f,c as v,w as l,V as A,b as t,J as F,j as w,u as r,K as L,q as T,e as p,f as _,g as b,h as N,m as Q,n as i,B as y,l as M,D as m,L as U}from"./app-DZoHl78I.js";const j=D({__name:"Absences",props:{absences:{}},setup(C){var c;const V=C,n=d(((c=V.absences)==null?void 0:c.find(s=>s.id==Number(route().params.openAbsence)))??null),o=d(!!n.value),x=d(!1),u=d(1);function S(s,e){var k;const a=(k=V.absences)==null?void 0:k.find(B=>B.id===e.item.id);a&&(n.value=a,o.value=!0)}function g(s){n.value&&U.patch(route("absence.update",{absence:n.value.id}),{accepted:s},{onSuccess:()=>{o.value=!1,x.value=!0}})}return(s,e)=>(f(),v(A,{title:"Abwesenheiten"},{default:l(()=>[t(L,{hover:"","items-per-page":"5",page:u.value,"onUpdate:page":e[1]||(e[1]=a=>u.value=a),"no-data-text":"keine Abwesenheiten vorhanden.","onClick:row":S,items:s.absences.map(a=>({id:a.id,user:a.user.first_name+" "+a.user.last_name,start:r(m).fromSQL(a.start).toFormat("dd.MM.yyyy"),end:r(m).fromSQL(a.end).toFormat("dd.MM.yyyy")})),headers:[{title:"Mitarbeiter",key:"user"},{title:"Von",key:"start"},{title:"Bis",key:"end"}]},{bottom:l(()=>[s.absences.length>5?(f(),v(F,{key:0,modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=a=>u.value=a),length:Math.ceil(s.absences.length/5)},null,8,["modelValue","length"])):w("",!0)]),_:1},8,["page","items"]),n.value?(f(),v(T,{key:0,modelValue:o.value,"onUpdate:modelValue":e[6]||(e[6]=a=>o.value=a),"max-width":"1000"},{default:l(()=>[t(A,{title:"Abwesenheit von "+n.value.user.first_name+" "+n.value.user.last_name},{append:l(()=>[t(p,{icon:"",variant:"text",onClick:e[2]||(e[2]=a=>o.value=!1)},{default:l(()=>[t(_,null,{default:l(()=>e[7]||(e[7]=[b("mdi-close")])),_:1})]),_:1})]),default:l(()=>[t(N,null,{default:l(()=>[t(Q,null,{default:l(()=>[t(i,{cols:"12"},{default:l(()=>[t(y,{label:"Abwesenheitsgrund",modelValue:n.value.absence_type.name,"onUpdate:modelValue":e[3]||(e[3]=a=>n.value.absence_type.name=a),readonly:""},null,8,["modelValue"])]),_:1}),t(i,{cols:"12",md:"6"},{default:l(()=>[t(y,{label:"Von:","model-value":r(m).fromSQL(n.value.start).toFormat("dd.MM.yyyy"),readonly:""},null,8,["model-value"])]),_:1}),t(i,{cols:"12",md:"6"},{default:l(()=>[t(y,{label:"Bis:","model-value":r(m).fromSQL(n.value.end).toFormat("dd.MM.yyyy"),readonly:""},null,8,["model-value"])]),_:1})]),_:1})]),_:1}),t(i,{cols:"12",class:"d-flex justify-end ga-3"},{default:l(()=>[t(p,{color:"error",onClick:e[4]||(e[4]=M(a=>g(!1),["stop"]))},{default:l(()=>e[8]||(e[8]=[b("Ablehnen")])),_:1}),t(p,{color:"success",onClick:e[5]||(e[5]=M(a=>g(!0),["stop"]))},{default:l(()=>e[9]||(e[9]=[b("Akzeptieren")])),_:1})]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])):w("",!0)]),_:1}))}});export{j as _};
