import{d as x,P as C,T as v,o as i,c as m,w as e,b as a,A as S,y as P,u as t,q as w,e as d,R as A,f,V,g as c,h as T,k as h,l as B,m as M,n as p,B as R,p as F,j as b,J as N,S as U}from"./app-BglVT0J3.js";import{_ as $}from"./AdminLayout.vue_vue_type_script_setup_true_lang-C_59YlBz.js";import{a as z,g as D}from"./utils-D9Ynkqv3.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const E=x({__name:"GroupIndex",props:{groups:{},users:{}},setup(y){const _=y,{currentPage:n,lastPage:g,data:k}=z(C(_),"groups"),s=v({name:"",users:[]});return(u,l)=>(i(),m($,{title:"Abteilungen"},{default:e(()=>[a(V,null,{default:e(()=>[a(S,{style:P({maxHeight:t(D)(0)}),"fixed-header":"",headers:[{title:"#",key:"id"},{title:"Abteilungsname",key:"name"},{title:"Mitarbeitende",key:"users_count"},{title:"",key:"actions",align:"end"}],items:t(k)},{"header.actions":e(()=>[u.can("group","create")?(i(),m(w,{key:0,"max-width":"1000"},{activator:e(({props:r})=>[a(d,A(r,{color:"primary"}),{default:e(()=>[a(f,{icon:"mdi-plus"})]),_:2},1040)]),default:e(({isActive:r})=>[a(V,{title:"Abteilung erstellen"},{append:e(()=>[a(d,{icon:"",variant:"text",onClick:o=>r.value=!1},{default:e(()=>[a(f,null,{default:e(()=>l[3]||(l[3]=[c("mdi-close")])),_:1})]),_:2},1032,["onClick"])]),default:e(()=>[a(T,null,{default:e(()=>[a(h,{onSubmit:B(o=>{t(s).post(u.route("group.store"),{onSuccess:()=>{t(s).reset(),r.value=!1}})},["prevent"])},{default:e(()=>[a(M,null,{default:e(()=>[a(p,{cols:"12",sm:"6"},{default:e(()=>[a(R,{modelValue:t(s).name,"onUpdate:modelValue":l[0]||(l[0]=o=>t(s).name=o),"error-messages":t(s).errors.name,label:"Abteilungsname"},null,8,["modelValue","error-messages"])]),_:1}),a(p,{cols:"12",sm:"6"},{default:e(()=>[a(F,{modelValue:t(s).users,"onUpdate:modelValue":l[1]||(l[1]=o=>t(s).users=o),"error-messages":t(s).errors.users,items:u.users.map(o=>({id:o.id,title:o.name})),label:"Wähle Mitarbeiter aus, die zur Abteilung gehören",multiple:""},null,8,["modelValue","error-messages","items"])]),_:1}),a(p,{cols:"12",class:"text-end"},{default:e(()=>[a(d,{loading:t(s).processing,type:"submit",color:"primary"},{default:e(()=>l[4]||(l[4]=[c("Erstellen")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:2},1032,["onSubmit"])]),_:2},1024)]),_:2},1024)]),_:1})):b("",!0)]),bottom:e(()=>[t(g)>1?(i(),m(N,{key:0,modelValue:t(n),"onUpdate:modelValue":l[2]||(l[2]=r=>U(n)?n.value=r:null),length:t(g)},null,8,["modelValue","length"])):b("",!0)]),_:1},8,["style","items"])]),_:1})]),_:1}))}});export{E as default};
