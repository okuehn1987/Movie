import{_ as g}from"./AdminLayout.vue_vue_type_script_setup_true_lang-C_59YlBz.js";import{d as h,P as k,o,c as i,w as t,b as a,A as V,u as r,D as v,q as b,e as m,R as w,f,g as C,j as d,s as M,C as P,v as B,J as N,S,V as D}from"./app-BglVT0J3.js";import $ from"./UserForm-DAd1MRyx.js";import{a as E,f as F}from"./utils-D9Ynkqv3.js";import{_ as R}from"./ConfirmDelete.vue_vue_type_script_setup_true_lang-Byp7FqM4.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./PermissionSelector.vue_vue_type_script_setup_true_lang-D_aKa-7R.js";const T={class:"d-flex justify-end"},U={key:2,style:{width:"48px"}},z=h({__name:"UserIndex",props:{users:{},supervisors:{},groups:{},operating_sites:{},permissions:{},countries:{}},setup(c){const _=c,{currentPage:u,lastPage:p,data:y}=E(k(_),"users");return(s,n)=>(o(),i(g,{title:"Mitarbeiter"},{default:t(()=>[a(D,null,{default:t(()=>[a(V,{"no-data-text":"Es wurden keine Mitarbeiter gefunden",headers:[{title:"#",key:"id"},{title:"Vorname",key:"first_name"},{title:"Nachname",key:"last_name"},{title:"Email",key:"email"},{title:"Abteilung",key:"group.name"},{title:"Personalnummer",key:"staff_number"},{title:"Geburtsdatum",key:"date_of_birth"},{title:"",key:"actions",align:"end"}],items:r(y).map(e=>({...r(F)(e),date_of_birth:r(v).fromFormat(e.date_of_birth,"yyyy-MM-dd").toFormat("dd.MM.yyyy")})).toSorted((e,l)=>(e.first_name+e.last_name).localeCompare(l.first_name+l.last_name)),hover:""},{"header.actions":t(()=>[s.can("user","create")?(o(),i(b,{key:0,"max-width":"1000"},{activator:t(({props:e})=>[a(m,w(e,{color:"primary"}),{default:t(()=>[a(f,{icon:"mdi-plus"})]),_:2},1040)]),default:t(({isActive:e})=>[a($,{countries:s.countries,supervisors:s.supervisors,groups:s.groups,operating_sites:s.operating_sites,permissions:s.permissions,mode:"create",onSuccess:l=>e.value=!1},{append:t(()=>[a(m,{icon:"",variant:"text",onClick:l=>e.value=!1},{default:t(()=>[a(f,null,{default:t(()=>n[1]||(n[1]=[C("mdi-close")])),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["countries","supervisors","groups","operating_sites","permissions","onSuccess"])]),_:1})):d("",!0)]),"item.actions":t(({item:e})=>[M("div",T,[s.can("user","viewShow",e)?(o(),i(r(P),{key:0,href:s.route("user.show",{user:e.id})},{default:t(()=>[a(m,{color:"primary",variant:"text",icon:"mdi-eye"})]),_:2},1032,["href"])):d("",!0),s.can("user","delete",e)?(o(),i(R,{key:1,content:"Bist du dir sicher, dass du "+e.first_name+" "+e.last_name+" entfernen möchtest?",route:s.route("user.destroy",{user:e.id}),title:"Mitarbeiter löschen"},null,8,["content","route"])):(o(),B("div",U))])]),bottom:t(()=>[r(p)>1?(o(),i(N,{key:0,modelValue:r(u),"onUpdate:modelValue":n[0]||(n[0]=e=>S(u)?u.value=e:null),length:r(p)},null,8,["modelValue","length"])):d("",!0)]),_:1},8,["items"])]),_:1})]),_:1}))}});export{z as default};
