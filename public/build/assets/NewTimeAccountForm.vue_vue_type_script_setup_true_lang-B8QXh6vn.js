import{d as V,o as b,c as y,a,u as e,v as k,b as t,f as p,T as w,e as u,l as _,g,h as v,k as T,m as C,p as i,s as m,q as S,V as x}from"./app-DGkPKo_g.js";import{d as N,c as A,r as F}from"./utils-DhjBVoLn.js";const B=V({__name:"NewTimeAccountForm",props:{user:{},time_account_settings:{}},setup(f){var c;const d=f,l=useForm({balance_limit:d.user.currentWorkingHours.weekly_working_hours*2,balance:0,time_account_setting_id:((c=d.time_account_settings.filter(r=>r.type!=null)[0])==null?void 0:c.id)??null,name:""});return(r,o)=>(b(),y(k,{onAfterLeave:o[4]||(o[4]=n=>e(l).reset()),"max-width":"1000"},{activator:a(({props:n})=>[t(u,w(n,{color:"primary"}),{default:a(()=>[t(p,{icon:"mdi-plus"})]),_:2},1040)]),default:a(({isActive:n})=>[t(x,{title:"Neues Arbeitszeitkonto erstellen"},{append:a(()=>[t(u,{icon:"",variant:"text",onClick:_(s=>n.value=!1,["stop"])},{default:a(()=>[t(p,null,{default:a(()=>o[5]||(o[5]=[g("mdi-close")])),_:1})]),_:2},1032,["onClick"])]),default:a(()=>[t(v,null,{default:a(()=>[t(T,{onSubmit:_(s=>{e(l).post(r.route("user.timeAccount.store",{user:r.user.id}),{onSuccess:()=>{n.value=!1,e(l).reset()}})},["prevent"])},{default:a(()=>[t(C,null,{default:a(()=>[t(i,{cols:"12",md:"6"},{default:a(()=>[t(m,{label:"Name",modelValue:e(l).name,"onUpdate:modelValue":o[0]||(o[0]=s=>e(l).name=s),"error-messages":e(l).errors.name},null,8,["modelValue","error-messages"])]),_:1}),t(i,{cols:"12",md:"6"},{default:a(()=>[t(S,{items:r.time_account_settings.filter(s=>s.type!=null).map(s=>({title:`${e(N)(s.type)} (${e(A)(s.truncation_cycle_length_in_months)})`,value:s.id})),label:"Typ",modelValue:e(l).time_account_setting_id,"onUpdate:modelValue":o[1]||(o[1]=s=>e(l).time_account_setting_id=s),"error-messages":e(l).errors.time_account_setting_id},null,8,["items","modelValue","error-messages"])]),_:1}),t(i,{cols:"12",md:"6"},{default:a(()=>[t(m,{label:"Limit in Stunden",hint:"entspricht "+e(F)(e(l).balance_limit/r.user.currentWorkingHours.weekly_working_hours,2)+"x wÃ¶chentliche Arbeitszeit",modelValue:e(l).balance_limit,"onUpdate:modelValue":o[2]||(o[2]=s=>e(l).balance_limit=s),"error-messages":e(l).errors.balance_limit},null,8,["hint","modelValue","error-messages"])]),_:1}),t(i,{cols:"12",md:"6"},{default:a(()=>[t(m,{label:"Startbetrag in Stunden",modelValue:e(l).balance,"onUpdate:modelValue":o[3]||(o[3]=s=>e(l).balance=s),"error-messages":e(l).errors.balance},null,8,["modelValue","error-messages"])]),_:1}),t(i,{cols:"12",class:"text-end"},{default:a(()=>[t(u,{type:"submit",color:"primary",loading:e(l).processing},{default:a(()=>o[6]||(o[6]=[g(" Speichern ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:2},1032,["onSubmit"])]),_:2},1024)]),_:2},1024)]),_:1}))}});export{B as _};
