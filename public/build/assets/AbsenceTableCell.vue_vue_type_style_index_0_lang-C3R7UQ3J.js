import{d as b,H as _,D as i,o as c,C as l,B as y,t as k,j as u,I as f}from"./app-Dmgsj1_t.js";const g=["role","title"],h={key:0},C=b({__name:"AbsenceTableCell",props:{user:{},date:{},absences:{},absenceTypes:{},holidays:{}},setup(m){const e=m,o=_(()=>e.absences.find(t=>i.fromSQL(t.start)<=e.date&&e.date<=i.fromSQL(t.end)));function d(t){var a,s;const n=e.user.user_working_weeks.toSorted((r,p)=>p.active_since.localeCompare(r.active_since)).find(r=>r.active_since<=t.toFormat("yyyy-MM-dd"));return n&&n[(a=t.setLocale("en-US").weekdayLong)==null?void 0:a.toLowerCase()]&&!((s=e.holidays)!=null&&s[e.date.toFormat("yyyy-MM-dd")])}return(t,n)=>{var a,s;return c(),l("td",{class:f(["pa-0",{"editable-cell":t.can("absence","create",e.user)}]),style:y({backgroundColor:d(t.date)?"":"lightgray"}),role:t.can("absence","create",e.user)?"button":"cell",title:(a=e.holidays)==null?void 0:a[e.date.toFormat("yyyy-MM-dd")]},[o.value&&d(t.date)?(c(),l("div",{key:0,class:"h-100 w-100 d-flex justify-center align-center",style:y({backgroundColor:o.value.status=="accepted"?"#f99":"lightblue"})},[o.value.absence_type_id?(c(),l("span",h,k((s=o.value.absence_type)==null?void 0:s.abbreviation),1)):u("",!0)],4)):u("",!0)],14,g)}}});export{C as _};
