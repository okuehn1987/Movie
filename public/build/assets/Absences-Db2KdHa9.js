import{A as h}from"./AdminLayout-CpTO0eZJ.js";import{d as g,r as k,a as p,o,b as a,f as t,V as D,i as d,g as v,K as y,L as i,ay as S,j as _,F as V,z as C,e as A,az as w,aA as E,h as u,t as n,s as b,aB as F,y as L,D as m,aq as T,ao as x}from"./app-jsAAlN6R.js";import{_ as B}from"./UserShowNavBar.vue_vue_type_script_setup_true_lang-BenwhJba.js";import{u as M}from"./utils-BhFuahHQ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const z={class:"text-h6"},N={class:"font-weight-bold"},P={colspan:"4"},H=g({__name:"Absences",props:{user:{},absenceTypes:{}},setup(G){const c=k([]);return(s,f)=>(o(),p(h,{title:s.user.first_name+" "+s.user.last_name},{default:a(()=>[t(B,{user:s.user,tab:"absences"},null,8,["user"]),t(D,{"max-height":d(M)(48).value,class:"overflow-auto"},{default:a(()=>[t(v,null,{default:a(()=>[t(y,null,{default:a(()=>[t(i,{cols:"12"},{default:a(()=>[t(S,{elevation:"1",multiple:"",modelValue:c.value,"onUpdate:modelValue":f[0]||(f[0]=l=>c.value=l)},{default:a(()=>[(o(!0),_(V,null,C(s.absenceTypes,l=>(o(),_(V,{key:l.id},[s.user.absences.filter(e=>e.absence_type_id==l.id).reduce((e,r)=>e+r.usedDays,0)>0?(o(),p(w,{key:0},{default:a(()=>[t(E,null,{default:a(()=>[t(y,null,{default:a(()=>[t(i,{cols:"12",md:"11"},{default:a(()=>[u("h2",z,n(l.name),1)]),_:2},1024),t(i,{cols:"12",md:"1",style:{"place-self":"center"}},{default:a(()=>[b(n(s.user.absences.filter(e=>e.absence_type_id==l.id).reduce((e,r)=>e+r.usedDays,0))+" Tage ",1)]),_:2},1024)]),_:2},1024)]),_:2},1024),t(F,null,{default:a(()=>[t(L,{id:"userAbsenceTable",items:s.user.absences.filter(e=>e.absence_type_id==l.id).toSorted((e,r)=>r.start.localeCompare(e.start)).map(e=>{var r;return{...e,start:d(m).fromSQL(e.start).toFormat("dd.MM.yyyy"),end:d(m).fromSQL(e.end).toFormat("dd.MM.yyyy"),absence_type:(r=e.absence_type)==null?void 0:r.name,usedDays:e.usedDays.toString()}}),headers:[{title:"Start",key:"start"},{title:"Ende",key:"end"},{title:"Status",key:"status"},{title:"Art",key:"absence_type"},{title:"Genutzte Tage",key:"usedDays"}]},T({"item.status":a(({item:e})=>[t(x,{color:{accepted:"success",created:"warning",declined:"error"}[e.status]},{default:a(()=>[b(n({accepted:"Genehmigt",created:"Offen",declined:"Abgelehnt"}[e.status]),1)]),_:2},1032,["color"])]),_:2},[l.name=="Urlaub"?{name:"body.append",fn:a(()=>[u("tr",N,[u("td",P," Genutzte Urlaubstage f√ºr das Jahr "+n(d(m).now().year)+": ",1),u("td",null,n(s.user.usedLeaveDaysForYear+" von "+s.user.leaveDaysForYear),1)])]),key:"0"}:void 0]),1032,["items"])]),_:2},1024)]),_:2},1024)):A("",!0)],64))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["max-height"])]),_:1},8,["title"]))}});export{H as default};
