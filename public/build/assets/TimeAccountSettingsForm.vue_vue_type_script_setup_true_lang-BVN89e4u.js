import{d as p,C as g,w as f,o as b,c as V,a as l,u as t,v as y,b as a,f as u,T as v,e as m,l as d,g as c,h as C,k,m as w,p as r,s as _,q as S,V as T}from"./app-CqiK6L1g.js";import{d as $,c as A,r as F}from"./utils-B0T8deZ-.js";const h=p({__name:"TimeAccountSettingsForm",props:{user:{},item:{},time_account_settings:{}},setup(N){const e=g({name:"",time_account_setting_id:null,balance_limit:0});return f(()=>e.balance_limit,()=>{e.balance_limit=+e.balance_limit.toString().replace(/[^\d,.]/g,"").replace(/,/,".")}),(o,i)=>(b(),V(y,{onAfterLeave:i[4]||(i[4]=s=>t(e).reset()),"max-width":"1000"},{activator:l(({props:s})=>[a(m,v(s,{onClick:i[0]||(i[0]=()=>{t(e).name=o.item.name,t(e).balance_limit=o.item.balance_limit,t(e).time_account_setting_id=o.item.time_account_setting_id}),color:"primary",icon:"",variant:"text"}),{default:l(()=>[a(u,{icon:"mdi-cog"})]),_:2},1040)]),default:l(({isActive:s})=>[a(T,{title:`Einstellungen für Konto ${o.item.name} bearbeiten`},{append:l(()=>[a(m,{icon:"",variant:"text",onClick:d(n=>s.value=!1,["stop"])},{default:l(()=>[a(u,null,{default:l(()=>i[5]||(i[5]=[c("mdi-close")])),_:1})]),_:2},1032,["onClick"])]),default:l(()=>[a(C,null,{default:l(()=>[a(k,{onSubmit:d(n=>{t(e).patch(o.route("timeAccount.update",{timeAccount:o.item.id}),{onSuccess:()=>{s.value=!1,t(e).reset()}})},["prevent"])},{default:l(()=>[a(w,null,{default:l(()=>[a(r,{cols:"12",md:"6"},{default:l(()=>[a(_,{modelValue:t(e).name,"onUpdate:modelValue":i[1]||(i[1]=n=>t(e).name=n),label:"Name","error-messages":t(e).errors.name},null,8,["modelValue","error-messages"])]),_:1}),a(r,{cols:"12",md:"6"},{default:l(()=>[a(S,{disabled:o.item.time_account_setting.type===null,label:"Typ",items:o.time_account_settings.filter(n=>o.item.time_account_setting.type===null||n.type!=null).map(n=>({title:`${t($)(n.type)} (${t(A)(n.truncation_cycle_length_in_months)})`,value:n.id})),modelValue:t(e).time_account_setting_id,"onUpdate:modelValue":i[2]||(i[2]=n=>t(e).time_account_setting_id=n),"error-messages":t(e).errors.time_account_setting_id},null,8,["disabled","items","modelValue","error-messages"])]),_:1}),a(r,{cols:"12",md:"6"},{default:l(()=>[a(_,{modelValue:t(e).balance_limit,"onUpdate:modelValue":i[3]||(i[3]=n=>t(e).balance_limit=n),label:"Limit in Stunden",hint:"entspricht "+t(F)(t(e).balance_limit/o.user.currentWorkingHours.weekly_working_hours,2)+"x wöchentliche Arbeitszeit","error-messages":t(e).errors.balance_limit},null,8,["modelValue","hint","error-messages"])]),_:1}),a(r,{cols:"12",class:"text-end"},{default:l(()=>[a(m,{type:"submit",color:"primary",loading:t(e).processing},{default:l(()=>i[6]||(i[6]=[c(" Speichern ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:2},1032,["onSubmit"])]),_:2},1024)]),_:2},1032,["title"])]),_:1}))}});export{h as _};
