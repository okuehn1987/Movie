import{d as N,a as u,o as i,i as W,b as o,f as t,V as H,z as A,g as R,j,k as f,u as l,L as E,M as h,N as C,X as J,a6 as q,q as d,s as b,v as T,x as M,p as V,e as v,a7 as D,F as $,C as K,a3 as _,a8 as Q,a4 as y,O as L,a9 as O,h as c,t as k,E as w,J as z,D as X,aa as Z,r as S,ab as G,w as Y,ac as ee,P as te,Q as ae,ad as oe,R as F,ae as re,S as x,af as P,ag as ne,ah as se,K as B}from"./app-CCLwdg_Q.js";import{a as le}from"./utils-DyBvriRT.js";import{_ as ie}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ue=N({__name:"ReportBugDialog",setup(I){const e=useForm({location:null,summary:null,description:null,attachments:[]});return(p,s)=>(i(),u(W,{"max-width":"1000"},{activator:o(({props:g})=>[t(d,M({variant:"text","prepend-icon":"mdi-bug",title:"Fehler melden"},g),{default:o(()=>[...s[4]||(s[4]=[b("Fehler melden",-1)])]),_:1},16)]),default:o(({isActive:g})=>[t(H,{title:"Fehler melden"},{append:o(()=>[t(d,{icon:"",variant:"text",onClick:a=>g.value=!1},{default:o(()=>[t(T,null,{default:o(()=>[...s[5]||(s[5]=[b("mdi-close",-1)])]),_:1})]),_:1},8,["onClick"])]),default:o(()=>[t(A),t(R,null,{default:o(()=>[t(j,{onSubmit:f(a=>{l(e).post(p.route("reportBug.store"),{onSuccess:()=>{g.value=!1,l(e).reset()}})},["prevent"])},{default:o(()=>[t(E,null,{default:o(()=>[t(h,{cols:"12"},{default:o(()=>[t(C,{modelValue:l(e).location,"onUpdate:modelValue":s[0]||(s[0]=a=>l(e).location=a),errorMessages:l(e).errors.location,label:"Wo ist der Fehler aufgetreten?"},null,8,["modelValue","errorMessages"])]),_:1}),t(h,{cols:"12"},{default:o(()=>[t(C,{modelValue:l(e).summary,"onUpdate:modelValue":s[1]||(s[1]=a=>l(e).summary=a),errorMessages:l(e).errors.summary,label:"Fasse den Fehler zusammen"},null,8,["modelValue","errorMessages"])]),_:1}),t(h,{cols:"12"},{default:o(()=>[t(J,{modelValue:l(e).description,"onUpdate:modelValue":s[2]||(s[2]=a=>l(e).description=a),errorMessages:l(e).errors.description,label:"Zus채tzliche Informationen zum Fehler"},null,8,["modelValue","errorMessages"])]),_:1}),t(h,{cols:"12"},{default:o(()=>[t(q,{modelValue:l(e).attachments,"onUpdate:modelValue":s[3]||(s[3]=a=>l(e).attachments=a),errorMessages:Object.entries(l(e).errors).filter(([a,r])=>a.includes("attachments")&&r).map(([a])=>"Alle Dateien m체ssen ein Bild sein."),label:"Anhang",multiple:"",accept:"image/*"},null,8,["modelValue","errorMessages"])]),_:1}),t(h,{cols:"12",class:"text-end"},{default:o(()=>[t(d,{type:"submit",color:"primary"},{default:o(()=>[...s[6]||(s[6]=[b("Absenden",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:2},1024)]),_:2},1024)]),_:1}))}}),de={class:"ms-4 ga-4 d-flex"},pe={key:1,style:{width:"48px"}},me=N({__name:"AppbarActions",setup(I){function e(a){w.post(route("notification.update",{notification:a.id}))}function p(a){let r;if(a.type=="App\\Notifications\\WorkLogPatchNotification")r=route("dispute.index",{openPatch:a.data.work_log_patch_id});else if(a.type=="App\\Notifications\\WorkLogNotification")r=route("dispute.index",{openWorkLog:a.data.work_log_id});else if(a.type=="App\\Notifications\\AbsenceNotification")r=route("dispute.index",{openAbsence:a.data.absence_id});else if(a.type=="App\\Notifications\\AbsencePatchNotification")r=route("dispute.index",{openAbsencePatch:a.data.absence_patch_id});else if(a.type=="App\\Notifications\\AbsenceDeleteNotification")r=route("dispute.index",{openAbsenceDelete:a.data.absence_id});else if(a.type=="App\\Notifications\\DisputeStatusNotification"){if(a.data.type=="delete")return;a.data.log_model=="App\\Models\\Absence"?r=route("absence.index",{openAbsence:a.data.log_id}):a.data.log_model=="App\\Models\\AbsencePatch"?r=route("absence.index",{openAbsencePatch:a.data.log_id}):a.data.log_model=="App\\Models\\WorkLogPatch"?r=route("user.workLog.index",{user:z().props.auth.user.id,openWorkLogPatch:a.data.log_id}):a.data.log_model=="App\\Models\\WorkLog"&&(r=route("user.workLog.index",{user:z().props.auth.user.id,workLog:a.data.log_id}))}return r&&w.get(r,{},{onSuccess:()=>e(a)})}const s=le();function g(a){const r=X.fromISO(a.created_at),n=s.value.diff(r);return n.as("minutes")<1?"Jetzt":n.as("hours")<1?"vor "+Math.floor(n.as("minutes"))+" minuten":r.day!==s.value.day||r.month!==s.value.month||r.year!==s.value.year?r.toFormat("dd.MM - HH:mm")+" Uhr":r.toFormat("HH:mm")+" Uhr"}return(a,r)=>(i(),V($,null,[a.$page.props.unreadNotifications.length>0?(i(),u(D,{key:0},{activator:o(({props:n})=>[t(d,M({color:"primary"},n,{stacked:""}),{default:o(()=>[t(Q,{content:a.$page.props.unreadNotifications.length,color:"error"},{default:o(()=>[t(T,{icon:"mdi-bell"})]),_:1},8,["content"])]),_:2},1040)]),default:o(()=>[t(_,{onClick:f(()=>{},["stop"])},{default:o(()=>[(i(!0),V($,null,K(a.$page.props.unreadNotifications.toSorted((n,m)=>m.created_at.localeCompare(n.created_at)),(n,m)=>(i(),V($,{key:n.id},[m!=0?(i(),u(A,{key:0})):v("",!0),t(y,null,{append:o(()=>[c("div",de,[t(A,{vertical:""}),n.type!="App\\Notifications\\DisputeStatusNotification"||n.type=="App\\Notifications\\DisputeStatusNotification"&&n.data.type!="delete"?(i(),u(d,{key:0,color:"primary",icon:"mdi-eye",variant:"tonal",onClick:f(U=>p(n),["stop"])},null,8,["onClick"])):(i(),V("div",pe)),t(d,{color:"error",icon:"mdi-delete",variant:"tonal",onClick:f(U=>e(n),["stop"])},null,8,["onClick"])])]),default:o(()=>[t(O,null,{default:o(()=>[c("div",null,k(n.data.title),1),c("div",null,[c("sub",null,k(g(n)),1)])]),_:2},1024)]),_:2},1024)],64))),128))]),_:1})]),_:1})):v("",!0),t(D,null,{activator:o(({props:n})=>[t(d,M({stacked:"",color:"black","prepend-icon":"mdi-menu"},n),null,16)]),default:o(()=>[t(_,null,{default:o(()=>[t(y,null,{default:o(()=>[t(l(L),{class:"text-black w-100",href:a.route("user.profile",{user:a.$page.props.auth.user.id})},{default:o(()=>[t(d,{variant:"text","prepend-icon":"mdi-account",title:"Profil"},{default:o(()=>[...r[0]||(r[0]=[b("Profil",-1)])]),_:1})]),_:1},8,["href"])]),_:1}),t(y,null,{default:o(()=>[t(ue)]),_:1}),t(y,null,{default:o(()=>[t(l(L),{method:"post",href:a.route("logout"),as:"button"},{default:o(()=>[t(d,{variant:"text","prepend-icon":"mdi-logout",title:"Abmelden"},{default:o(()=>[...r[1]||(r[1]=[b("Abmelden",-1)])]),_:1})]),_:1},8,["href"])]),_:1})]),_:1})]),_:1})],64))}}),ce=N({__name:"DrawerMenu",setup(I){return(e,p)=>(i(),u(_,{nav:"","onClick:select":p[0]||(p[0]=s=>l(w).get(s.id)),items:[{props:{active:e.route().current("dashboard"),prependIcon:"mdi-view-dashboard"},value:e.route("dashboard"),title:"Dashboard"},e.can("absence","viewIndex")&&{props:{active:e.route().current("absence.index"),prependIcon:"mdi-timer-cancel-outline"},value:e.route("absence.index"),title:"Abwesenheiten"},e.can("workLog","viewIndex")&&{props:{active:e.route().current("workLog.index"),prependIcon:"mdi-clock-outline"},value:e.route("workLog.index"),title:"Arbeitszeiten"},e.can("dispute","viewIndex")&&{props:{active:e.route().current("dispute.index"),prependIcon:"mdi-bookmark-outline"},value:e.route("dispute.index"),title:"Antr채ge"},e.can("organization","viewShow")&&{title:"Organisation",subtitle:"test",value:e.route("organization.show",{organization:e.$page.props.organization.id}),props:{prependIcon:"mdi-domain",active:e.route().current("organization.show")}},e.can("operatingSite","viewIndex")&&{props:{active:e.route().current("operatingSite.index"),prependIcon:"mdi-map-marker"},value:e.route("operatingSite.index"),title:"Betriebsst채tten"},e.can("group","viewIndex")&&{props:{active:e.route().current("group.index"),prependIcon:"mdi-dots-circle"},value:e.route("group.index"),title:"Abteilungen"},e.can("user","viewIndex")&&{props:{active:e.route().current("user.index"),prependIcon:"mdi-account-group"},value:e.route("user.index"),title:"Mitarbeitende"},e.can("user","viewIndex")&&{props:{prependIcon:"mdi-tree",active:e.route().current("organization.tree")},value:e.route("organization.tree",{organization:e.$page.props.organization.id}),title:"Organigramm"},...e.can("organization","viewIndex")?[{type:"divider"},{type:"subheader",title:"Super-Admin"},{props:{prependIcon:"mdi-security",active:e.route().current("organization.index")},value:e.route("organization.index"),title:"Organisationen"}]:[]].filter(Boolean)},null,8,["items"]))}}),ge=ie(ce,[["__scopeId","data-v-d2eb9acd"]]),fe={class:"d-flex align-center"},ve={class:"text-center font-weight-medium"},be={class:"d-flex align-center mr-auto ga-2"},ke={class:"text-h6 pl-0 ml-5 mb-0",style:{"white-space":"nowrap"}},Ve=N({__name:"AdminLayout",props:{title:{},backurl:{}},setup(I){const e=z(),p=Z().smAndDown,s=S(!p.value),g="Herta";G(1e3*60*2,{only:["unreadNotifications"]},{keepAlive:!0});const a=S(!!e.props.organization.logo);return Y(()=>e.props.organization.logo,()=>{a.value=!1,ee(()=>a.value=!0)}),(r,n)=>(i(),u(te,null,{default:o(()=>[t(l(ae),{title:r.title},null,8,["title"]),t(oe,{color:"background",style:{border:"none"},modelValue:s.value,"onUpdate:modelValue":n[2]||(n[2]=m=>s.value=m),image:"/img/loggedin-background.png"},{default:o(()=>[t(_,null,{default:o(()=>[t(y,{onClick:n[1]||(n[1]=f(m=>l(w).get("/"),["stop"]))},{prepend:o(()=>[t(F,{src:"/img/logo-symbol.png",style:{width:"24px"},class:"me-8"})]),append:o(()=>[t(d,{onClick:n[0]||(n[0]=f(m=>s.value=!1,["stop"])),icon:"mdi-close",variant:"text"})]),default:o(()=>[t(O,null,{default:o(()=>[c("div",fe,[c("h1",ve,[c("span",null,k(l(g)),1)])])]),_:1})]),_:1})]),_:1}),t(A),t(ge)]),_:1},8,["modelValue"]),t(re,{elevation:"0",color:"background"},{default:o(()=>[!s.value||l(p)?(i(),u(P,{key:0,variant:"text",onClick:n[3]||(n[3]=f(m=>s.value=!s.value,["stop"]))})):v("",!0),r.backurl?(i(),u(P,{key:1,variant:"text",icon:"mdi-arrow-left",onClick:n[4]||(n[4]=f(m=>l(w).visit(r.backurl,{preserveState:!0}),["stop"]))})):v("",!0),c("div",be,[c("span",ke,k(r.title),1),a.value?(i(),u(F,{key:0,src:r.route("organization.getLogo",{organization:r.$page.props.organization.id,key:r.$page.props.organization.logo}),"max-height":"48px","max-width":"48px",width:"100%",height:"100%",class:"rounded"},null,8,["src"])):v("",!0)]),x(r.$slots,"appbarActions"),t(me)]),_:3}),t(ne,null,{default:o(()=>[t(se,{class:"pt-0",fluid:""},{default:o(()=>[r.$page.props.flash.error?(i(),u(B,{type:"error",closable:"",class:"mb-6",key:Math.random()},{default:o(()=>[b(k(r.$page.props.flash.error),1)]),_:1})):v("",!0),r.$page.props.flash.success?(i(),u(B,{type:"success",closable:"",class:"mb-6",key:Math.random()},{default:o(()=>[b(k(r.$page.props.flash.success),1)]),_:1})):v("",!0),x(r.$slots,"default")]),_:3})]),_:3})]),_:3}))}});export{Ve as _};
