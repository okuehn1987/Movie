import{d as C,r as b,ay as S,a as V,o as g,J as y,b as r,f as e,v as x,g as D,C as h,m as L,N as U,O as n,j as o,P as _,_ as q,R as B,e as F,l as p,q as f,t as I,n as c,V as N,I as P,D as u}from"./app-BP7nPn1E.js";const O=C({__name:"CreateNewWorkLog",props:{user:{}},setup(v){const w=v,i=b(!1),a=useForm({start:new Date,end:new Date,comment:null,start_time:"09:00",end_time:"17:00",is_home_office:!1});function k(){a.transform(s=>{const t=u.fromFormat(s.start_time,"HH:mm"),m=u.fromFormat(s.end_time,"HH:mm");return{...s,start:u.fromISO(s.start.toISOString()).set({hour:t.hour,minute:t.minute,second:0}),end:u.fromISO(s.end.toISOString()).set({hour:m.hour,minute:m.minute,second:0})}}).post(route("user.workLog.store",{user:w.user.id}),{onSuccess:()=>{i.value=!1}})}return(s,t)=>{const m=S("v-date-input");return g(),V(y,{"max-width":"1000",modelValue:i.value,"onUpdate:modelValue":t[6]||(t[6]=d=>i.value=d)},{activator:r(({props:d})=>[e(p,P(d,{color:"primary"}),{default:r(()=>[e(c,null,{default:r(()=>[...t[7]||(t[7]=[f("mdi-plus",-1)])]),_:1})]),_:1},16)]),default:r(({isActive:d})=>[e(N,{title:"Neue Buchung "+(s.can("workLogPatch","update")?"erstellen":"beantragen")},{append:r(()=>[e(p,{icon:"",variant:"text",onClick:l=>d.value=!1},{default:r(()=>[e(c,null,{default:r(()=>[...t[8]||(t[8]=[f("mdi-close",-1)])]),_:1})]),_:1},8,["onClick"])]),default:r(()=>[e(x),e(D,null,{default:r(()=>[e(h,{onSubmit:L(k,["prevent"])},{default:r(()=>[e(U,null,{default:r(()=>[e(n,{cols:"12",md:"3"},{default:r(()=>[e(m,{label:"Start",required:"","error-messages":o(a).errors.start,modelValue:o(a).start,"onUpdate:modelValue":t[0]||(t[0]=l=>o(a).start=l),variant:"plain",style:{height:"73px"}},null,8,["error-messages","modelValue"])]),_:1}),e(n,{cols:"12",md:"3"},{default:r(()=>[e(_,{type:"time",label:"Start",required:"","error-messages":o(a).errors.start_time,modelValue:o(a).start_time,"onUpdate:modelValue":t[1]||(t[1]=l=>o(a).start_time=l),variant:"plain"},null,8,["error-messages","modelValue"])]),_:1}),e(n,{cols:"12",md:"3"},{default:r(()=>[e(m,{label:"Ende",required:"","error-messages":o(a).errors.end,modelValue:o(a).end,"onUpdate:modelValue":t[2]||(t[2]=l=>o(a).end=l),variant:"plain",style:{height:"73px"}},null,8,["error-messages","modelValue"])]),_:1}),e(n,{cols:"12",md:"3"},{default:r(()=>[e(_,{type:"time",label:"Ende",required:"","error-messages":o(a).errors.end_time,modelValue:o(a).end_time,"onUpdate:modelValue":t[3]||(t[3]=l=>o(a).end_time=l),variant:"plain"},null,8,["error-messages","modelValue"])]),_:1}),e(n,{cols:"12"},{default:r(()=>[e(q,{label:"Bemerkung (optional)",modelValue:o(a).comment,"onUpdate:modelValue":t[4]||(t[4]=l=>o(a).comment=l),"error-messages":o(a).errors.comment,variant:"filled",rows:"3"},null,8,["modelValue","error-messages"])]),_:1}),e(n,{cols:"12",md:"3"},{default:r(()=>[e(B,{label:"Homeoffice",required:"","error-messages":o(a).errors.is_home_office,modelValue:o(a).is_home_office,"onUpdate:modelValue":t[5]||(t[5]=l=>o(a).is_home_office=l),variant:"plain","hide-details":""},null,8,["error-messages","modelValue"])]),_:1}),e(n,{cols:"12",class:"text-end"},{default:r(()=>[s.can("workLogPatch","create")||s.can("workLogPatch","update")?(g(),V(p,{key:0,loading:o(a).processing,type:"submit",color:"primary"},{default:r(()=>[f(I(s.can("workLogPatch","update")?"Speichern":"Beantragen"),1)]),_:1},8,["loading"])):F("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:2},1032,["title"])]),_:1},8,["modelValue"])}}});export{O as _};
