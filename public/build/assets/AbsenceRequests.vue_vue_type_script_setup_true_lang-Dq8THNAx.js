import{d as F,r as d,o as i,c as m,b as a,V as w,e as l,Q as B,k as p,u as f,D as v,R as T,v as U,f as y,g as N,h as b,i as Q,p as D,q as u,j as L,x as M,t as _,K as V,m as C,H as $}from"./app-DbYHIE_J.js";const j=F({__name:"AbsenceRequests",props:{absenceRequests:{}},setup(R){var k;const g=R,s=d(((k=g.absenceRequests)==null?void 0:k.find(n=>n.id==Number(route().params.openAbsence)))??null),o=d(!!s.value),q=d(!1),r=d(1);function x(n,e){var A;const t=(A=g.absenceRequests)==null?void 0:A.find(S=>S.id===e.item.id);t&&(s.value=t,o.value=!0)}function c(n){s.value&&$.patch(route("absence.update",{absence:s.value.id}),{accepted:n},{onSuccess:()=>{o.value=!1,q.value=!0}})}return(n,e)=>(i(),m(w,{title:"Abwesenheitsantr채ge"},{default:a(()=>[l(T,{hover:"","items-per-page":"5",page:r.value,"onUpdate:page":e[1]||(e[1]=t=>r.value=t),"no-data-text":"keine Abwesenheitsantr채ge vorhanden.","onClick:row":x,items:n.absenceRequests.map(t=>({id:t.id,user:t.user.first_name+" "+t.user.last_name,start:f(v).fromSQL(t.start).toFormat("dd.MM.yyyy"),end:f(v).fromSQL(t.end).toFormat("dd.MM.yyyy")})),headers:[{title:"Mitarbeiter",key:"user"},{title:"Von",key:"start"},{title:"Bis",key:"end"}]},{bottom:a(()=>[n.absenceRequests.length>5?(i(),m(B,{key:0,modelValue:r.value,"onUpdate:modelValue":e[0]||(e[0]=t=>r.value=t),length:Math.ceil(n.absenceRequests.length/5)},null,8,["modelValue","length"])):p("",!0)]),_:1},8,["page","items"]),s.value?(i(),m(U,{key:0,modelValue:o.value,"onUpdate:modelValue":e[6]||(e[6]=t=>o.value=t),"max-width":"1000"},{default:a(()=>[l(w,{title:"Abwesenheit von "+s.value.user.first_name+" "+s.value.user.last_name},{append:a(()=>[l(y,{icon:"",variant:"text",onClick:e[2]||(e[2]=t=>o.value=!1)},{default:a(()=>[l(N,null,{default:a(()=>e[7]||(e[7]=[b("mdi-close")])),_:1})]),_:1})]),default:a(()=>[l(Q,null,{default:a(()=>[l(D,null,{default:a(()=>[s.value.absence_type.name=="Urlaub"?(i(),m(u,{key:0,cols:"12"},{default:a(()=>[l(L,{type:s.value.user.leaveDaysForYear<s.value.usedDays?"warning":"info",class:"w-100"},{default:a(()=>[l(D,null,{default:a(()=>[l(u,{cols:"12",md:"6"},{default:a(()=>[M("div",null,"Verf체gbare Urlaubstage: "+_(s.value.user.leaveDaysForYear),1)]),_:1}),l(u,{cols:"12",md:"6"},{default:a(()=>[M("div",null,"Genutzte Tage f체r diese Abwesenheit: "+_(s.value.usedDays),1)]),_:1})]),_:1})]),_:1},8,["type"])]),_:1})):p("",!0),l(u,{cols:"12"},{default:a(()=>[l(V,{label:"Abwesenheitsgrund",modelValue:s.value.absence_type.name,"onUpdate:modelValue":e[3]||(e[3]=t=>s.value.absence_type.name=t),readonly:""},null,8,["modelValue"])]),_:1}),l(u,{cols:"12",md:"6"},{default:a(()=>[l(V,{label:"Von:","model-value":f(v).fromSQL(s.value.start).toFormat("dd.MM.yyyy"),readonly:""},null,8,["model-value"])]),_:1}),l(u,{cols:"12",md:"6"},{default:a(()=>[l(V,{label:"Bis:","model-value":f(v).fromSQL(s.value.end).toFormat("dd.MM.yyyy"),readonly:""},null,8,["model-value"])]),_:1})]),_:1})]),_:1}),l(u,{cols:"12",class:"d-flex justify-end ga-3"},{default:a(()=>[l(y,{color:"error",onClick:e[4]||(e[4]=C(t=>c(!1),["stop"]))},{default:a(()=>e[8]||(e[8]=[b("Ablehnen")])),_:1}),l(y,{color:"success",onClick:e[5]||(e[5]=C(t=>c(!0),["stop"]))},{default:a(()=>e[9]||(e[9]=[b("Akzeptieren")])),_:1})]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])):p("",!0)]),_:1}))}});export{j as _};
