import{d as b,n as T,H,D as m,o as f,c,a as s,V as G,b as t,u as i,G as w,e as v,m as y,p as d,x as r,Q as g,f as k,g as u,t as n,j as p,l as V,h as N}from"./app-CxU7NZGP.js";import{u as B,r as F}from"./utils-CD10vrGf.js";const M={class:"d-flex align-center ga-3"},O={class:"d-flex flex-column"},S={class:"text-h6"},$={class:"d-flex align-center ga-3"},A={class:"d-flex flex-column"},D={class:"text-h6"},K={class:"d-flex align-center ga-3"},Q={class:"d-flex flex-column"},U={class:"text-h6"},j={class:"d-flex align-center ga-3"},I={class:"d-flex flex-column"},R={class:"text-h6"},P=b({__name:"WorkingHours",props:{lastWorkLog:{},operating_times:{},overtime:{},workingHours:{}},setup(z){const a=z,W=T(),h=B();function L(o=!1){var e,l;w.post(route("workLog.store"),{is_home_office:o,id:(e=a.lastWorkLog)!=null&&e.end?null:(l=a.lastWorkLog)==null?void 0:l.id})}const C=H(()=>{var o,e;return(o=a.lastWorkLog)!=null&&o.end?a.workingHours.current:h.value.diff(m.fromSQL(((e=a.lastWorkLog)==null?void 0:e.start)||"")).as("hours")+a.workingHours.current}),x=H(()=>{if(!a.lastWorkLog)return;const o=m.fromSQL(a.lastWorkLog.end??a.lastWorkLog.start),e=h.value.diff(o);return e.as("hours")<1?"vor "+Math.floor(e.as("minutes"))+" minuten":o.day!==h.value.day?o.toFormat("dd.MM - HH:mm")+" Uhr":o.toFormat("HH:mm")+" Uhr"});return(o,e)=>(f(),c(G,{title:"Arbeitszeit"},{append:s(()=>[t(v,{icon:"mdi-eye",variant:"text",onClick:e[0]||(e[0]=l=>i(w).get(o.route("user.workLog.index",{user:i(W).props.auth.user.id})))})]),default:s(()=>[t(N,null,{default:s(()=>[t(y,null,{default:s(()=>[t(d,{cols:"12",sm:"6"},{default:s(()=>[r("div",M,[t(g,{color:"blue-grey",rounded:"",size:"40",class:"elevation-2"},{default:s(()=>[t(k,{size:"24",icon:"mdi-clock-check"})]),_:1}),r("div",O,[e[3]||(e[3]=u(" Woche gesamt ")),r("div",S,n(i(m).now().startOf("day").plus({hours:C.value}).toFormat("H:mm")),1)])])]),_:1}),o.$page.props.auth.user.home_office||o.workingHours.currentHomeOffice?(f(),c(d,{key:0,cols:"12",sm:"6"},{default:s(()=>[r("div",$,[t(g,{color:"green",rounded:"",size:"40",class:"elevation-2"},{default:s(()=>[t(k,{size:"24",icon:"mdi-clock-check"})]),_:1}),r("div",A,[e[4]||(e[4]=u(" Woche Homeoffice ")),r("div",D,n(i(m).now().startOf("day").plus({hours:o.workingHours.currentHomeOffice}).toFormat("H:mm")),1)])])]),_:1})):p("",!0),t(d,{cols:"12",sm:"6"},{default:s(()=>[r("div",K,[t(g,{color:"orange",rounded:"",size:"40",class:"elevation-2 text-white"},{default:s(()=>[t(k,{size:"24",icon:"mdi-clock-plus"})]),_:1}),r("div",Q,[e[5]||(e[5]=u(" Ãœberstunden ")),r("div",U,n(i(F)(o.overtime,2)),1)])])]),_:1}),o.lastWorkLog?(f(),c(d,{key:1,cols:"12",sm:"6"},{default:s(()=>[r("div",j,[t(g,{color:"blue",rounded:"",size:"40",class:"elevation-2"},{default:s(()=>[t(k,{size:"24",icon:"mdi-timer"})]),_:1}),r("div",I,[u(n(o.lastWorkLog.end?"Gehen":"Kommen")+" ",1),r("div",R,n(x.value),1)])])]),_:1})):p("",!0)]),_:1}),t(y,null,{default:s(()=>[i(W).props.auth.user.home_office&&(!o.lastWorkLog||o.lastWorkLog.end)||o.lastWorkLog&&o.lastWorkLog.is_home_office&&!o.lastWorkLog.end?(f(),c(d,{key:0,cols:"12",md:"6"},{default:s(()=>[t(v,{block:"",size:"large",onClick:e[1]||(e[1]=V(l=>L(!0),["stop"])),color:"primary",class:"me-2"},{default:s(()=>[u(n(!o.lastWorkLog||o.lastWorkLog.end?"Kommen Homeoffice":"Gehen Homeoffice"),1)]),_:1})]),_:1})):p("",!0),t(d,{cols:"12",md:"6"},{default:s(()=>{var l,_;return[(l=o.lastWorkLog)!=null&&l.end||!((_=o.lastWorkLog)!=null&&_.is_home_office)?(f(),c(v,{key:0,block:"",size:"large",onClick:e[2]||(e[2]=V(q=>L(),["stop"])),color:"primary"},{default:s(()=>[u(n(!o.lastWorkLog||o.lastWorkLog.end?"Kommen":"Gehen"),1)]),_:1})):p("",!0)]}),_:1})]),_:1})]),_:1})]),_:1}))}});export{P as _};
