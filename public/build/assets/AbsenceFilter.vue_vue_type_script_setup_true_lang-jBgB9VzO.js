import{d as y,A as g,B as F,w as V,a as v,o as n,b as a,f as r,V as A,g as k,C,m as x,h as d,E as B,G as w,H as f,i as j,l as i,q as o,t as D,n as c,I as M,J as N}from"./app-286sNBeA.js";const S={class:"d-flex justify-space-between"},U={key:1},E=y({__name:"AbsenceFilter",props:g({user_absence_filters:{},users:{},absence_types:{}},{filterForm:{required:!0},filterFormModifiers:{}}),emits:["update:filterForm"],setup(m){const p=m,e=F(m,"filterForm");V(()=>e.value.set,l=>{if(l==null)return;let s;if(typeof l=="object"&&e.value.isDirty?s=p.user_absence_filters.find(t=>t.id==l.value):typeof l=="string"&&(s=p.user_absence_filters.find(t=>t.name==l)),!s)return;const u={set:typeof l=="string"?{title:l,value:s.id}:l,selected_users:s.data.user_ids,selected_absence_types:s.data.absence_type_ids,selected_statuses:s.data.statuses};e.value.defaults(u),e.value.reset()});function b(){var l;typeof e.value.set!="string"&&((l=e.value.set)!=null&&l.value)?e.value.patch(route("userAbsenceFilter.update",{userAbsenceFilter:e.value.set.value})):e.value.post(route("userAbsenceFilter.store"))}function _(){const l={set:"",selected_users:[],selected_absence_types:[],selected_statuses:["created","accepted"]};e.value.defaults(l),e.value.reset()}return(l,s)=>(n(),v(N,{"max-width":"1000"},{activator:a(({props:u})=>[r(i,M(u,{variant:"flat",color:"primary"}),{default:a(()=>[r(c,null,{default:a(()=>[...s[6]||(s[6]=[o("mdi-filter",-1)])]),_:1})]),_:1},16)]),default:a(({isActive:u})=>[r(A,null,{title:a(()=>[...s[7]||(s[7]=[d("div",{class:"d-flex justify-space-between align-center w-100"},[d("span",null,"Abwesenheiten filtern")],-1)])]),append:a(()=>[r(i,{icon:"",variant:"text",onClick:t=>u.value=!1},{default:a(()=>[r(c,null,{default:a(()=>[...s[8]||(s[8]=[o("mdi-close",-1)])]),_:1})]),_:1},8,["onClick"])]),default:a(()=>[r(k,null,{default:a(()=>[r(C,{onSubmit:s[5]||(s[5]=x(t=>b(),["prevent"]))},{default:a(()=>[r(B,{label:"Filtergruppe auswählen oder neue erstellen","auto-select-first":"exact",variant:"underlined",items:l.user_absence_filters.map(t=>({value:t.id,title:t.name})),modelValue:e.value.set,"onUpdate:modelValue":s[0]||(s[0]=t=>e.value.set=t),"error-messages":e.value.errors.set,required:"",clearable:""},null,8,["items","modelValue","error-messages"]),r(w,{label:"Nutzer",items:l.users.map(t=>({title:t.first_name+" "+t.last_name,value:t.id})),modelValue:e.value.selected_users,"onUpdate:modelValue":s[1]||(s[1]=t=>e.value.selected_users=t),"error-messages":e.value.errors.selected_users,clearable:"",chips:"",multiple:"",variant:"underlined"},null,8,["items","modelValue","error-messages"]),r(f,{label:"Abwesenheitsgrund",items:l.absence_types.map(t=>({title:t.name,value:t.id})),modelValue:e.value.selected_absence_types,"onUpdate:modelValue":s[2]||(s[2]=t=>e.value.selected_absence_types=t),"error-messages":e.value.errors.selected_absence_types,clearable:"",chips:"",multiple:""},null,8,["items","modelValue","error-messages"]),r(f,{label:"Abwesenheitsstatus",items:[{title:"Erstellt",value:"created"},{title:"Akzeptiert",value:"accepted"},{title:"Abgelehnt",value:"declined"}],modelValue:e.value.selected_statuses,"onUpdate:modelValue":s[3]||(s[3]=t=>e.value.selected_statuses=t),"error-messages":e.value.errors.selected_statuses,clearable:"",chips:"",multiple:""},null,8,["modelValue","error-messages"]),d("div",S,[typeof e.value.set=="object"&&e.value.set!=null?(n(),v(i,{key:0,color:"error",onClick:s[4]||(s[4]=t=>{e.value.delete(l.route("userAbsenceFilter.destroy",{userAbsenceFilter:e.value.set.value}),{onSuccess:()=>{_()}})})},{default:a(()=>[...s[9]||(s[9]=[o(" Filter löschen ",-1)])]),_:1})):(n(),j("div",U)),r(i,{disabled:!e.value.isDirty,color:"primary",type:"submit"},{default:a(()=>[o(D(typeof e.value.set=="string"||e.value.set==null?"Filter anlegen":"Filter bearbeiten"),1)]),_:1},8,["disabled"])])]),_:1})]),_:1})]),_:2},1024)]),_:1}))}});export{E as _};
