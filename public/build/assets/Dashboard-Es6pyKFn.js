import{A as p}from"./AdminLayout-J0nzsn38.js";import{c as g}from"./utils-UWyPFyd-.js";import{d as y,u as k,a as n,o as i,b as t,f as a,K as l,L as s,e as d,V as c,h as _,y as b,g as o,D as m,l as w,A as H}from"./app-DiViWrGp.js";import{_ as V}from"./Absences.vue_vue_type_script_setup_true_lang-O2VnJylE.js";import{_ as v}from"./WorkingHours.vue_vue_type_script_setup_true_lang-voDluj91.js";import"./ChatDetails-B7I4IHdk.js";import"./ChatMessage-BgvlLMFZ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const B=y({__name:"Dashboard",props:{user:{},supervisor:{},overtime:{},workingHours:{},currentAbsences:{},lastEntries:{}},setup(D){const f=k();return(e,u)=>(i(),n(p,{noInlinePadding:o(f).smAndDown.value,title:"Dashboard"},{default:t(()=>[a(l,null,{default:t(()=>[a(s,{cols:"12",lg:"6"},{default:t(()=>[a(l,null,{default:t(()=>[e.can("app","tide")&&!e.user.current_trust_working_hours&&e.overtime&&e.workingHours?(i(),n(s,{key:0,cols:"12"},{default:t(()=>[a(v,{user:e.user,overtime:e.overtime,workingHours:e.workingHours},null,8,["user","overtime","workingHours"])]),_:1})):d("",!0),e.can("app","tide")&&e.lastEntries&&e.lastEntries.length>0?(i(),n(s,{key:1,cols:"12"},{default:t(()=>[a(c,{title:"Letzte Zeiterfassungen"},{append:t(()=>[a(w,{icon:"mdi-eye",variant:"text",title:"Alle Zeiten anzeigen","data-testid":"workingHours",onClick:u[0]||(u[0]=r=>o(H).get(e.route("user.workLog.index",{user:e.$page.props.auth.user.id})))})]),default:t(()=>[a(_,null,{default:t(()=>[a(b,{items:e.lastEntries.map(r=>({...r,start:o(m).fromSQL(r.start).toFormat("dd.MM.yyyy HH:mm"),end:r.end?o(m).fromSQL(r.end).toFormat("dd.MM.yyyy HH:mm"):"Jetzt",duration:o(g)(r.duration,"minutes")})),headers:[{title:"Start",key:"start",sortable:!1},{title:"Ende",key:"end",sortable:!1},{title:"Dauer",key:"duration",sortable:!1}]},null,8,["items"])]),_:1})]),_:1})]),_:1})):d("",!0)]),_:1})]),_:1}),a(s,{cols:"12",lg:"6"},{default:t(()=>[a(l,null,{default:t(()=>[a(s,{cols:"12"},{default:t(()=>[a(V,{absences:e.currentAbsences},null,8,["absences"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["noInlinePadding"]))}});export{B as default};
