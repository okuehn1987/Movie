import{d as z,S as B,o as i,c as m,a,b as l,A as C,u as e,v as w,e as f,T as A,f as _,V as S,g as k,z as N,h as P,k as T,l as F,m as h,p as d,x as g,s as u,q as x,W as D,j as p,P as E,I,N as L,U as R}from"./app-BKGO2zzB.js";import{_ as $}from"./ConfirmDelete.vue_vue_type_script_setup_true_lang-DLGPKRPI.js";import{_ as j}from"./AdminLayout.vue_vue_type_script_setup_true_lang-34hSNfTs.js";import{a as H,f as M,b as O}from"./utils-Ci62rx4T.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const Q=z({__name:"OperatingSiteIndex",props:{operatingSites:{},countries:{}},setup(v){const U=v,{currentPage:V,lastPage:b,data:y}=H(B(U),"operatingSites"),r=useForm({address_suffix:"",city:"",country:"",email:"",fax:"",federal_state:"",house_number:"",is_headquarter:!1,phone_number:"",street:"",zip:"",name:""});function q(){r.post(route("operatingSite.store"),{onSuccess:()=>r.reset()})}return(n,s)=>(i(),m(j,{title:"Betriebsstätten"},{default:a(()=>[l(S,null,{default:a(()=>[l(C,{hover:"",headers:[{title:"Name",key:"name"},{title:"Anschrift",key:"streetAddress"},{title:"Stadt",key:"cityAddress"},{title:"Land",key:"country"},{title:"Email",key:"email"},{title:"Telefonnummer",key:"phone_number"},{title:"",key:"action",align:"end",width:0}],items:e(y).map(o=>{const t=o.street&&o.house_number?o.street+" "+o.house_number:"/",c=o.zip&&o.city?o.zip+" "+o.city:"/";return{...e(M)(o),streetAddress:t,cityAddress:c}})},{"header.action":a(()=>[n.can("operatingSite","create")?(i(),m(w,{key:0,"max-width":"1000"},{activator:a(({props:o})=>[l(f,A(o,{color:"primary"}),{default:a(()=>[l(_,{icon:"mdi-plus"})]),_:2},1040)]),default:a(({isActive:o})=>[l(S,{title:"Betriebsstätte erstellen"},{append:a(()=>[l(f,{icon:"",variant:"text",onClick:t=>o.value=!1},{default:a(()=>[l(_,null,{default:a(()=>s[13]||(s[13]=[k("mdi-close")])),_:1})]),_:2},1032,["onClick"])]),default:a(()=>[l(N),l(P,null,{default:a(()=>[l(T,{onSubmit:F(q,["prevent"])},{default:a(()=>[l(h,null,{default:a(()=>[l(d,{cols:"12"},{default:a(()=>s[14]||(s[14]=[g("h3",null,"Kontaktinformationen",-1)])),_:1}),l(d,{cols:"12",md:"6"},{default:a(()=>[l(u,{label:"Name",required:"","error-messages":e(r).errors.street,modelValue:e(r).name,"onUpdate:modelValue":s[0]||(s[0]=t=>e(r).name=t)},null,8,["error-messages","modelValue"])]),_:1}),l(d,{cols:"12",md:"6"},{default:a(()=>[l(u,{label:"E-Mail ",required:"","error-messages":e(r).errors.email,modelValue:e(r).email,"onUpdate:modelValue":s[1]||(s[1]=t=>e(r).email=t)},null,8,["error-messages","modelValue"])]),_:1}),l(d,{cols:"12",md:"6"},{default:a(()=>[l(u,{label:"Telefonnummer",required:"","error-messages":e(r).errors.phone_number,modelValue:e(r).phone_number,"onUpdate:modelValue":s[2]||(s[2]=t=>e(r).phone_number=t)},null,8,["error-messages","modelValue"])]),_:1}),l(d,{cols:"12",md:"6"},{default:a(()=>[l(u,{label:"Fax (optional)",modelValue:e(r).fax,"onUpdate:modelValue":s[3]||(s[3]=t=>e(r).fax=t),"error-messages":e(r).errors.fax},null,8,["modelValue","error-messages"])]),_:1}),l(d,{cols:"12"},{default:a(()=>s[15]||(s[15]=[g("h3",null,"Adresse",-1)])),_:1}),l(d,{cols:"12",md:"6"},{default:a(()=>[l(x,{"data-testid":"land",label:"Land",required:"",items:n.countries.map(t=>({title:t.title,value:t.value})),"error-messages":e(r).errors.country,modelValue:e(r).country,"onUpdate:modelValue":s[4]||(s[4]=t=>e(r).country=t)},null,8,["items","error-messages","modelValue"])]),_:1}),l(d,{cols:"12",md:"6"},{default:a(()=>[l(x,{"data-testid":"bundesland",label:"Bundesland",items:e(O)(e(r).country,n.countries),disabled:!e(r).country,required:"","error-messages":e(r).errors.federal_state,modelValue:e(r).federal_state,"onUpdate:modelValue":s[5]||(s[5]=t=>e(r).federal_state=t)},null,8,["items","disabled","error-messages","modelValue"])]),_:1}),l(d,{cols:"12",md:"6"},{default:a(()=>[l(u,{label:"PLZ",required:"","error-messages":e(r).errors.zip,modelValue:e(r).zip,"onUpdate:modelValue":s[6]||(s[6]=t=>e(r).zip=t)},null,8,["error-messages","modelValue"])]),_:1}),l(d,{cols:"12",md:"6"},{default:a(()=>[l(u,{label:"Ort",required:"","error-messages":e(r).errors.city,modelValue:e(r).city,"onUpdate:modelValue":s[7]||(s[7]=t=>e(r).city=t)},null,8,["error-messages","modelValue"])]),_:1}),l(d,{cols:"12",md:"6"},{default:a(()=>[l(u,{label:"Straße",required:"","error-messages":e(r).errors.street,modelValue:e(r).street,"onUpdate:modelValue":s[8]||(s[8]=t=>e(r).street=t)},null,8,["error-messages","modelValue"])]),_:1}),l(d,{cols:"12",md:"6"},{default:a(()=>[l(u,{label:"Hausnummer",required:"","error-messages":e(r).errors.house_number,modelValue:e(r).house_number,"onUpdate:modelValue":s[9]||(s[9]=t=>e(r).house_number=t)},null,8,["error-messages","modelValue"])]),_:1}),l(d,{cols:"12",md:"6"},{default:a(()=>[l(u,{label:"Addresszusatz (optional)","error-messages":e(r).errors.address_suffix,modelValue:e(r).address_suffix,"onUpdate:modelValue":s[10]||(s[10]=t=>e(r).address_suffix=t)},null,8,["error-messages","modelValue"])]),_:1}),l(d,{cols:"12",md:"6"},{default:a(()=>[l(D,{modelValue:e(r).is_headquarter,"onUpdate:modelValue":s[11]||(s[11]=t=>e(r).is_headquarter=t),label:"Hauptsitz?"},null,8,["modelValue"])]),_:1}),l(d,{cols:"12",class:"text-end"},{default:a(()=>[l(f,{loading:e(r).processing,type:"submit",color:"primary"},{default:a(()=>s[16]||(s[16]=[k("Erstellen")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:2},1024)]),_:1})):p("",!0)]),"item.action":a(({item:o})=>[g("div",{class:I(["d-flex",{"justify-end":!e(y).some(t=>t.users_count==0&&n.can("operatingSite","delete",t))}])},[n.can("operatingSite","viewShow",o)?(i(),m(e(E),{key:0,href:n.route("operatingSite.show",{operatingSite:o.id})},{default:a(()=>[l(f,{color:"primary",size:"large",variant:"text",icon:"mdi-eye"})]),_:2},1032,["href"])):p("",!0),o.users_count==0&&n.can("operatingSite","delete",o)?(i(),m($,{key:1,content:"Bist du dir sicher, dass du die Betriebsstätte "+o.name+" entfernen möchtest?",route:n.route("operatingSite.destroy",{operatingSite:o.id}),title:"Betriebsstätte löschen"},null,8,["content","route"])):p("",!0)],2)]),bottom:a(()=>[e(b)>1?(i(),m(L,{key:0,modelValue:e(V),"onUpdate:modelValue":s[12]||(s[12]=o=>R(V)?V.value=o:null),length:e(b)},null,8,["modelValue","length"])):p("",!0)]),_:1},8,["items"])]),_:1})]),_:1}))}});export{Q as default};
