import{d as C,n as b,T as S,D as g,I as B,o as m,c as k,b as s,V as N,e as t,u as a,H as y,f as p,p as T,q as f,x as r,U as v,g as _,h as i,t as u,k as L,j as $,E as I,m as x,i as M}from"./app--IoUP8nr.js";import{a as A}from"./utils-CUhokxno.js";const D={class:"d-flex align-center ga-3"},E={class:"d-flex flex-column"},G={class:"text-h6"},F={class:"d-flex align-center ga-3"},K={class:"d-flex flex-column"},Q={class:"text-h6"},U={class:"d-flex align-center ga-3"},Z={class:"d-flex flex-column"},j={class:"text-h6"},q={class:"d-flex align-center ga-3"},O={class:"d-flex flex-column"},R={class:"text-h6"},J={key:1},Y=C({__name:"WorkingHours",props:{lastWorkLog:{},operating_times:{},overtime:{},workingHours:{}},setup(z){const n=z,h=b(),W=A();function w(o=!1){var e,l;y.post(route("workLog.store"),{is_home_office:o,id:(e=n.lastWorkLog)!=null&&e.end?null:(l=n.lastWorkLog)==null?void 0:l.id})}const H=n.operating_times.find(o=>{var e;return o.type==((e=S.weekdays("long",{locale:"en"})[g.now().weekday-1])==null?void 0:e.toLowerCase())}),V=B(()=>{var o,e;return(o=n.lastWorkLog)!=null&&o.end?n.workingHours.current:W.value.diff(g.fromSQL(((e=n.lastWorkLog)==null?void 0:e.start)||"")).as("hours")+n.workingHours.current});return(o,e)=>(m(),k(N,{title:"Arbeitszeit"},{append:s(()=>[t(p,{icon:"mdi-eye",variant:"text",onClick:e[0]||(e[0]=l=>a(y).get(o.route("user.workLog.index",{user:a(h).props.auth.user.id})))})]),default:s(()=>[t(M,null,{default:s(()=>[t(T,null,{default:s(()=>[t(f,{cols:"12",sm:"6"},{default:s(()=>[r("div",D,[t(v,{color:"blue-grey",rounded:"",size:"40",class:"elevation-2"},{default:s(()=>[t(_,{size:"24",icon:"mdi-clock"})]),_:1}),r("div",E,[e[3]||(e[3]=i(" Woche Soll ")),r("div",G,u(o.workingHours.should),1)])])]),_:1}),t(f,{cols:"12",sm:"6"},{default:s(()=>[r("div",F,[t(v,{color:"green",rounded:"",size:"40",class:"elevation-2"},{default:s(()=>[t(_,{size:"24",icon:"mdi-clock-check"})]),_:1}),r("div",K,[e[4]||(e[4]=i(" Woche Ist ")),r("div",Q,u(Math.floor(V.value||0))+":"+u(Math.floor((V.value||0)%1*60).toString().padStart(2,"0")),1)])])]),_:1}),t(f,{cols:"12",sm:"6"},{default:s(()=>[r("div",U,[t(v,{color:"orange",rounded:"",size:"40",class:"elevation-2 text-white"},{default:s(()=>[t(_,{size:"24",icon:"mdi-clock-plus"})]),_:1}),r("div",Z,[e[5]||(e[5]=i(" Ãœberstunden ")),r("div",j,u(o.overtime),1)])])]),_:1}),o.lastWorkLog&&o.lastWorkLog.end==null?(m(),k(f,{key:0,cols:"12",sm:"6"},{default:s(()=>[r("div",q,[t(v,{color:"blue",rounded:"",size:"40",class:"elevation-2"},{default:s(()=>[t(_,{size:"24",icon:"mdi-timer"})]),_:1}),r("div",O,[e[6]||(e[6]=i(" Hier seit ")),r("div",R,u(a(g).fromSQL(o.lastWorkLog.start).toFormat("HH:mm"))+" Uhr",1)])])]),_:1})):L("",!0),t(f,{cols:"12"},{default:s(()=>{var l,c;return[a(H)&&a(W).diff(a(g).fromFormat(a(H).end,"HH:mm")).as("minutes")>0?(m(),k($,{key:0,color:"error"},{default:s(()=>{var d;return[e[8]||(e[8]=i(" Es fehlt eine Meldung. Bitte Zeitkorrektur. ")),t(p,{color:"error",href:`/user/${a(h).props.auth.user.id}/workLogs?workLog=${(d=o.lastWorkLog)==null?void 0:d.id}`},{default:s(()=>e[7]||(e[7]=[i(" Zeitkorrektur ")])),_:1},8,["href"])]}),_:1})):a(h).props.auth.user.home_office&&((l=o.lastWorkLog)!=null&&l.end)||(c=o.lastWorkLog)!=null&&c.is_home_office&&!o.lastWorkLog.end?(m(),I("div",J,[t(p,{block:"",size:"large",onClick:e[1]||(e[1]=x(d=>w(!0),["stop"])),color:"primary",class:"me-2"},{default:s(()=>[i(u(o.lastWorkLog.end?"Kommen Homeoffice":"Gehen Homeoffice"),1)]),_:1})])):L("",!0)]}),_:1}),t(f,{cols:"12"},{default:s(()=>{var l,c;return[(l=o.lastWorkLog)!=null&&l.end||!((c=o.lastWorkLog)!=null&&c.is_home_office)?(m(),k(p,{key:0,block:"",size:"large",onClick:e[2]||(e[2]=x(d=>w(),["stop"])),color:"primary"},{default:s(()=>{var d;return[i(u((d=o.lastWorkLog)!=null&&d.end?"Kommen":"Gehen"),1)]}),_:1})):L("",!0)]}),_:1})]),_:1})]),_:1})]),_:1}))}});export{Y as _};
