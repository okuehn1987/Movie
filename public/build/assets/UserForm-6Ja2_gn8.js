import{d as R,av as A,D as _,ac as H,a as f,o as p,b as t,f as l,e as y,j as I,V as b,aq as N,aw as V,s as g,h as c,K as k,L as u,O as m,g as s,am as z,M as v,l as w,p as U,k as Z,S as P,t as B,y as F,m as h,J as q,ad as Q}from"./app-BzSCF_3H.js";import{j as J,o as G}from"./utils-xvx386M2.js";import{_ as Y}from"./HertaUserFormSections.vue_vue_type_script_setup_true_lang-BKA29QdZ.js";import{_ as L}from"./PermissionSelector.vue_vue_type_script_setup_true_lang-Cq01mmf4.js";import{_ as X}from"./_plugin-vue_export-helper-DlAUqK2U.js";const x={key:7,class:"d-flex justify-end"},ee=R({__name:"UserForm",props:{user:{},supervisors:{},operating_sites:{},groups:{},mode:{},countries:{},permissions:{}},emits:["close"],setup(E,{emit:K}){var O;const i=E,T=K,C=A.weekdays("long",{locale:"en"}).map(a=>a.toLowerCase()),D={first_name:"",last_name:"",academic_title:null,email:"",date_of_birth:null,show_date_of_birth_marker:!1,city:"",zip:"",street:"",house_number:"",address_suffix:"",country:((O=i.countries[0])==null?void 0:O.value)??"",federal_state:"",phone_number:"",staff_number:null,job_role:null,password:"",group_id:null,operating_site_id:null,supervisor_id:null,is_supervisor:!1,resignation_date:null,home_office:!1,home_office_hours_per_week:null,home_office_day_generators:[],use_time_balance_traffic_light:!1,time_balance_yellow_threshold:null,time_balance_red_threshold:null,user_working_hours:[],user_leave_days:[],user_working_weeks:[],initialRemainingLeaveDays:0,user_trust_working_hours:[],overtime_calculations_start:_.now().toFormat("yyyy-MM-dd"),organizationUser:{organization_permission:null,operatingSite_permission:null,group_permission:null,absence_permission:null,absenceType_permission:null,timeAccount_permission:null,timeAccountSetting_permission:null,timeAccountTransaction_permission:null,user_permission:null,specialWorkingHoursFactor_permission:null,workLogPatch_permission:null,workLog_permission:null,ticket_permission:null,ticket_accounting_permission:null,customer_permission:null},groupUser:{absenceType_permission:null,group_permission:null,absence_permission:null,timeAccount_permission:null,timeAccountSetting_permission:null,timeAccountTransaction_permission:null,user_permission:null,workLogPatch_permission:null,workLog_permission:null,ticket_permission:null,ticket_accounting_permission:null},operatingSiteUser:{absenceType_permission:null,operatingSite_permission:null,absence_permission:null,timeAccount_permission:null,timeAccountSetting_permission:null,timeAccountTransaction_permission:null,user_permission:null,workLog_permission:null,workLogPatch_permission:null,ticket_permission:null,ticket_accounting_permission:null}},e=useForm(D);function j(){if(i.user){e.first_name=i.user.first_name,e.last_name=i.user.last_name,e.academic_title=i.user.academic_title,e.email=i.user.email,e.date_of_birth=i.user.date_of_birth,e.show_date_of_birth_marker=i.user.show_date_of_birth_marker,e.city=i.user.current_address.city??"",e.zip=i.user.current_address.zip??"",e.street=i.user.current_address.street??"",e.house_number=i.user.current_address.house_number??"",e.address_suffix=i.user.current_address.address_suffix??"",e.country=i.user.current_address.country??"",e.federal_state=i.user.current_address.federal_state??"",e.phone_number=i.user.phone_number??"",e.staff_number=i.user.staff_number,e.job_role=i.user.job_role,e.password=i.user.password,e.group_id=i.user.group_id,e.operating_site_id=i.user.operating_site_id,e.supervisor_id=i.user.supervisor_id,e.resignation_date=i.user.resignation_date,e.home_office=i.user.home_office,e.home_office_hours_per_week=i.user.home_office_hours_per_week,e.overtime_calculations_start=i.user.overtime_calculations_start,e.use_time_balance_traffic_light=i.user.time_balance_red_threshold!==null&&i.user.time_balance_yellow_threshold!==null,e.time_balance_yellow_threshold=i.user.time_balance_yellow_threshold,e.time_balance_red_threshold=i.user.time_balance_red_threshold,e.is_supervisor=i.user.is_supervisor,e.user_leave_days=i.user.user_leave_days.filter(a=>a!==null).map(a=>({...a,active_since:_.fromSQL(a.active_since).toFormat("yyyy-MM")})),e.user_leave_days.length==0&&e.user_leave_days.push({id:null,active_since:_.now().toFormat("yyyy-MM"),leave_days:0}),e.user_working_hours=i.user.user_working_hours??[];for(const a of i.user.user_working_weeks){const o=[];for(const r of C)a[r]&&o.push(r);e.user_working_weeks.push({id:a.id,active_since:a.active_since,weekdays:o})}e.user_trust_working_hours=i.user.user_trust_working_hours;for(const a of i.user.home_office_day_generators){const o=[];for(const r of C)a[r]&&o.push(r);e.home_office_day_generators.push({id:a.id,start:a.start,end:a.end,weekdays:o})}for(const a in e.organizationUser)e.organizationUser[a]=i.user.organization_user[a];for(const a in e.groupUser)e.groupUser[a]=(i.user.group_user??e.groupUser)[a];for(const a in e.operatingSiteUser)e.operatingSiteUser[a]=i.user.operating_site_user[a]}}H(()=>j());function W(){const a=e.transform(r=>({...r,organizationUser:Object.fromEntries(Object.entries(r.organizationUser).filter(([n])=>i.permissions.find(d=>d.name==n))),groupUser:Object.fromEntries(Object.entries(r.groupUser).filter(([n])=>i.permissions.find(d=>d.name==n))),operatingSiteUser:Object.fromEntries(Object.entries(r.operatingSiteUser).filter(([n])=>i.permissions.find(d=>d.name==n)))})),o=()=>{Q(()=>{var d;const n=[...document.querySelectorAll('#userForm [role="alert"] > .v-messages')].filter(M=>M.children.length>0)[0];n&&((d=n.offsetParent)==null||d.scrollIntoView({behavior:"smooth"}))})};i.mode=="edit"&&i.user?a.patch(route("user.update",{user:i.user.id}),{onError:o,onSuccess:()=>{e.defaults(D),e.reset(),j()}}):a.post(route("user.store"),{onSuccess:()=>{a.reset(),T("close")},onError:o})}function $(a){var r;if(i.user&&!can("user","update"))return!0;const o=(r=i.user)==null?void 0:r.user_leave_days.find(n=>(n==null?void 0:n.id)===a.id);return o?o.active_since<_.now().startOf("year").toFormat("yyyy-MM-dd"):!1}return(a,o)=>(p(),f(q,{id:"userForm",onSubmit:h(W,["prevent"]),disabled:a.user&&!a.can("user","update")},{default:t(()=>[l(b,{class:"mb-4"},N({default:t(()=>[l(V,null,{default:t(()=>[...o[35]||(o[35]=[g("Persönliche Daten",-1)])]),_:1}),l(c,null,{default:t(()=>[l(k,null,{default:t(()=>[l(u,{cols:"12",md:"2"},{default:t(()=>[l(m,{modelValue:s(e).academic_title,"onUpdate:modelValue":o[0]||(o[0]=r=>s(e).academic_title=r),label:"Akademischer Titel","error-messages":s(e).errors.academic_title},null,8,["modelValue","error-messages"])]),_:1}),l(u,{cols:"12",md:"4"},{default:t(()=>[l(m,{modelValue:s(e).first_name,"onUpdate:modelValue":o[1]||(o[1]=r=>s(e).first_name=r),label:"Vorname","error-messages":s(e).errors.first_name},null,8,["modelValue","error-messages"])]),_:1}),l(u,{cols:"12",md:"6"},{default:t(()=>[l(m,{modelValue:s(e).last_name,"onUpdate:modelValue":o[2]||(o[2]=r=>s(e).last_name=r),label:"Nachname","error-messages":s(e).errors.last_name},null,8,["modelValue","error-messages"])]),_:1}),l(u,{cols:"12",md:"6"},{default:t(()=>[l(m,{modelValue:s(e).email,"onUpdate:modelValue":o[3]||(o[3]=r=>s(e).email=r),label:"Email","error-messages":s(e).errors.email},null,8,["modelValue","error-messages"])]),_:1}),a.mode=="create"?(p(),f(u,{key:0,cols:"12",md:"6"},{default:t(()=>[l(m,{modelValue:s(e).password,"onUpdate:modelValue":o[4]||(o[4]=r=>s(e).password=r),label:"Passwort","error-messages":s(e).errors.password},null,8,["modelValue","error-messages"])]),_:1})):y("",!0),l(u,{cols:"12",md:a.mode=="create"?"6":"3"},{default:t(()=>[l(m,{type:"date",modelValue:s(e).date_of_birth,"onUpdate:modelValue":o[5]||(o[5]=r=>s(e).date_of_birth=r),label:"Geburtsdatum","error-messages":s(e).errors.date_of_birth},null,8,["modelValue","error-messages"])]),_:1},8,["md"]),l(u,{cols:"12",md:a.mode=="create"?"6":"3"},{default:t(()=>[l(z,{modelValue:s(e).show_date_of_birth_marker,"onUpdate:modelValue":o[6]||(o[6]=r=>s(e).show_date_of_birth_marker=r),label:"Geburtstag im Kalender anzeigen","error-messages":s(e).errors.show_date_of_birth_marker},null,8,["modelValue","error-messages"])]),_:1},8,["md"]),l(u,{cols:"12",md:"6"},{default:t(()=>[l(m,{modelValue:s(e).staff_number,"onUpdate:modelValue":o[7]||(o[7]=r=>s(e).staff_number=r),label:"Personalnummer (optional)","error-messages":s(e).errors.staff_number},null,8,["modelValue","error-messages"])]),_:1}),l(u,{cols:"12",md:"6"},{default:t(()=>[l(m,{modelValue:s(e).job_role,"onUpdate:modelValue":o[8]||(o[8]=r=>s(e).job_role=r),label:"Stellenbezeichnung (optional)","error-messages":s(e).errors.job_role},null,8,["modelValue","error-messages"])]),_:1}),l(u,{cols:"12",md:"6"},{default:t(()=>[l(m,{modelValue:s(e).street,"onUpdate:modelValue":o[9]||(o[9]=r=>s(e).street=r),label:"Straße (optional)","error-messages":s(e).errors.street},null,8,["modelValue","error-messages"])]),_:1}),l(u,{cols:"12",md:"6"},{default:t(()=>[l(m,{modelValue:s(e).house_number,"onUpdate:modelValue":o[10]||(o[10]=r=>s(e).house_number=r),label:"Hausnummer (optional)","error-messages":s(e).errors.house_number},null,8,["modelValue","error-messages"])]),_:1}),l(u,{cols:"12",md:"6"},{default:t(()=>[l(m,{modelValue:s(e).zip,"onUpdate:modelValue":o[11]||(o[11]=r=>s(e).zip=r),label:"Postleitzahl (optional)","error-messages":s(e).errors.zip},null,8,["modelValue","error-messages"])]),_:1}),l(u,{cols:"12",md:"6"},{default:t(()=>[l(m,{modelValue:s(e).city,"onUpdate:modelValue":o[12]||(o[12]=r=>s(e).city=r),label:"Ort (optional)","error-messages":s(e).errors.city},null,8,["modelValue","error-messages"])]),_:1}),l(u,{cols:"12",md:"6"},{default:t(()=>[l(v,{"data-testid":"land",label:"Land",items:a.countries,"error-messages":s(e).errors.country,modelValue:s(e).country,"onUpdate:modelValue":o[13]||(o[13]=r=>s(e).country=r)},null,8,["items","error-messages","modelValue"])]),_:1}),l(u,{cols:"12",md:"6"},{default:t(()=>[l(v,{"data-testid":"federal_state",label:"Bundesland",items:s(J)(s(e).country,a.countries),disabled:a.user&&!a.can("user","update")||!s(e).country,"error-messages":s(e).errors.federal_state,modelValue:s(e).federal_state,"onUpdate:modelValue":o[14]||(o[14]=r=>s(e).federal_state=r)},null,8,["items","disabled","error-messages","modelValue"])]),_:1})]),_:1})]),_:1})]),_:2},[a.mode=="create"?{name:"append",fn:t(()=>[l(w,{icon:"",variant:"text",onClick:o[15]||(o[15]=r=>{T("close"),s(e).reset()})},{default:t(()=>[l(U,null,{default:t(()=>[...o[36]||(o[36]=[g("mdi-close",-1)])]),_:1})]),_:1})]),key:"0"}:void 0]),1024),a.can("app","tide")?(p(),f(Y,{key:0,mode:a.mode,user:a.user,"user-form":s(e),"onUpdate:userForm":o[16]||(o[16]=r=>Z(e)?e.value=r:null)},null,8,["mode","user","user-form"])):y("",!0),l(b,{class:"mb-4"},{default:t(()=>[l(V,null,{default:t(()=>[...o[37]||(o[37]=[g("Arbeitswoche",-1)])]),_:1}),l(c,null,{default:t(()=>[l(k,null,{default:t(()=>[s(e).errors.user_working_weeks?(p(),f(u,{key:0,cols:"12"},{default:t(()=>[l(P,{type:"error"},{default:t(()=>[g(B(s(e).errors.user_working_weeks),1)]),_:1})]),_:1})):y("",!0),l(u,{cols:"12"},{default:t(()=>[l(F,{items:s(e).user_working_weeks,headers:[{title:"Beschäftigungstage",key:"weekdays",width:"50%",sortable:!1},{title:"Aktiv seit",key:"active_since",sortable:!1},{title:"",key:"actions",align:"end",sortable:!1}]},{"header.actions":t(()=>[!a.user||a.can("user","update")?(p(),f(w,{key:0,color:"primary",onClick:o[17]||(o[17]=h(r=>s(e).user_working_weeks.push({active_since:"",id:null,weekdays:[]}),["stop"]))},{default:t(()=>[l(U,{icon:"mdi-plus"})]),_:1})):y("",!0)]),"item.weekdays":t(({item:r,index:n})=>[l(v,{"data-testid":"userWorkingDays",chips:"",disabled:a.user&&!a.can("user","update")||!!r.active_since&&r.active_since<s(_).now().toFormat("yyyy-MM-dd"),modelValue:r.weekdays,"onUpdate:modelValue":d=>r.weekdays=d,multiple:"",items:s(A).weekdays().map((d,M)=>{var S;return{title:d,value:(S=s(A).weekdays("long",{locale:"en"})[M])==null?void 0:S.toLowerCase()}}),"error-messages":s(e).errors[`user_working_weeks.${n}.weekdays`]},null,8,["disabled","modelValue","onUpdate:modelValue","items","error-messages"])]),"item.active_since":t(({item:r,index:n})=>[l(m,{"data-testid":"userWorkingDays-since",type:"date",variant:"underlined",min:a.mode=="edit"?s(_).now().plus({days:1}).toFormat("yyyy-MM-dd"):void 0,modelValue:r.active_since,"onUpdate:modelValue":d=>r.active_since=d,disabled:a.user&&!a.can("user","update")||!!r.active_since&&r.active_since<s(_).now().toFormat("yyyy-MM-dd"),"error-messages":s(e).errors[`user_working_weeks.${n}.active_since`]},null,8,["min","modelValue","onUpdate:modelValue","disabled","error-messages"])]),"item.actions":t(({item:r,index:n})=>[(!a.user||a.can("user","update"))&&(!r.id||r.active_since>s(_).now().toFormat("yyyy-MM-dd"))?(p(),f(w,{key:0,color:"error",onClick:h(d=>s(e).user_working_weeks.splice(n,1),["stop"])},{default:t(()=>[l(U,{icon:"mdi-delete"})]),_:1},8,["onClick"])):y("",!0)]),_:1},8,["items"])]),_:1})]),_:1})]),_:1})]),_:1}),l(b,{class:"mb-4"},{default:t(()=>[l(V,null,{default:t(()=>[...o[38]||(o[38]=[g("Urlaubstage",-1)])]),_:1}),l(c,null,{default:t(()=>[l(k,null,{default:t(()=>[s(e).errors.user_leave_days?(p(),f(u,{key:0,cols:"12"},{default:t(()=>[l(P,{type:"error"},{default:t(()=>[g(B(s(e).errors.user_leave_days),1)]),_:1})]),_:1})):y("",!0),l(u,{cols:"12"},{default:t(()=>[l(F,{items:s(e).user_leave_days,headers:[{title:"Anzahl der Urlaubstage",key:"leave_days",width:"50%",sortable:!1},{title:"Aktiv seit",key:"active_since",sortable:!1},{title:"",key:"actions",align:"end",sortable:!1}]},{"header.actions":t(()=>[!a.user||a.can("user","update")?(p(),f(w,{key:0,color:"primary",onClick:o[18]||(o[18]=h(r=>s(e).user_leave_days.push({active_since:"",id:null,leave_days:0}),["stop"]))},{default:t(()=>[l(U,{icon:"mdi-plus"})]),_:1})):y("",!0)]),"item.leave_days":t(({item:r,index:n})=>[l(m,{"data-testid":"userLeaveDays",type:"number",variant:"underlined",modelValue:r.leave_days,"onUpdate:modelValue":d=>r.leave_days=d,"error-messages":s(e).errors[`user_leave_days.${n}.leave_days`],disabled:$(r)},null,8,["modelValue","onUpdate:modelValue","error-messages","disabled"])]),"item.active_since":t(({item:r,index:n})=>[l(m,{"data-testid":"userLeaveDays-since",type:"month",min:a.mode=="edit"?s(_).now().startOf("month").toFormat("yyyy-MM"):void 0,variant:"underlined",modelValue:r.active_since,"onUpdate:modelValue":d=>r.active_since=d,disabled:$(r),"error-messages":s(e).errors[`user_leave_days.${n}.active_since`]},null,8,["min","modelValue","onUpdate:modelValue","disabled","error-messages"])]),"item.actions":t(({item:r,index:n})=>[(!a.user||a.can("user","update"))&&(!r.id||r.active_since>s(_).now().toFormat("yyyy-MM-dd"))?(p(),f(w,{key:0,color:"error",onClick:h(d=>s(e).user_leave_days.splice(n,1),["stop"])},{default:t(()=>[l(U,{icon:"mdi-delete"})]),_:1},8,["onClick"])):y("",!0)]),_:1},8,["items"])]),_:1}),a.mode=="create"?(p(),f(u,{key:1,cols:"12"},{default:t(()=>[l(m,{type:"number",modelValue:s(e).initialRemainingLeaveDays,"onUpdate:modelValue":o[19]||(o[19]=r=>s(e).initialRemainingLeaveDays=r),label:`Trage die aus ${s(_).now().year-1} übernommenen Urlaubstage des Mitarbeitenden ein`,"error-messages":s(e).errors.initialRemainingLeaveDays},null,8,["modelValue","label","error-messages"])]),_:1})):y("",!0)]),_:1})]),_:1})]),_:1}),a.user&&a.can("user","update")||!a.user?(p(),f(b,{key:1,class:"mb-4",title:"Gleitzeitkonto"},{default:t(()=>[l(c,null,{default:t(()=>[l(k,null,{default:t(()=>[l(u,{cols:"12"},{default:t(()=>[l(z,{modelValue:s(e).use_time_balance_traffic_light,"onUpdate:modelValue":o[20]||(o[20]=r=>s(e).use_time_balance_traffic_light=r),label:"Gleitzeitampelsystem verwenden","error-messages":s(e).errors.use_time_balance_traffic_light},null,8,["modelValue","error-messages"])]),_:1}),l(u,{cols:"12",md:"6"},{default:t(()=>[l(m,{type:"number",modelValue:s(e).time_balance_yellow_threshold,"onUpdate:modelValue":o[21]||(o[21]=r=>s(e).time_balance_yellow_threshold=r),label:"Gelbe Grenze für Überstunden im Gleitzeitkonto","error-messages":s(e).errors.time_balance_yellow_threshold,disabled:!s(e).use_time_balance_traffic_light},null,8,["modelValue","error-messages","disabled"])]),_:1}),l(u,{cols:"12",md:"6"},{default:t(()=>[l(m,{type:"number",modelValue:s(e).time_balance_red_threshold,"onUpdate:modelValue":o[22]||(o[22]=r=>s(e).time_balance_red_threshold=r),label:"Rote Grenze für Überstunden im Gleitzeitkonto","error-messages":s(e).errors.time_balance_red_threshold,disabled:!s(e).use_time_balance_traffic_light},null,8,["modelValue","error-messages","disabled"])]),_:1})]),_:1})]),_:1})]),_:1})):y("",!0),a.user&&a.can("user","update")||!a.user?(p(),f(b,{key:2,class:"mb-4"},{default:t(()=>[l(V,null,{default:t(()=>[...o[39]||(o[39]=[g("Homeoffice",-1)])]),_:1}),l(c,null,{default:t(()=>[l(k,null,{default:t(()=>[l(u,{cols:"12",md:"6"},{default:t(()=>[l(z,{modelValue:s(e).home_office,"onUpdate:modelValue":[o[23]||(o[23]=r=>s(e).home_office=r),o[24]||(o[24]=r=>{r||(s(e).home_office_hours_per_week=null)})],label:"Darf der Mitarbeitende Homeoffice machen?",disabled:!!s(e).home_office_day_generators.find(r=>r.end&&s(_).fromSQL(r.end)>s(_).now())||a.user&&!a.can("user","update"),"error-messages":s(e).errors.home_office},null,8,["modelValue","disabled","error-messages"])]),_:1}),l(u,{cols:"12",md:"6"},{default:t(()=>[l(m,{type:"number",modelValue:s(e).home_office_hours_per_week,"onUpdate:modelValue":o[25]||(o[25]=r=>s(e).home_office_hours_per_week=r),label:"Homeoffice Stunden pro Woche (optional)",disabled:!s(e).home_office,"error-messages":s(e).errors.home_office_hours_per_week},null,8,["modelValue","disabled","error-messages"])]),_:1}),l(u,{cols:"12"},{default:t(()=>[l(F,{items:s(e).home_office_day_generators,headers:[{title:"Homeoffice Tage",key:"weekdays",width:"50%",sortable:!1},{title:"Start",key:"start",sortable:!1},{title:"Ende",key:"end",sortable:!1},{title:"",key:"actions",align:"end",sortable:!1}]},{"header.actions":t(()=>[!a.user||a.can("user","update")?(p(),f(w,{key:0,disabled:!s(e).home_office,color:"primary",onClick:o[26]||(o[26]=h(r=>s(e).home_office_day_generators.push({start:"",end:"",id:null,weekdays:[]}),["stop"]))},{default:t(()=>[l(U,{icon:"mdi-plus"})]),_:1},8,["disabled"])):y("",!0)]),"item.weekdays":t(({item:r,index:n})=>[l(v,{chips:"",disabled:a.user&&(!a.can("user","update")||r.id!=null&&r.start!=null&&r.start<s(_).now().toFormat("yyyy-MM-dd")),modelValue:r.weekdays,"onUpdate:modelValue":d=>r.weekdays=d,multiple:"",items:s(A).weekdays().map((d,M)=>{var S;return{title:d,value:(S=s(A).weekdays("long",{locale:"en"})[M])==null?void 0:S.toLowerCase()}}),"error-messages":s(e).errors[`home_office_day_generators.${n}.weekdays`]},null,8,["disabled","modelValue","onUpdate:modelValue","items","error-messages"])]),"item.start":t(({item:r,index:n})=>[l(m,{type:"date",variant:"underlined",disabled:r.id!=null&&r.start!=null&&r.start<s(_).now().toFormat("yyyy-MM-dd"),min:a.mode=="edit"?s(_).now().toFormat("yyyy-MM-dd"):void 0,modelValue:r.start,"onUpdate:modelValue":d=>r.start=d,"error-messages":s(e).errors[`home_office_day_generators.${n}.start`]},null,8,["disabled","min","modelValue","onUpdate:modelValue","error-messages"])]),"item.end":t(({item:r,index:n})=>[l(m,{type:"date",variant:"underlined",disabled:r.id!=null&&r.end!=null&&r.end<s(_).now().toFormat("yyyy-MM-dd"),min:a.mode=="edit"?s(_).now().toFormat("yyyy-MM-dd"):void 0,modelValue:r.end,"onUpdate:modelValue":d=>r.end=d,"error-messages":s(e).errors[`home_office_day_generators.${n}.end`]},null,8,["disabled","min","modelValue","onUpdate:modelValue","error-messages"])]),"item.actions":t(({item:r,index:n})=>[(!a.user||a.can("user","update"))&&(!r.id||r.start&&r.start>s(_).now().toFormat("yyyy-MM-dd"))?(p(),f(w,{key:0,color:"error",onClick:h(d=>s(e).home_office_day_generators.splice(n,1),["stop"])},{default:t(()=>[l(U,{icon:"mdi-delete"})]),_:1},8,["onClick"])):y("",!0)]),_:1},8,["items"])]),_:1})]),_:1})]),_:1})]),_:1})):y("",!0),a.user&&a.can("user","update")||!a.user?(p(),f(b,{key:3,class:"mb-4"},{default:t(()=>[l(V,null,{default:t(()=>[...o[40]||(o[40]=[g("Organisation",-1)])]),_:1}),l(c,null,{default:t(()=>[l(k,null,{default:t(()=>[l(L,{modelValue:s(e).organizationUser,"onUpdate:modelValue":o[27]||(o[27]=r=>s(e).organizationUser=r),objKey:"organizationUser",permissions:a.permissions,errors:s(e).errors,label:"Organisationsrechte",items:[{label:"Zeiterfassung",keys:["workLog_permission","workLogPatch_permission","timeAccount_permission","timeAccountSetting_permission","timeAccountTransaction_permission"]},{label:"Abwesenheiten",keys:["absence_permission","absenceType_permission"]},{label:"Mitarbeiter",keys:["user_permission"]},{label:"Organisation",keys:["organization_permission"]},{label:"Ticket",keys:["ticket_permission","ticket_accounting_permission"]},{label:"Kunden",keys:["customer_permission"]}]},null,8,["modelValue","permissions","errors"])]),_:1})]),_:1})]),_:1})):y("",!0),a.user&&a.can("user","update")||!a.user?(p(),f(b,{key:4,class:"mb-4"},{default:t(()=>[l(V,null,{default:t(()=>[...o[41]||(o[41]=[g("Betriebsstätte",-1)])]),_:1}),l(c,null,{default:t(()=>[l(k,null,{default:t(()=>[l(u,{cols:"12",class:"mb-4"},{default:t(()=>[l(v,{modelValue:s(e).operating_site_id,"onUpdate:modelValue":o[28]||(o[28]=r=>s(e).operating_site_id=r),items:a.operating_sites.map(r=>({title:r.name,value:r.id})),label:"Wähle die Betriebsstätte des Mitarbeiters aus.","error-messages":s(e).errors.operating_site_id,"data-testid":"userOperatingSiteSelection"},null,8,["modelValue","items","error-messages"])]),_:1}),l(L,{modelValue:s(e).operatingSiteUser,"onUpdate:modelValue":o[29]||(o[29]=r=>s(e).operatingSiteUser=r),objKey:"operatingSiteUser",permissions:a.permissions,errors:s(e).errors,label:"Wähle die Rechte des Mitarbeitenden für die ausgewählte Betriebsstätte aus","data-testid":"userOperatingSitePermissions",items:[{label:"Zeiterfassung",keys:["workLog_permission","workLogPatch_permission","timeAccount_permission","timeAccountSetting_permission","timeAccountTransaction_permission"]},{label:"Abwesenheiten",keys:["absence_permission","absenceType_permission"]},{label:"Mitarbeiter",keys:["user_permission"]},{label:"Betriebsstätte",keys:["operatingSite_permission"]},{label:"Ticket",keys:["ticket_permission","ticket_accounting_permission"]}]},null,8,["modelValue","permissions","errors"])]),_:1})]),_:1})]),_:1})):y("",!0),a.user&&a.can("user","update")||!a.user?(p(),f(b,{key:5,class:"mb-4"},{default:t(()=>[l(V,null,{default:t(()=>[...o[42]||(o[42]=[g("Abteilung",-1)])]),_:1}),l(c,null,{default:t(()=>[l(k,null,{default:t(()=>{var r;return[l(u,{cols:"12",class:"mb-4"},{default:t(()=>[l(v,{modelValue:s(e).group_id,"onUpdate:modelValue":o[30]||(o[30]=n=>s(e).group_id=n),items:a.groups.map(n=>({title:n.name,value:n.id})),label:"Wähle eine Abteilung aus, zu die der Mitarbeiter gehören soll. (optional)","error-messages":s(e).errors.group_id,"data-testid":"userGroupSelection"},null,8,["modelValue","items","error-messages"])]),_:1}),(r=s(e))!=null&&r.group_id?(p(),f(L,{key:0,modelValue:s(e).groupUser,"onUpdate:modelValue":o[31]||(o[31]=n=>s(e).groupUser=n),objKey:"groupUser",permissions:a.permissions,errors:s(e).errors,label:"Abteilungsrechte","data-testid":"userGroupPermissions",items:[{label:"Zeiterfassung",keys:["workLog_permission","workLogPatch_permission","timeAccount_permission","timeAccountSetting_permission","timeAccountTransaction_permission"]},{label:"Abwesenheiten",keys:["absence_permission","absenceType_permission"]},{label:"Mitarbeiter",keys:["user_permission"]},{label:"Abteilung",keys:["group_permission"]},{label:"Ticket",keys:["ticket_permission","ticket_accounting_permission"]}]},null,8,["modelValue","permissions","errors"])):y("",!0)]}),_:1})]),_:1})]),_:1})):y("",!0),l(b,{class:"mb-4"},{default:t(()=>[l(V,null,{default:t(()=>[...o[43]||(o[43]=[g("Vorgesetzter",-1)])]),_:1}),l(c,null,{default:t(()=>[l(k,null,{default:t(()=>[l(u,{cols:"12",md:"6"},{default:t(()=>[l(v,{modelValue:s(e).supervisor_id,"onUpdate:modelValue":o[32]||(o[32]=r=>s(e).supervisor_id=r),items:a.supervisors.map(r=>({title:r.first_name+" "+r.last_name,value:r.id})),label:"Wähle einen Vorgesetzten, falls vorhanden (optional)","error-messages":s(e).errors.supervisor_id,"data-testid":"userSupervisorSelection"},null,8,["modelValue","items","error-messages"])]),_:1}),a.user&&a.can("user","update")?(p(),f(u,{key:0,cols:"12",md:"6"},{default:t(()=>[l(z,{modelValue:s(e).is_supervisor,"onUpdate:modelValue":o[33]||(o[33]=r=>s(e).is_supervisor=r),label:"Ist ein Vorgesetzter"},null,8,["modelValue"])]),_:1})):y("",!0)]),_:1})]),_:1})]),_:1}),a.user&&a.can("user","update")?(p(),f(b,{key:6,class:"mb-4"},{default:t(()=>[l(V,null,{default:t(()=>[...o[44]||(o[44]=[g("Kündigungseinstellungen",-1)])]),_:1}),l(c,null,{default:t(()=>[l(k,null,{default:t(()=>[l(u,{cols:"12",md:"3"},{default:t(()=>[l(m,{type:"date",label:"Kündigungsdatum",min:s(G)()!="Apple Safari"?s(_).now().plus({day:1}).toFormat("yyyy-MM-dd"):void 0,modelValue:s(e).resignation_date,"onUpdate:modelValue":o[34]||(o[34]=r=>s(e).resignation_date=r),disabled:s(G)()!="Apple Safari"?!!s(e).resignation_date&&s(_).now().toFormat("yyyy-MM-dd")>s(e).resignation_date:!1,"error-messages":s(e).errors.resignation_date,clearable:""},null,8,["min","modelValue","disabled","error-messages"])]),_:1})]),_:1})]),_:1})]),_:1})):y("",!0),a.user&&a.can("user","update")||!a.user?(p(),I("div",x,[l(w,{type:"submit",color:"primary",loading:s(e).processing},{default:t(()=>[...o[45]||(o[45]=[g("Speichern",-1)])]),_:1},8,["loading"])])):y("",!0)]),_:1},8,["disabled"]))}}),te=X(ee,[["__scopeId","data-v-860de631"]]);export{te as default};
