import{_ as k}from"./AdminLayout.vue_vue_type_script_setup_true_lang-C6iWtc8i.js";import{d as c,r as _,o as g,c as f,a as r,b as a,p as i,V as h,e as L,u as s,G as y,h as V,N as v,D as l,O as W,j as b,m as H}from"./app-DkpBc9Nv.js";import{_ as C}from"./Absences.vue_vue_type_script_setup_true_lang-2E5yv7DQ.js";import{_ as $}from"./WorkingHours.vue_vue_type_script_setup_true_lang-UFvoOROm.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./utils-vdCrgQWo.js";const N=c({__name:"Dashboard",props:{lastWorkLog:{},supervisor:{},patches:{},operating_times:{},overtime:{},workingHours:{},currentAbsences:{},lastWeekWorkLogs:{}},setup(D){const n=_(1);return(t,o)=>(g(),f(k,{title:"Dashboard von "+t.$page.props.auth.user.first_name+" "+t.$page.props.auth.user.last_name},{default:r(()=>[a(H,null,{default:r(()=>[a(i,{cols:"12",lg:"6"},{default:r(()=>[a($,{lastWorkLog:t.lastWorkLog,operating_times:t.operating_times,overtime:t.overtime,workingHours:t.workingHours},null,8,["lastWorkLog","operating_times","overtime","workingHours"])]),_:1}),a(i,{cols:"12",lg:"6"},{default:r(()=>[a(C,{absences:t.currentAbsences},null,8,["absences"])]),_:1}),a(i,{cols:"12",lg:"6"},{default:r(()=>[a(h,{title:"Zeiten der Letzten 7 tage"},{append:r(()=>[a(L,{icon:"mdi-eye",variant:"text",title:"Alle Zeiten anzeigen",onClick:o[0]||(o[0]=e=>s(y).get(t.route("user.workLog.index",{user:t.$page.props.auth.user.id})))})]),default:r(()=>[a(V,null,{default:r(()=>[a(v,{page:n.value,"onUpdate:page":o[2]||(o[2]=e=>n.value=e),"items-per-page":"5",items:t.lastWeekWorkLogs.map(e=>{var m,u,p,d;return{...e,start:s(l).fromSQL(((m=e.current_accepted_patch)==null?void 0:m.start)??e.start).toFormat("dd.MM.yyyy HH:mm"),end:s(l).fromSQL(((u=e.current_accepted_patch)==null?void 0:u.end)??e.end).toFormat("dd.MM.yyyy HH:mm"),duration:s(l).fromSQL(((p=e.current_accepted_patch)==null?void 0:p.end)??e.end).diff(s(l).fromSQL(((d=e.current_accepted_patch)==null?void 0:d.start)??e.start)).toFormat("h:mm")}}),headers:[{title:"Start",key:"start"},{title:"Ende",key:"end"},{title:"Dauer",key:"duration"}]},{bottom:r(()=>[t.lastWeekWorkLogs.length>5?(g(),f(W,{key:0,modelValue:n.value,"onUpdate:modelValue":o[1]||(o[1]=e=>n.value=e),length:Math.ceil(t.lastWeekWorkLogs.length/5)},null,8,["modelValue","length"])):b("",!0)]),_:1},8,["page","items"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["title"]))}});export{N as default};
