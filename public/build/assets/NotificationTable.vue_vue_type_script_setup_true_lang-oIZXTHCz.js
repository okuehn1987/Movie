import{d as v,a6 as h,a as r,o as s,b as l,e as c,i as t,a4 as N,k as g,l as u,m as f,A as p,f as _,p as C,s as B,t as T,D as U,y as w}from"./app-BZ4Vct0d.js";import{e as x,g as D}from"./utils-CMSVal23.js";const S=v({__name:"NotificationTable",props:{notifications:{},triggeredByUsers:{},tab:{}},setup(y){const d=y,{currentPage:a,lastPage:m,data:b}=x(h(d),"notifications",{tab:d.tab},{flow:"flowNotifications",archive:"archiveNotifications",tide:"tideNotifications"}[d.tab]);function k(i){p.patch(route("notification.update",{notification:i.id}))}return(i,o)=>(s(),r(w,{page:t(a),"onUpdate:page":o[1]||(o[1]=e=>g(a)?a.value=e:null),headers:[{title:"Titel",key:"data.title"},{title:"Am",key:"created_at"},{title:"Von",key:"triggered_by"},{title:"",key:"actions",align:"end",sortable:!1}],items:t(b).map(e=>{var n;return{...e,triggered_by:((n=i.triggeredByUsers.find(V=>V.id==e.data.triggered_by))==null?void 0:n.name)||"System"}}),"no-data-text":"Keine ungelesenen Benachrichtigungen"},{"item.created_at":l(({item:e})=>[B(T(t(U).fromISO(e.created_at).toFormat("dd.MM.yyyy HH:mm")),1)]),"item.actions":l(({item:e})=>[i.tab!=="archive"?(s(),r(u,{key:0,color:"primary",icon:"mdi-eye",variant:"text",onClick:f(n=>t(p).get(t(D)(e)),["stop"])},{default:l(()=>[_(C,{icon:"mdi-eye"})]),_:1},8,["onClick"])):c("",!0),i.tab!=="archive"?(s(),r(u,{key:1,color:"primary",icon:"mdi-close",variant:"text",onClick:f(n=>k(e),["stop"])},null,8,["onClick"])):c("",!0)]),bottom:l(()=>[t(m)>1?(s(),r(N,{key:0,modelValue:t(a),"onUpdate:modelValue":o[0]||(o[0]=e=>g(a)?a.value=e:null),length:t(m)},null,8,["modelValue","length"])):c("",!0)]),_:1},8,["page","items"]))}});export{S as _};
