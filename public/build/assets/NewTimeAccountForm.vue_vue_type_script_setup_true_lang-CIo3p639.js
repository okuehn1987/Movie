import{d as y,a as w,b as k,e as s,g as t,V as v,y as S,i as T,K as C,p,h as e,L as N,M as i,P as u,N as x,m,t as g,q as V,R as A,S as F}from"./app-ButGxH2f.js";import{l as $,k as U,r as h}from"./utils-C8Sv5LyZ.js";const L=y({__name:"NewTimeAccountForm",props:{user:{},time_account_settings:{}},setup(f){var c,_;const d=f,l=useForm({balance_limit:(((c=d.user.current_working_hours)==null?void 0:c.weekly_working_hours)??40)*2,balance:0,time_account_setting_id:((_=d.time_account_settings.filter(o=>o.type!=null)[0])==null?void 0:_.id)??null,name:""});return(o,r)=>(k(),w(F,{onAfterLeave:r[4]||(r[4]=n=>e(l).reset()),"max-width":"1000"},{activator:s(({props:n})=>[t(m,A(n,{color:"primary"}),{default:s(()=>[t(V,{icon:"mdi-plus"})]),_:1},16)]),default:s(({isActive:n})=>[t(v,{title:"Neues Arbeitszeitkonto erstellen"},{append:s(()=>[t(m,{icon:"",variant:"text",onClick:p(a=>{n.value=!1,e(l).reset()},["stop"])},{default:s(()=>[t(V,null,{default:s(()=>[...r[5]||(r[5]=[g("mdi-close",-1)])]),_:1})]),_:1},8,["onClick"])]),default:s(()=>[t(S),t(T,null,{default:s(()=>[t(C,{onSubmit:p(a=>{e(l).post(o.route("user.timeAccount.store",{user:o.user.id}),{onSuccess:()=>{n.value=!1,e(l).reset()}})},["prevent"])},{default:s(()=>[t(N,null,{default:s(()=>[t(i,{cols:"12",md:"6"},{default:s(()=>[t(u,{label:"Name",modelValue:e(l).name,"onUpdate:modelValue":r[0]||(r[0]=a=>e(l).name=a),"error-messages":e(l).errors.name},null,8,["modelValue","error-messages"])]),_:1}),t(i,{cols:"12",md:"6"},{default:s(()=>[t(x,{items:o.time_account_settings.filter(a=>a.type!=null).map(a=>({title:`${e($)(a.type)} (${e(U)(a.truncation_cycle_length_in_months)})`,value:a.id})),label:"Typ",modelValue:e(l).time_account_setting_id,"onUpdate:modelValue":r[1]||(r[1]=a=>e(l).time_account_setting_id=a),"error-messages":e(l).errors.time_account_setting_id},null,8,["items","modelValue","error-messages"])]),_:1}),t(i,{cols:"12",md:"6"},{default:s(()=>{var a;return[t(u,{label:"Limit in Stunden",hint:"entspricht "+e(h)(e(l).balance_limit/(((a=o.user.current_working_hours)==null?void 0:a.weekly_working_hours)??40),2)+"x wÃ¶chentliche Arbeitszeit",modelValue:e(l).balance_limit,"onUpdate:modelValue":r[2]||(r[2]=b=>e(l).balance_limit=b),"error-messages":e(l).errors.balance_limit},null,8,["hint","modelValue","error-messages"])]}),_:1}),t(i,{cols:"12",md:"6"},{default:s(()=>[t(u,{label:"Startbetrag in Stunden",modelValue:e(l).balance,"onUpdate:modelValue":r[3]||(r[3]=a=>e(l).balance=a),"error-messages":e(l).errors.balance},null,8,["modelValue","error-messages"])]),_:1}),t(i,{cols:"12",class:"text-end"},{default:s(()=>[t(m,{type:"submit",color:"primary",loading:e(l).processing},{default:s(()=>[...r[6]||(r[6]=[g("Speichern",-1)])]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:2},1024)]),_:2},1024)]),_:1}))}});export{L as _};
