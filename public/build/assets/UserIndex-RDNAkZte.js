import{_ as p}from"./ConfirmDelete.vue_vue_type_script_setup_true_lang-B97DNd7v.js";import{_ as c}from"./AdminLayout.vue_vue_type_script_setup_true_lang-DOwF-4sX.js";import{g as l,f as _}from"./utils-CD10vrGf.js";import{d as y,o as r,c as i,a as s,b as a,A as h,B as u,u as o,D as g,v as k,e as m,T as V,f as v,V as d,h as b,m as w,p as C,j as f,x as M,P as B,C as S}from"./app-CxU7NZGP.js";import N from"./UserForm-B9NpGi1Y.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./PermissionSelector.vue_vue_type_script_setup_true_lang-B2haJTOa.js";const x={class:"d-flex justify-end"},D={key:2,style:{width:"48px"}},U=y({__name:"UserIndex",props:{users:{},supervisors:{},groups:{},operating_sites:{},permissions:{},countries:{}},setup(P){return(t,T)=>(r(),i(c,{title:"Mitarbeiter"},{default:s(()=>[a(d,null,{default:s(()=>[a(h,{"fixed-header":"",style:u({maxHeight:o(l)(0)}),"no-data-text":"Es wurden keine Mitarbeiter gefunden",headers:[{title:"Vorname",key:"first_name"},{title:"Nachname",key:"last_name"},{title:"Email",key:"email"},{title:"Abteilung",key:"group.name"},{title:"Personalnummer",key:"staff_number"},{title:"Geburtsdatum",key:"date_of_birth"},{title:"",key:"actions",align:"end"}],items:t.users.map(e=>({...o(_)(e),date_of_birth:o(g).fromFormat(e.date_of_birth,"yyyy-MM-dd").toFormat("dd.MM.yyyy")})).toSorted((e,n)=>(e.first_name+e.last_name).localeCompare(n.first_name+n.last_name)),hover:""},{"header.actions":s(()=>[t.can("user","create")?(r(),i(k,{key:0,"max-width":"1200"},{activator:s(({props:e})=>[a(m,V(e,{color:"primary"}),{default:s(()=>[a(v,{icon:"mdi-plus"})]),_:2},1040)]),default:s(({isActive:e})=>[a(d,{style:u([{overflow:"auto"},{maxHeight:o(l)(48)}])},{default:s(()=>[a(b,null,{default:s(()=>[a(w,null,{default:s(()=>[a(C,{cols:"12"},{default:s(()=>[a(N,{countries:t.countries,supervisors:t.supervisors,groups:t.groups,operating_sites:t.operating_sites,permissions:t.permissions,mode:"create",onSuccess:n=>e.value=!1},null,8,["countries","supervisors","groups","operating_sites","permissions","onSuccess"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["style"])]),_:1})):f("",!0)]),"item.actions":s(({item:e})=>[M("div",x,[t.can("user","viewShow",e)?(r(),i(o(B),{key:0,href:t.route("user.generalInformation",{user:e.id})},{default:s(()=>[a(m,{color:"primary",variant:"text",icon:"mdi-eye"})]),_:2},1032,["href"])):f("",!0),t.can("user","delete",e)?(r(),i(p,{key:1,content:"Bist du dir sicher, dass du "+e.first_name+" "+e.last_name+" entfernen möchtest?",route:t.route("user.destroy",{user:e.id}),title:"Mitarbeiter löschen"},null,8,["content","route"])):(r(),S("div",D))])]),_:1},8,["style","items"])]),_:1})]),_:1}))}});export{U as default};
