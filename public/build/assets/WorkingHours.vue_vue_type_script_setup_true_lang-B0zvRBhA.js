import{d as S,T,c as v,D as p,a as _,b as i,e as t,g as r,i as L,L as x,f as c,M as d,j as l,a7 as f,q as m,t as n,v as a,h as k,k as N,m as y,p as C,V as A,B as D}from"./app-DpJhE1MF.js";import{d as W,c as H}from"./utils-BTSF0Lgh.js";const G={class:"d-flex align-center ga-3"},K={class:"d-flex flex-column"},O={class:"text-h6"},Q={class:"d-flex align-center ga-3"},$={class:"d-flex flex-column"},F={class:"text-h6"},j={class:"d-flex align-center ga-3"},q={class:"d-flex flex-column"},E={class:"text-h6"},I={class:"d-flex align-center ga-3"},J={class:"d-flex flex-column"},P={class:"text-h6"},R={key:0},Z=S({__name:"WorkingHours",props:{overtime:{},workingHours:{},user:{}},setup(M){const s=M,b=T(),g=W();function z(e=!1){D.post(route("workLog.store"),{is_home_office:e})}const h=v(()=>{var e,o,u;return s.user.latest_work_log?s.user.latest_work_log.end?((e=s.user.current_shift)==null?void 0:e.current_work_duration)??0:g.value.diff(p.fromSQL(((o=s.user.latest_work_log)==null?void 0:o.start)||"")).as("seconds")+(((u=s.user.current_shift)==null?void 0:u.current_work_duration)??0):0}),w=v(()=>{var e;return s.user.latest_work_log?s.user.latest_work_log.end||!s.user.latest_work_log.is_home_office?s.workingHours.homeOfficeHours:g.value.diff(p.fromSQL(((e=s.user.latest_work_log)==null?void 0:e.start)||"")).as("seconds")+s.workingHours.homeOfficeHours:0}),B=v(()=>{if(!s.user.latest_work_log)return;const e=p.fromSQL(s.user.latest_work_log.end??s.user.latest_work_log.start),o=g.value.diff(e);return o.as("minutes")<1&&s.user.latest_work_log.end?"Jetzt":o.as("hours")<1&&s.user.latest_work_log.end?"vor "+Math.floor(o.as("minutes"))+" Minuten":e.toFormat("dd.MM.")+" um "+e.toFormat("HH:mm")+" Uhr"});return(e,o)=>(i(),_(A,{title:"Arbeitszeit"},{default:t(()=>[r(L,null,{default:t(()=>[r(x,null,{default:t(()=>[r(d,{cols:"12",sm:"6"},{default:t(()=>[l("div",G,[r(f,{color:"blue-grey",rounded:"",size:"40",class:"elevation-2"},{default:t(()=>[r(m,{size:"24",icon:"mdi-clock-check"})]),_:1}),l("div",K,[o[2]||(o[2]=n(" Aktuelle Schicht ",-1)),l("div",O,a(k(H)(Math.max(0,h.value),"minutes")),1)])])]),_:1}),r(d,{cols:"12",sm:"6"},{default:t(()=>[l("div",Q,[r(f,{color:"orange",rounded:"",size:"40",class:"elevation-2 text-white"},{default:t(()=>[r(m,{size:"24",icon:"mdi-clock-plus"})]),_:1}),l("div",$,[o[3]||(o[3]=n(" Ãœberstunden ",-1)),l("div",F,a(k(H)(e.overtime,"minutes")),1)])])]),_:1}),e.user.latest_work_log?(i(),_(d,{key:0,cols:"12",sm:"6"},{default:t(()=>[l("div",j,[r(f,{color:"blue",rounded:"",size:"40",class:"elevation-2"},{default:t(()=>[r(m,{size:"24",icon:"mdi-timer"})]),_:1}),l("div",q,[n(a(e.user.latest_work_log.end?"Gehen":"Kommen")+" ",1),l("div",E,a(B.value),1)])])]),_:1})):c("",!0),e.$page.props.auth.user.home_office||w.value?(i(),_(d,{key:1,cols:"12",sm:"6"},{default:t(()=>[l("div",I,[r(f,{color:"green",rounded:"",size:"40",class:"elevation-2"},{default:t(()=>[r(m,{size:"24",icon:"mdi-clock-check"})]),_:1}),l("div",J,[o[4]||(o[4]=n(" Woche Homeoffice ",-1)),l("div",P,[n(a(k(H)(w.value,"minutes"))+" ",1),h.value?(i(),N("span",R,"("+a(Math.round(w.value/h.value*100))+"%)",1)):c("",!0)])])])]),_:1})):c("",!0)]),_:1}),r(x,null,{default:t(()=>[k(b).props.auth.user.home_office&&(!e.user.latest_work_log||e.user.latest_work_log.end)||e.user.latest_work_log&&e.user.latest_work_log.is_home_office&&!e.user.latest_work_log.end?(i(),_(d,{key:0,cols:"12",md:"6"},{default:t(()=>[r(y,{block:"",size:"large",onClick:o[0]||(o[0]=C(u=>z(!0),["stop"])),color:"primary",class:"me-2"},{default:t(()=>[n(a(!e.user.latest_work_log||e.user.latest_work_log.end?"Kommen Homeoffice":"Gehen Homeoffice"),1)]),_:1})]),_:1})):c("",!0),r(d,{cols:"12",md:"6"},{default:t(()=>{var u,V;return[(u=e.user.latest_work_log)!=null&&u.end||!((V=e.user.latest_work_log)!=null&&V.is_home_office)?(i(),_(y,{key:0,block:"",size:"large",onClick:o[1]||(o[1]=C(U=>z(),["stop"])),color:"primary"},{default:t(()=>[n(a(!e.user.latest_work_log||e.user.latest_work_log.end?"Kommen":"Gehen"),1)]),_:1})):c("",!0)]}),_:1})]),_:1})]),_:1})]),_:1}))}});export{Z as _};
