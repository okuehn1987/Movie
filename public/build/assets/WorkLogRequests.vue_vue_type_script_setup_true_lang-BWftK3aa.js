import{d as S,r as d,k as x,b as m,g as t,a as L,f as w,e as l,a6 as F,h as s,D as f,a0 as _,V as B,y as N,i as T,L as H,M as g,z as W,a3 as U,m as p,p as b,t as k,q as h,S as A,F as E}from"./app-CXlxVko1.js";const $=S({__name:"WorkLogRequests",props:{workLogs:{}},setup(C){var y;const v=C,o=d(((y=v.workLogs)==null?void 0:y.find(n=>n.id==Number(route().params.openWorkLog)))??null),u=d(!!o.value),i=d(1),r=useForm({accepted:!1});function M(n,e){var c;const a=(c=v.workLogs)==null?void 0:c.find(D=>D.id===e.item.id);a&&(o.value=a,u.value=!0)}function V(){o.value&&r.patch(route("workLog.update",{workLog:o.value.id}),{onSuccess:()=>{u.value=!1}})}return(n,e)=>(m(),x(E,null,[t(_,{hover:"","items-per-page":"5",page:i.value,"onUpdate:page":e[1]||(e[1]=a=>i.value=a),"no-data-text":"kein Antrag vorhanden.","onClick:row":M,items:n.workLogs.map(a=>({id:a.id,user:a.user.first_name+" "+a.user.last_name,date:s(f).fromSQL(a.start).toFormat("dd.MM.yyyy")})),headers:[{title:"Mitarbeiter",key:"user"},{title:"Datum",key:"date"}]},{bottom:l(()=>[n.workLogs.length>5?(m(),L(F,{key:0,modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=a=>i.value=a),length:Math.ceil(n.workLogs.length/5)},null,8,["modelValue","length"])):w("",!0)]),_:1},8,["page","items"]),o.value?(m(),L(A,{key:0,modelValue:u.value,"onUpdate:modelValue":e[6]||(e[6]=a=>u.value=a),"max-width":"1000"},{default:l(()=>[t(B,{title:"Buchungsantrag von "+o.value.user.first_name+" "+o.value.user.last_name},{append:l(()=>[t(p,{icon:"",variant:"text",onClick:e[2]||(e[2]=a=>{u.value=!1,s(r).reset()})},{default:l(()=>[t(h,null,{default:l(()=>[...e[7]||(e[7]=[k("mdi-close",-1)])]),_:1})]),_:1})]),default:l(()=>[t(N),t(T,null,{default:l(()=>[t(H,null,{default:l(()=>[t(g,{cols:"12"},{default:l(()=>[t(W,{headers:[{title:"",key:"version",sortable:!1},{title:"Start",key:"start",sortable:!1},{title:"Ende",key:"end",sortable:!1},{title:"Homeoffice",key:"is_home_office",sortable:!1}],items:[{version:"Neuer Stand:",start:s(f).fromSQL(o.value.start).toFormat("dd.MM.yyyy HH:mm"),end:o.value.end?s(f).fromSQL(o.value.end).toFormat("dd.MM.yyyy HH:mm"):"kein Ende",is_home_office:o.value.is_home_office?"Ja":"Nein"}]},null,8,["items"])]),_:1}),t(g,{cols:"12"},{default:l(()=>[t(U,{modelValue:o.value.comment,"onUpdate:modelValue":e[3]||(e[3]=a=>o.value.comment=a),readonly:"",label:"Bemerkung",variant:"filled","max-rows":"10","auto-grow":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(g,{cols:"12",class:"d-flex justify-end ga-3"},{default:l(()=>[t(p,{color:"error",loading:s(r).processing&&!s(r).accepted,onClick:e[4]||(e[4]=b(a=>{s(r).accepted=!1,V()},["stop"]))},{default:l(()=>[...e[8]||(e[8]=[k(" Ablehnen ",-1)])]),_:1},8,["loading"]),t(p,{color:"success",loading:s(r).processing&&s(r).accepted,onClick:e[5]||(e[5]=b(a=>{s(r).accepted=!0,V()},["stop"]))},{default:l(()=>[...e[9]||(e[9]=[k(" Akzeptieren ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])):w("",!0)],64))}});export{$ as _};
