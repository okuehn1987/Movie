import{d as T,T as N,c as p,D as H,a as c,b as i,e as s,g as t,i as S,L as z,f,M as d,j as r,a7 as _,q as m,t as n,v as a,h as k,k as x,m as V,p as y,V as A,B as D}from"./app-Cq3hGL3n.js";import{d as L,c as g}from"./utils-oce5EvBH.js";const W={class:"d-flex align-center ga-3"},G={class:"d-flex flex-column"},K={class:"text-h6"},O={class:"d-flex align-center ga-3"},$={class:"d-flex flex-column"},F={class:"text-h6"},Q={class:"d-flex align-center ga-3"},j={class:"d-flex flex-column"},q={class:"text-h6"},E={class:"d-flex align-center ga-3"},I={class:"d-flex flex-column"},J={class:"text-h6"},P={key:0},Y=T({__name:"WorkingHours",props:{overtime:{},workingHours:{},user:{}},setup(C){const l=C,M=N(),h=L();function w(e=!1){D.post(route("workLog.store"),{is_home_office:e})}const b=p(()=>{var e,o,u;return l.user.latest_work_log?l.user.latest_work_log.end?((e=l.user.current_shift)==null?void 0:e.current_work_duration)??0:h.value.diff(H.fromSQL(((o=l.user.latest_work_log)==null?void 0:o.start)||"")).as("seconds")+(((u=l.user.current_shift)==null?void 0:u.current_work_duration)??0):0}),B=p(()=>{if(!l.user.latest_work_log)return;const e=H.fromSQL(l.user.latest_work_log.end??l.user.latest_work_log.start),o=h.value.diff(e);return o.as("minutes")<1&&l.user.latest_work_log.end?"Jetzt":o.as("hours")<1&&l.user.latest_work_log.end?"vor "+Math.floor(o.as("minutes"))+" Minuten":e.toFormat("dd.MM.")+" um "+e.toFormat("HH:mm")+" Uhr"});return(e,o)=>(i(),c(A,{title:"Arbeitszeit"},{default:s(()=>[t(S,null,{default:s(()=>[t(z,null,{default:s(()=>[t(d,{cols:"12",sm:"6"},{default:s(()=>[r("div",W,[t(_,{color:"blue-grey",rounded:"",size:"40",class:"elevation-2"},{default:s(()=>[t(m,{size:"24",icon:"mdi-clock-check"})]),_:1}),r("div",G,[o[2]||(o[2]=n(" Aktuelle Schicht ",-1)),r("div",K,a(k(g)(Math.max(0,b.value),"minutes")),1)])])]),_:1}),t(d,{cols:"12",sm:"6"},{default:s(()=>[r("div",O,[t(_,{color:"orange",rounded:"",size:"40",class:"elevation-2 text-white"},{default:s(()=>[t(m,{size:"24",icon:"mdi-clock-plus"})]),_:1}),r("div",$,[o[3]||(o[3]=n(" Ãœberstunden ",-1)),r("div",F,a(k(g)(e.overtime,"minutes")),1)])])]),_:1}),e.user.latest_work_log?(i(),c(d,{key:0,cols:"12",sm:"6"},{default:s(()=>[r("div",Q,[t(_,{color:"blue",rounded:"",size:"40",class:"elevation-2"},{default:s(()=>[t(m,{size:"24",icon:"mdi-timer"})]),_:1}),r("div",j,[n(a(e.user.latest_work_log.end?"Gehen":"Kommen")+" ",1),r("div",q,a(B.value),1)])])]),_:1})):f("",!0),e.$page.props.auth.user.home_office||e.workingHours.homeOfficeHours?(i(),c(d,{key:1,cols:"12",sm:"6"},{default:s(()=>[r("div",E,[t(_,{color:"green",rounded:"",size:"40",class:"elevation-2"},{default:s(()=>[t(m,{size:"24",icon:"mdi-clock-check"})]),_:1}),r("div",I,[o[4]||(o[4]=n(" Woche Homeoffice ",-1)),r("div",J,[n(a(k(g)(e.workingHours.homeOfficeHours,"minutes"))+" ",1),e.workingHours.totalHours?(i(),x("span",P," ("+a(Math.round(e.workingHours.homeOfficeHours/e.workingHours.totalHours*100))+"%) ",1)):f("",!0)])])])]),_:1})):f("",!0)]),_:1}),t(z,null,{default:s(()=>[k(M).props.auth.user.home_office&&(!e.user.latest_work_log||e.user.latest_work_log.end)||e.user.latest_work_log&&e.user.latest_work_log.is_home_office&&!e.user.latest_work_log.end?(i(),c(d,{key:0,cols:"12",md:"6"},{default:s(()=>[t(V,{block:"",size:"large",onClick:o[0]||(o[0]=y(u=>w(!0),["stop"])),color:"primary",class:"me-2"},{default:s(()=>[n(a(!e.user.latest_work_log||e.user.latest_work_log.end?"Kommen Homeoffice":"Gehen Homeoffice"),1)]),_:1})]),_:1})):f("",!0),t(d,{cols:"12",md:"6"},{default:s(()=>{var u,v;return[(u=e.user.latest_work_log)!=null&&u.end||!((v=e.user.latest_work_log)!=null&&v.is_home_office)?(i(),c(V,{key:0,block:"",size:"large",onClick:o[1]||(o[1]=y(R=>w(),["stop"])),color:"primary"},{default:s(()=>[n(a(!e.user.latest_work_log||e.user.latest_work_log.end?"Kommen":"Gehen"),1)]),_:1})):f("",!0)]}),_:1})]),_:1})]),_:1})]),_:1}))}});export{Y as _};
