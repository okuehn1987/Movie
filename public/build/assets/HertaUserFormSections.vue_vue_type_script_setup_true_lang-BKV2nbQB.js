import{d as g,B as f,C as h,a as l,o as n,V as b,b as e,f as s,aw as C,s as c,ax as M,K as F,e as _,L as y,S as T,t as U,y as B,i as d,D as m,l as k,m as p,p as w,O as v,g as D}from"./app-BDc-_Frv.js";const W=g({__name:"HertaUserFormSections",props:f({user:{},mode:{}},{userForm:{required:!0},userFormModifiers:{}}),emits:["update:userForm"],setup(V){const o=h(V,"userForm");return(a,u)=>(n(),l(b,{class:"mb-4"},{default:e(()=>[s(M,null,{default:e(()=>[s(C,{class:"mb-2"},{default:e(()=>[...u[1]||(u[1]=[c("Wochenarbeitszeit",-1)])]),_:1})]),_:1}),s(D,null,{default:e(()=>[s(F,null,{default:e(()=>[o.value.errors.user_working_hours?(n(),l(y,{key:0,cols:"12"},{default:e(()=>[s(T,{type:"error"},{default:e(()=>[c(U(o.value.errors.user_working_hours),1)]),_:1})]),_:1})):_("",!0),s(y,{cols:"12"},{default:e(()=>[s(B,{items:o.value.user_working_hours,headers:[{title:"Stunden pro Woche",key:"weekly_working_hours",width:"50%",sortable:!1},{title:"Aktiv seit",key:"active_since",sortable:!1},{title:"",key:"actions",align:"end",sortable:!1}]},{"header.actions":e(()=>[!a.user||a.can("user","update")?(n(),l(k,{key:0,color:"primary",onClick:u[0]||(u[0]=p(r=>o.value.user_working_hours.push({active_since:"",id:null,weekly_working_hours:0}),["stop"]))},{default:e(()=>[s(w,{icon:"mdi-plus"})]),_:1})):_("",!0)]),"item.weekly_working_hours":e(({item:r,index:t})=>[s(v,{"data-testid":"userWorkingHours-hours",type:"number",variant:"underlined",modelValue:r.weekly_working_hours,"onUpdate:modelValue":i=>r.weekly_working_hours=i,"error-messages":o.value.errors[`user_working_hours.${t}.weekly_working_hours`],disabled:a.user&&!a.can("user","update")||!!r.active_since&&r.active_since<d(m).now().toFormat("yyyy-MM-dd")},null,8,["modelValue","onUpdate:modelValue","error-messages","disabled"])]),"item.active_since":e(({item:r,index:t})=>[s(v,{"data-testid":"userWorkingHours-since",type:"date",variant:"underlined",min:a.mode=="edit"?d(m).now().plus({days:1}).toFormat("yyyy-MM-dd"):void 0,modelValue:r.active_since,"onUpdate:modelValue":i=>r.active_since=i,"error-messages":o.value.errors[`user_working_hours.${t}.active_since`],disabled:a.user&&!a.can("user","update")||!!r.active_since&&r.active_since<d(m).now().toFormat("yyyy-MM-dd")},null,8,["min","modelValue","onUpdate:modelValue","error-messages","disabled"])]),"item.actions":e(({item:r,index:t})=>[(!a.user||a.can("user","update"))&&(!r.id||r.active_since>d(m).now().toFormat("yyyy-MM-dd"))?(n(),l(k,{key:0,color:"error",onClick:p(i=>o.value.user_working_hours.splice(t,1),["stop"])},{default:e(()=>[s(w,{icon:"mdi-delete"})]),_:1},8,["onClick"])):_("",!0)]),_:1},8,["items"])]),_:1})]),_:1})]),_:1})]),_:1}))}});export{W as _};
