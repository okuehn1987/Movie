import{d as q,r as f,j as L,o as v,f as l,a as k,e as A,b as a,a4 as B,i as u,D as r,_ as S,V as T,x as Q,g as N,K as P,L as i,O as y,l as p,m as F,s as V,p as U,Q as _,F as $}from"./app-9FOu14I-.js";const R=q({__name:"AbsenceDeleteRequests",props:{requestedDeletes:{}},setup(M){var c;const b=M,s=f(((c=b.requestedDeletes)==null?void 0:c.find(n=>n.id==Number(route().params.openAbsenceDelete)))??null),o=f(!!s.value),d=f(1);function w(n){var t;const e=(t=b.requestedDeletes)==null?void 0:t.find(m=>m.id===n.id);e&&(s.value=e,o.value=!0)}const g=useForm({});function C(){s.value&&g.delete(route("absence.destroy",{absence:s.value.id}),{onSuccess:()=>{o.value=!1}})}const D=useForm({});function x(){s.value&&D.delete(route("absence.denyDestroy",{absence:s.value.id}),{onSuccess:()=>{o.value=!1}})}return(n,e)=>(v(),L($,null,[l(S,{hover:"","items-per-page":"5",page:d.value,"onUpdate:page":e[1]||(e[1]=t=>d.value=t),"no-data-text":"keine Abwesenheitsanträge vorhanden.","onClick:row":e[2]||(e[2]=(t,m)=>w(m.item)),items:n.requestedDeletes.map(t=>({id:t.id,user:t.user.first_name+" "+t.user.last_name,start:u(r).fromSQL(t.start).toFormat("dd.MM.yyyy"),end:u(r).fromSQL(t.end).toFormat("dd.MM.yyyy")})),headers:[{title:"Mitarbeiter",key:"user"},{title:"Von",key:"start"},{title:"Bis",key:"end"}]},{bottom:a(()=>[n.requestedDeletes.length>5?(v(),k(B,{key:0,modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=t=>d.value=t),length:Math.ceil(n.requestedDeletes.length/5)},null,8,["modelValue","length"])):A("",!0)]),_:1},8,["page","items"]),s.value?(v(),k(_,{key:0,modelValue:o.value,"onUpdate:modelValue":e[7]||(e[7]=t=>o.value=t),"max-width":"1000"},{default:a(()=>[l(T,{title:"Abwesenheit von "+s.value.user.first_name+" "+s.value.user.last_name},{append:a(()=>[l(p,{icon:"",variant:"text",onClick:e[3]||(e[3]=t=>o.value=!1)},{default:a(()=>[l(U,null,{default:a(()=>[...e[8]||(e[8]=[V("mdi-close",-1)])]),_:1})]),_:1})]),default:a(()=>[l(Q),l(N,null,{default:a(()=>[l(P,null,{default:a(()=>[l(i,{cols:"12"},{default:a(()=>[l(y,{label:"Abwesenheitsgrund",modelValue:s.value.absence_type.name,"onUpdate:modelValue":e[4]||(e[4]=t=>s.value.absence_type.name=t),readonly:""},null,8,["modelValue"])]),_:1}),l(i,{cols:"12",md:"6"},{default:a(()=>[l(y,{label:"Von:","model-value":u(r).fromSQL(s.value.start).toFormat("dd.MM.yyyy"),readonly:""},null,8,["model-value"])]),_:1}),l(i,{cols:"12",md:"6"},{default:a(()=>[l(y,{label:"Bis:","model-value":u(r).fromSQL(s.value.end).toFormat("dd.MM.yyyy"),readonly:""},null,8,["model-value"])]),_:1})]),_:1})]),_:1}),l(i,{cols:"12",class:"d-flex justify-end ga-2"},{default:a(()=>[l(p,{color:"primary",onClick:e[5]||(e[5]=F(t=>x(),["stop"])),loading:u(D).processing},{default:a(()=>[...e[9]||(e[9]=[V("Löschen ablehnen",-1)])]),_:1},8,["loading"]),l(p,{color:"error",onClick:e[6]||(e[6]=F(t=>C(),["stop"])),loading:u(g).processing},{default:a(()=>[...e[10]||(e[10]=[V("Abwesenheit Löschen",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])):A("",!0)],64))}});export{R as _};
