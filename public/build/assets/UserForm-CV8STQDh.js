import{d as E,ar as z,D as m,a as f,o as g,b as o,f as r,e as c,h as I,V,a6 as K,as as v,q as y,g as k,N as w,O as n,P as d,j as s,H as S,l as U,n as h,at as N,M as F,t as A,x as C,m as M,R as j,C as q,ae as Q}from"./app-7k08ltii.js";import{g as Y,j as T}from"./utils-CtP3frDj.js";import{_ as D}from"./PermissionSelector.vue_vue_type_script_setup_true_lang-Bw4tYRp7.js";import{_ as J}from"./_plugin-vue_export-helper-DlAUqK2U.js";const X={class:"d-flex justify-end"},Z=E({__name:"UserForm",props:{user:{},supervisors:{},operating_sites:{},groups:{},mode:{},countries:{},permissions:{}},emits:["close"],setup(P,{emit:B}){var O;const i=P,$=B,G=z.weekdays("long",{locale:"en"}).map(t=>t.toLowerCase()),e=useForm({first_name:"",last_name:"",email:"",date_of_birth:"",city:"",zip:"",street:"",house_number:"",address_suffix:"",country:((O=i.countries[0])==null?void 0:O.value)??"",federal_state:"",phone_number:"",staff_number:null,job_role:null,password:"",group_id:null,operating_site_id:null,supervisor_id:null,is_supervisor:!1,resignation_date:"",home_office:!1,home_office_hours_per_week:null,use_time_balance_traffic_light:!1,time_balance_yellow_threshold:null,time_balance_red_threshold:null,user_working_hours:[],user_leave_days:[],user_working_weeks:[],initialRemainingLeaveDays:0,overtime_calculations_start:m.now().toFormat("yyyy-MM-dd"),organizationUser:{organization_permission:null,operatingSite_permission:null,group_permission:null,absence_permission:null,absenceType_permission:null,timeAccount_permission:null,timeAccountSetting_permission:null,timeAccountTransaction_permission:null,user_permission:null,specialWorkingHoursFactor_permission:null,workLogPatch_permission:null},groupUser:{group_permission:null,absence_permission:null,timeAccount_permission:null,timeAccountSetting_permission:null,timeAccountTransaction_permission:null,user_permission:null,workLogPatch_permission:null},operatingSiteUser:{operatingSite_permission:null,absence_permission:null,timeAccount_permission:null,timeAccountSetting_permission:null,timeAccountTransaction_permission:null,user_permission:null,workLogPatch_permission:null}});if(i.user){e.first_name=i.user.first_name,e.last_name=i.user.last_name,e.email=i.user.email,e.date_of_birth=i.user.date_of_birth,e.city=i.user.city??"",e.zip=i.user.zip??"",e.street=i.user.street??"",e.house_number=i.user.house_number??"",e.address_suffix=i.user.address_suffix??"",e.country=i.user.country,e.federal_state=i.user.federal_state,e.phone_number=i.user.phone_number??"",e.staff_number=i.user.staff_number,e.job_role=i.user.job_role,e.password=i.user.password,e.group_id=i.user.group_id,e.operating_site_id=i.user.operating_site_id,e.supervisor_id=i.user.supervisor_id,e.resignation_date=i.user.resignation_date,e.home_office=i.user.home_office,e.home_office_hours_per_week=i.user.home_office_hours_per_week,e.overtime_calculations_start=i.user.overtime_calculations_start,e.use_time_balance_traffic_light=i.user.time_balance_red_threshold!==null&&i.user.time_balance_yellow_threshold!==null,e.time_balance_yellow_threshold=i.user.time_balance_yellow_threshold,e.time_balance_red_threshold=i.user.time_balance_red_threshold,e.user_leave_days=i.user.user_leave_days.filter(t=>t!==null).map(t=>({...t,active_since:m.fromSQL(t.active_since).toFormat("yyyy-MM")})),e.user_leave_days.length==0&&e.user_leave_days.push({id:null,active_since:m.now().toFormat("yyyy-MM"),leave_days:0}),e.user_working_hours=i.user.user_working_hours,e.user_working_hours.length==0&&e.user_working_hours.push({id:null,active_since:m.now().toFormat("yyyy-MM-dd"),weekly_working_hours:0});for(const t of i.user.user_working_weeks){const a=[];for(const b of G)t[b]&&a.push(b);e.user_working_weeks.push({id:t.id,active_since:t.active_since,weekdays:a})}e.user_working_weeks.length==0&&e.user_working_weeks.push({id:null,active_since:m.now().toFormat("yyyy-MM-dd"),weekdays:[]});for(const t in e.organizationUser)e.organizationUser[t]=i.user.organization_user[t];for(const t in e.groupUser)e.groupUser[t]=(i.user.group_user??e.groupUser)[t];for(const t in e.operatingSiteUser)e.operatingSiteUser[t]=i.user.operating_site_user[t]}function H(){const t=e.transform(b=>({...b,organizationUser:Object.fromEntries(Object.entries(b.organizationUser).filter(([p])=>i.permissions.find(l=>l.name==p))),groupUser:Object.fromEntries(Object.entries(b.groupUser).filter(([p])=>i.permissions.find(l=>l.name==p))),operatingSiteUser:Object.fromEntries(Object.entries(b.operatingSiteUser).filter(([p])=>i.permissions.find(l=>l.name==p)))})),a=()=>{Q(()=>{var l;const p=[...document.querySelectorAll('#userForm [role="alert"]')].filter(u=>u.children.length>0)[0];p&&((l=p.offsetParent)==null||l.scrollIntoView({behavior:"smooth"}))})};i.mode=="edit"&&i.user?t.patch(route("user.update",{user:i.user.id}),{onError:a}):t.post(route("user.store"),{onSuccess:()=>{t.reset(),$("close")},onError:a})}function L(t){var b;if(i.user&&!can("user","update"))return!0;const a=(b=i.user)==null?void 0:b.user_leave_days.find(p=>(p==null?void 0:p.id)===t.id);return a?a.active_since<m.now().startOf("month").toFormat("yyyy-MM-dd"):!1}return(t,a)=>(g(),f(q,{id:"userForm",onSubmit:M(H,["prevent"]),disabled:t.user&&!t.can("user","update")},{default:o(()=>{var b,p;return[r(V,{class:"mb-4"},K({default:o(()=>[r(v,null,{default:o(()=>[...a[32]||(a[32]=[y("Persönliche Daten",-1)])]),_:1}),r(k,null,{default:o(()=>[r(w,null,{default:o(()=>[r(n,{cols:"12",md:"6"},{default:o(()=>[r(d,{modelValue:s(e).first_name,"onUpdate:modelValue":a[0]||(a[0]=l=>s(e).first_name=l),label:"Vorname","error-messages":s(e).errors.first_name},null,8,["modelValue","error-messages"])]),_:1}),r(n,{cols:"12",md:"6"},{default:o(()=>[r(d,{modelValue:s(e).last_name,"onUpdate:modelValue":a[1]||(a[1]=l=>s(e).last_name=l),label:"Nachname","error-messages":s(e).errors.last_name},null,8,["modelValue","error-messages"])]),_:1}),r(n,{cols:"12",md:"6"},{default:o(()=>[r(d,{modelValue:s(e).email,"onUpdate:modelValue":a[2]||(a[2]=l=>s(e).email=l),label:"Email","error-messages":s(e).errors.email},null,8,["modelValue","error-messages"])]),_:1}),t.mode=="create"?(g(),f(n,{key:0,cols:"12",md:"6"},{default:o(()=>[r(d,{modelValue:s(e).password,"onUpdate:modelValue":a[3]||(a[3]=l=>s(e).password=l),label:"Passwort","error-messages":s(e).errors.password},null,8,["modelValue","error-messages"])]),_:1})):c("",!0),r(n,{cols:"12",md:"6"},{default:o(()=>[r(d,{type:"date",modelValue:s(e).date_of_birth,"onUpdate:modelValue":a[4]||(a[4]=l=>s(e).date_of_birth=l),label:"Geburtsdatum (optional)","error-messages":s(e).errors.date_of_birth},null,8,["modelValue","error-messages"])]),_:1}),r(n,{cols:"12",md:"6"},{default:o(()=>[r(d,{modelValue:s(e).staff_number,"onUpdate:modelValue":a[5]||(a[5]=l=>s(e).staff_number=l),label:"Personalnummer (optional)","error-messages":s(e).errors.staff_number},null,8,["modelValue","error-messages"])]),_:1}),r(n,{cols:"12",md:"6"},{default:o(()=>[r(d,{modelValue:s(e).job_role,"onUpdate:modelValue":a[6]||(a[6]=l=>s(e).job_role=l),label:"Stellenbezeichnung (optional)","error-messages":s(e).errors.job_role},null,8,["modelValue","error-messages"])]),_:1}),t.mode=="create"?(g(),f(n,{key:1,cols:"12",md:"6"})):c("",!0),r(n,{cols:"12",md:"6"},{default:o(()=>[r(d,{modelValue:s(e).street,"onUpdate:modelValue":a[7]||(a[7]=l=>s(e).street=l),label:"Straße (optional)","error-messages":s(e).errors.street},null,8,["modelValue","error-messages"])]),_:1}),r(n,{cols:"12",md:"6"},{default:o(()=>[r(d,{modelValue:s(e).house_number,"onUpdate:modelValue":a[8]||(a[8]=l=>s(e).house_number=l),label:"Hausnummer (optional)","error-messages":s(e).errors.house_number},null,8,["modelValue","error-messages"])]),_:1}),r(n,{cols:"12",md:"6"},{default:o(()=>[r(d,{modelValue:s(e).zip,"onUpdate:modelValue":a[9]||(a[9]=l=>s(e).zip=l),label:"Postleitzahl (optional)","error-messages":s(e).errors.zip},null,8,["modelValue","error-messages"])]),_:1}),r(n,{cols:"12",md:"6"},{default:o(()=>[r(d,{modelValue:s(e).city,"onUpdate:modelValue":a[10]||(a[10]=l=>s(e).city=l),label:"Ort (optional)","error-messages":s(e).errors.city},null,8,["modelValue","error-messages"])]),_:1}),r(n,{cols:"12",md:"6"},{default:o(()=>[r(S,{"data-testid":"land",label:"Land",items:t.countries,"error-messages":s(e).errors.country,modelValue:s(e).country,"onUpdate:modelValue":a[11]||(a[11]=l=>s(e).country=l)},null,8,["items","error-messages","modelValue"])]),_:1}),r(n,{cols:"12",md:"6"},{default:o(()=>[r(S,{"data-testid":"federal_state",label:"Bundesland",items:s(Y)(s(e).country,t.countries),disabled:t.user&&!t.can("user","update")||!s(e).country,"error-messages":s(e).errors.federal_state,modelValue:s(e).federal_state,"onUpdate:modelValue":a[12]||(a[12]=l=>s(e).federal_state=l)},null,8,["items","disabled","error-messages","modelValue"])]),_:1})]),_:1})]),_:1})]),_:2},[t.mode=="create"?{name:"append",fn:o(()=>[r(U,{icon:"",variant:"text",onClick:a[13]||(a[13]=l=>$("close"))},{default:o(()=>[r(h,null,{default:o(()=>[...a[33]||(a[33]=[y("mdi-close",-1)])]),_:1})]),_:1})]),key:"0"}:void 0]),1024),r(V,{class:"mb-4"},{default:o(()=>[r(N,null,{default:o(()=>[r(v,{class:"mb-2"},{default:o(()=>[...a[34]||(a[34]=[y("Wochenarbeitszeit",-1)])]),_:1})]),_:1}),r(k,null,{default:o(()=>[r(w,null,{default:o(()=>[s(e).errors.user_working_hours?(g(),f(n,{key:0,cols:"12"},{default:o(()=>[r(F,{type:"error"},{default:o(()=>[y(A(s(e).errors.user_working_hours),1)]),_:1})]),_:1})):c("",!0),r(n,{cols:"12"},{default:o(()=>[r(C,{items:s(e).user_working_hours,headers:[{title:"Stunden pro Woche",key:"weekly_working_hours",width:"50%",sortable:!1},{title:"Aktiv seit",key:"active_since",sortable:!1},{title:"",key:"actions",align:"end",sortable:!1}]},{"header.actions":o(()=>[!t.user||t.can("user","update")?(g(),f(U,{key:0,color:"primary",onClick:a[14]||(a[14]=M(l=>s(e).user_working_hours.push({active_since:"",id:null,weekly_working_hours:0}),["stop"]))},{default:o(()=>[r(h,{icon:"mdi-plus"})]),_:1})):c("",!0)]),"item.weekly_working_hours":o(({item:l,index:u})=>[r(d,{"data-testid":"userWorkingHours-hours",type:"number",variant:"underlined",modelValue:l.weekly_working_hours,"onUpdate:modelValue":_=>l.weekly_working_hours=_,"error-messages":s(e).errors[`user_working_hours.${u}.weekly_working_hours`],disabled:t.user&&!t.can("user","update")||!!l.active_since&&l.active_since<s(m).now().toFormat("yyyy-MM-dd")},null,8,["modelValue","onUpdate:modelValue","error-messages","disabled"])]),"item.active_since":o(({item:l,index:u})=>[r(d,{"data-testid":"userWorkingHours-since",type:"date",variant:"underlined",min:t.mode=="edit"?s(m).now().plus({days:1}).toFormat("yyyy-MM-dd"):void 0,modelValue:l.active_since,"onUpdate:modelValue":_=>l.active_since=_,"error-messages":s(e).errors[`user_working_hours.${u}.active_since`],disabled:t.user&&!t.can("user","update")||!!l.active_since&&l.active_since<s(m).now().toFormat("yyyy-MM-dd")},null,8,["min","modelValue","onUpdate:modelValue","error-messages","disabled"])]),"item.actions":o(({item:l,index:u})=>[(!t.user||t.can("user","update"))&&(!l.id||l.active_since>s(m).now().toFormat("yyyy-MM-dd"))?(g(),f(U,{key:0,color:"error",onClick:M(_=>s(e).user_working_hours.splice(u,1),["stop"])},{default:o(()=>[r(h,{icon:"mdi-delete"})]),_:1},8,["onClick"])):c("",!0)]),_:1},8,["items"])]),_:1})]),_:1})]),_:1})]),_:1}),r(V,{class:"mb-4"},{default:o(()=>[r(v,null,{default:o(()=>[...a[35]||(a[35]=[y("Arbeitswoche",-1)])]),_:1}),r(k,null,{default:o(()=>[r(w,null,{default:o(()=>[s(e).errors.user_working_weeks?(g(),f(n,{key:0,cols:"12"},{default:o(()=>[r(F,{type:"error"},{default:o(()=>[y(A(s(e).errors.user_working_weeks),1)]),_:1})]),_:1})):c("",!0),r(n,{cols:"12"},{default:o(()=>[r(C,{items:s(e).user_working_weeks,headers:[{title:"Beschäftigungstage",key:"weekdays",width:"50%",sortable:!1},{title:"Aktiv seit",key:"active_since",sortable:!1},{title:"",key:"actions",align:"end",sortable:!1}]},{"header.actions":o(()=>[!t.user||t.can("user","update")?(g(),f(U,{key:0,color:"primary",onClick:a[15]||(a[15]=M(l=>s(e).user_working_weeks.push({active_since:"",id:null,weekdays:[]}),["stop"]))},{default:o(()=>[r(h,{icon:"mdi-plus"})]),_:1})):c("",!0)]),"item.weekdays":o(({item:l,index:u})=>[r(S,{"data-testid":"userWorkingDays",chips:"",disabled:t.user&&!t.can("user","update")||!!l.active_since&&l.active_since<s(m).now().toFormat("yyyy-MM-dd"),modelValue:l.weekdays,"onUpdate:modelValue":_=>l.weekdays=_,multiple:"",items:s(z).weekdays().map((_,R)=>{var W;return{title:_,value:(W=s(z).weekdays("long",{locale:"en"})[R])==null?void 0:W.toLowerCase()}}),"error-messages":s(e).errors[`user_working_weeks.${u}.weekdays`]},null,8,["disabled","modelValue","onUpdate:modelValue","items","error-messages"])]),"item.active_since":o(({item:l,index:u})=>[r(d,{"data-testid":"userWorkingDays-since",type:"date",variant:"underlined",min:t.mode=="edit"?s(m).now().plus({days:1}).toFormat("yyyy-MM-dd"):void 0,modelValue:l.active_since,"onUpdate:modelValue":_=>l.active_since=_,disabled:t.user&&!t.can("user","update")||!!l.active_since&&l.active_since<s(m).now().toFormat("yyyy-MM-dd"),"error-messages":s(e).errors[`user_working_weeks.${u}.active_since`]},null,8,["min","modelValue","onUpdate:modelValue","disabled","error-messages"])]),"item.actions":o(({item:l,index:u})=>[(!t.user||t.can("user","update"))&&(!l.id||l.active_since>s(m).now().toFormat("yyyy-MM-dd"))?(g(),f(U,{key:0,color:"error",onClick:M(_=>s(e).user_working_weeks.splice(u,1),["stop"])},{default:o(()=>[r(h,{icon:"mdi-delete"})]),_:1},8,["onClick"])):c("",!0)]),_:1},8,["items"])]),_:1})]),_:1})]),_:1})]),_:1}),r(V,{class:"mb-4"},{default:o(()=>[r(v,null,{default:o(()=>[...a[36]||(a[36]=[y("Urlaubstage",-1)])]),_:1}),r(k,null,{default:o(()=>[r(w,null,{default:o(()=>[s(e).errors.user_leave_days?(g(),f(n,{key:0,cols:"12"},{default:o(()=>[r(F,{type:"error"},{default:o(()=>[y(A(s(e).errors.user_leave_days),1)]),_:1})]),_:1})):c("",!0),r(n,{cols:"12"},{default:o(()=>[r(C,{items:s(e).user_leave_days,headers:[{title:"Anzahl der Urlaubstage",key:"leave_days",width:"50%",sortable:!1},{title:"Aktiv seit",key:"active_since",sortable:!1},{title:"",key:"actions",align:"end",sortable:!1}]},{"header.actions":o(()=>[!t.user||t.can("user","update")?(g(),f(U,{key:0,color:"primary",onClick:a[16]||(a[16]=M(l=>s(e).user_leave_days.push({active_since:"",id:null,leave_days:0}),["stop"]))},{default:o(()=>[r(h,{icon:"mdi-plus"})]),_:1})):c("",!0)]),"item.leave_days":o(({item:l,index:u})=>[r(d,{"data-testid":"userLeaveDays",type:"number",variant:"underlined",modelValue:l.leave_days,"onUpdate:modelValue":_=>l.leave_days=_,"error-messages":s(e).errors[`user_leave_days.${u}.leave_days`],disabled:L(l)},null,8,["modelValue","onUpdate:modelValue","error-messages","disabled"])]),"item.active_since":o(({item:l,index:u})=>[r(d,{"data-testid":"userLeaveDays-since",type:"month",min:t.mode=="edit"?s(m).now().startOf("month").toFormat("yyyy-MM"):void 0,variant:"underlined",modelValue:l.active_since,"onUpdate:modelValue":_=>l.active_since=_,disabled:L(l),"error-messages":s(e).errors[`user_leave_days.${u}.active_since`]},null,8,["min","modelValue","onUpdate:modelValue","disabled","error-messages"])]),"item.actions":o(({item:l,index:u})=>[(!t.user||t.can("user","update"))&&(!l.id||l.active_since>s(m).now().toFormat("yyyy-MM-dd"))?(g(),f(U,{key:0,color:"error",onClick:M(_=>s(e).user_leave_days.splice(u,1),["stop"])},{default:o(()=>[r(h,{icon:"mdi-delete"})]),_:1},8,["onClick"])):c("",!0)]),_:1},8,["items"])]),_:1}),t.mode=="create"?(g(),f(n,{key:1,cols:"12"},{default:o(()=>[r(d,{type:"number",modelValue:s(e).initialRemainingLeaveDays,"onUpdate:modelValue":a[17]||(a[17]=l=>s(e).initialRemainingLeaveDays=l),label:`Trage die aus ${s(m).now().year-1} übernommenen Urlaubstage des Mitarbeitenden ein`,"error-messages":s(e).errors.initialRemainingLeaveDays},null,8,["modelValue","label","error-messages"])]),_:1})):c("",!0)]),_:1})]),_:1})]),_:1}),r(V,{class:"mb-4",title:"Gleitzeitkonto"},{default:o(()=>[r(k,null,{default:o(()=>[r(w,null,{default:o(()=>[r(n,{cols:"12"},{default:o(()=>[r(j,{modelValue:s(e).use_time_balance_traffic_light,"onUpdate:modelValue":a[18]||(a[18]=l=>s(e).use_time_balance_traffic_light=l),label:"Gleitzeitampelsystem verwenden","error-messages":s(e).errors.use_time_balance_traffic_light},null,8,["modelValue","error-messages"])]),_:1}),r(n,{cols:"12",md:"6"},{default:o(()=>[r(d,{type:"number",modelValue:s(e).time_balance_yellow_threshold,"onUpdate:modelValue":a[19]||(a[19]=l=>s(e).time_balance_yellow_threshold=l),label:"Gelbe Grenze für Überstunden im Gleitzeitkonto","error-messages":s(e).errors.time_balance_yellow_threshold,disabled:!s(e).use_time_balance_traffic_light},null,8,["modelValue","error-messages","disabled"])]),_:1}),r(n,{cols:"12",md:"6"},{default:o(()=>[r(d,{type:"number",modelValue:s(e).time_balance_red_threshold,"onUpdate:modelValue":a[20]||(a[20]=l=>s(e).time_balance_red_threshold=l),label:"Rote Grenze für Überstunden im Gleitzeitkonto","error-messages":s(e).errors.time_balance_red_threshold,disabled:!s(e).use_time_balance_traffic_light},null,8,["modelValue","error-messages","disabled"])]),_:1})]),_:1})]),_:1})]),_:1}),r(V,{class:"mb-4"},{default:o(()=>[r(v,null,{default:o(()=>[...a[37]||(a[37]=[y("Homeoffice",-1)])]),_:1}),r(k,null,{default:o(()=>[r(w,null,{default:o(()=>[r(n,{cols:"12",md:"6"},{default:o(()=>[r(j,{modelValue:s(e).home_office,"onUpdate:modelValue":[a[21]||(a[21]=l=>s(e).home_office=l),a[22]||(a[22]=l=>{l||(s(e).home_office_hours_per_week=null)})],label:"Darf der Mitarbeitende Homeoffice machen?","error-messages":s(e).errors.home_office},null,8,["modelValue","error-messages"])]),_:1}),r(n,{cols:"12",md:"6"},{default:o(()=>[r(d,{type:"number",modelValue:s(e).home_office_hours_per_week,"onUpdate:modelValue":a[23]||(a[23]=l=>s(e).home_office_hours_per_week=l),label:"Homeoffice Stunden pro Woche (optional)",disabled:!s(e).home_office,"error-messages":s(e).errors.home_office_hours_per_week},null,8,["modelValue","disabled","error-messages"])]),_:1})]),_:1})]),_:1})]),_:1}),r(V,{class:"mb-4"},{default:o(()=>[r(v,null,{default:o(()=>[...a[38]||(a[38]=[y("Organisation",-1)])]),_:1}),r(k,null,{default:o(()=>[r(w,null,{default:o(()=>[r(D,{modelValue:s(e).organizationUser,"onUpdate:modelValue":a[24]||(a[24]=l=>s(e).organizationUser=l),objKey:"organizationUser",permissions:t.permissions,errors:s(e).errors,label:"Organisationsrechte"},null,8,["modelValue","permissions","errors"])]),_:1})]),_:1})]),_:1}),r(V,{class:"mb-4"},{default:o(()=>[r(v,null,{default:o(()=>[...a[39]||(a[39]=[y("Betriebsstätte",-1)])]),_:1}),r(k,null,{default:o(()=>[r(w,null,{default:o(()=>[r(n,{cols:"12",class:"mb-4"},{default:o(()=>[r(S,{modelValue:s(e).operating_site_id,"onUpdate:modelValue":a[25]||(a[25]=l=>s(e).operating_site_id=l),items:t.operating_sites.map(l=>({title:l.name,value:l.id})),label:"Wähle die Betriebsstätte des Mitarbeiters aus.","error-messages":s(e).errors.operating_site_id,"data-testid":"userOperatingSiteSelection"},null,8,["modelValue","items","error-messages"])]),_:1}),r(D,{modelValue:s(e).operatingSiteUser,"onUpdate:modelValue":a[26]||(a[26]=l=>s(e).operatingSiteUser=l),objKey:"operatingSiteUser",permissions:t.permissions,errors:s(e).errors,label:"Wähle die Rechte des Mitarbeitenden für die ausgewählte Betriebsstätte aus","data-testid":"userOperatingSitePermissions"},null,8,["modelValue","permissions","errors"])]),_:1})]),_:1})]),_:1}),r(V,{class:"mb-4"},{default:o(()=>[r(v,null,{default:o(()=>[...a[40]||(a[40]=[y("Abteilung",-1)])]),_:1}),r(k,null,{default:o(()=>[r(w,null,{default:o(()=>{var l;return[r(n,{cols:"12",class:"mb-4"},{default:o(()=>[r(S,{modelValue:s(e).group_id,"onUpdate:modelValue":a[27]||(a[27]=u=>s(e).group_id=u),items:t.groups.map(u=>({title:u.name,value:u.id})),label:"Wähle eine Abteilung aus, zu die der Mitarbeiter gehören soll. (optional)","error-messages":s(e).errors.group_id,"data-testid":"userGroupSelection"},null,8,["modelValue","items","error-messages"])]),_:1}),(l=s(e))!=null&&l.group_id?(g(),f(D,{key:0,modelValue:s(e).groupUser,"onUpdate:modelValue":a[28]||(a[28]=u=>s(e).groupUser=u),objKey:"groupUser",permissions:t.permissions,errors:s(e).errors,label:"Abteilungsrechte","data-testid":"userGroupPermissions"},null,8,["modelValue","permissions","errors"])):c("",!0)]}),_:1})]),_:1})]),_:1}),r(V,{class:"mb-4"},{default:o(()=>[r(v,null,{default:o(()=>[...a[41]||(a[41]=[y("Vorgesetzter",-1)])]),_:1}),r(k,null,{default:o(()=>[r(w,null,{default:o(()=>[r(n,{cols:"12",md:"6"},{default:o(()=>[r(S,{modelValue:s(e).supervisor_id,"onUpdate:modelValue":a[29]||(a[29]=l=>s(e).supervisor_id=l),items:t.supervisors.map(l=>({title:l.first_name+" "+l.last_name,value:l.id})),label:"Wähle einen Vorgesetzten, falls vorhanden (optional)","error-messages":s(e).errors.supervisor_id,"data-testid":"userSupervisorSelection"},null,8,["modelValue","items","error-messages"])]),_:1}),r(n,{cols:"12",md:"6"},{default:o(()=>[r(j,{modelValue:s(e).is_supervisor,"onUpdate:modelValue":a[30]||(a[30]=l=>s(e).is_supervisor=l),label:"Ist ein Vorgesetzter"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),(b=t.user)!=null&&b.organization_id||(p=t.user)!=null&&p.supervisor?(g(),f(V,{key:0,class:"mb-4"},{default:o(()=>[r(v,null,{default:o(()=>[...a[42]||(a[42]=[y("Kündigungseinstellungen",-1)])]),_:1}),r(k,null,{default:o(()=>[r(w,null,{default:o(()=>[r(n,{cols:"12",md:"3"},{default:o(()=>[r(d,{type:"date",label:"Kündigungsdatum",min:s(T)()!="Apple Safari"?s(m).now().plus({day:1}).toFormat("yyyy-MM-dd"):void 0,modelValue:s(e).resignation_date,"onUpdate:modelValue":a[31]||(a[31]=l=>s(e).resignation_date=l),disabled:s(T)()!="Apple Safari"?!!s(e).resignation_date&&s(m).now().toFormat("yyyy-MM-dd")>s(e).resignation_date:!1,"error-messages":s(e).errors.resignation_date,clearable:""},null,8,["min","modelValue","disabled","error-messages"])]),_:1})]),_:1})]),_:1})]),_:1})):c("",!0),I("div",X,[r(U,{type:"submit",color:"primary",loading:s(e).processing},{default:o(()=>[...a[43]||(a[43]=[y("Speichern",-1)])]),_:1},8,["loading"])])]}),_:1},8,["disabled"]))}}),le=J(Z,[["__scopeId","data-v-6099dcee"]]);export{le as default};
