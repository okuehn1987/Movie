import{d as G,I as N,c as p,D as H,o as d,b as f,e as s,n as S,g as t,L as z,M as i,h as r,W as c,k as _,l as u,t as a,z as m,f as k,j as V,s as y,V as T,G as W}from"./app-DN4nCXpW.js";import{a as A,f as h}from"./utils-C6hGDhZV.js";const B={class:"d-flex align-center ga-3"},D={class:"d-flex flex-column"},L={class:"text-h6"},K={class:"d-flex align-center ga-3"},O={class:"d-flex flex-column"},$={class:"text-h6"},F={class:"d-flex align-center ga-3"},I={class:"d-flex flex-column"},Q={class:"text-h6"},U={class:"d-flex align-center ga-3"},j={class:"d-flex flex-column"},J={class:"text-h6"},P=G({__name:"WorkingHours",props:{overtime:{},workingHours:{},user:{}},setup(C){const l=C,b=N(),g=A();function w(e=!1){W.post(route("workLog.store"),{is_home_office:e})}const M=p(()=>{var e,o,n;return l.user.latest_work_log?l.user.latest_work_log.end?((e=l.user.current_shift)==null?void 0:e.current_work_duration)??0:g.value.diff(H.fromSQL(((o=l.user.latest_work_log)==null?void 0:o.start)||"")).as("seconds")+(((n=l.user.current_shift)==null?void 0:n.current_work_duration)??0):0}),x=p(()=>{if(!l.user.latest_work_log)return;const e=H.fromSQL(l.user.latest_work_log.end??l.user.latest_work_log.start),o=g.value.diff(e);return o.as("minutes")<1?"Jetzt":o.as("hours")<1?"vor "+Math.floor(o.as("minutes"))+" minuten":e.day!==g.value.day?e.toFormat("dd.MM - HH:mm")+" Uhr":e.toFormat("HH:mm")+" Uhr"});return(e,o)=>(d(),f(S,{title:"Arbeitszeit"},{default:s(()=>[t(T,null,{default:s(()=>[t(z,null,{default:s(()=>[t(i,{cols:"12",sm:"6"},{default:s(()=>[r("div",B,[t(c,{color:"blue-grey",rounded:"",size:"40",class:"elevation-2"},{default:s(()=>[t(_,{size:"24",icon:"mdi-clock-check"})]),_:1}),r("div",D,[o[2]||(o[2]=u(" Aktuelle Schicht ")),r("div",L,a(m(h)(Math.max(0,M.value),"minutes")),1)])])]),_:1}),t(i,{cols:"12",sm:"6"},{default:s(()=>[r("div",K,[t(c,{color:"orange",rounded:"",size:"40",class:"elevation-2 text-white"},{default:s(()=>[t(_,{size:"24",icon:"mdi-clock-plus"})]),_:1}),r("div",O,[o[3]||(o[3]=u(" Ãœberstunden ")),r("div",$,a(m(h)(e.overtime,"minutes")),1)])])]),_:1}),e.user.latest_work_log?(d(),f(i,{key:0,cols:"12",sm:"6"},{default:s(()=>[r("div",F,[t(c,{color:"blue",rounded:"",size:"40",class:"elevation-2"},{default:s(()=>[t(_,{size:"24",icon:"mdi-timer"})]),_:1}),r("div",I,[u(a(e.user.latest_work_log.end?"Gehen":"Kommen")+" ",1),r("div",Q,a(x.value),1)])])]),_:1})):k("",!0),e.$page.props.auth.user.home_office||e.workingHours.homeOfficeHours?(d(),f(i,{key:1,cols:"12",sm:"6"},{default:s(()=>[r("div",U,[t(c,{color:"green",rounded:"",size:"40",class:"elevation-2"},{default:s(()=>[t(_,{size:"24",icon:"mdi-clock-check"})]),_:1}),r("div",j,[o[4]||(o[4]=u(" Woche Homeoffice ")),r("div",J,a(m(h)(e.workingHours.homeOfficeHours,"minutes"))+" ("+a(Math.round(e.workingHours.homeOfficeHours/e.workingHours.totalHours*100))+"%) ",1)])])]),_:1})):k("",!0)]),_:1}),t(z,null,{default:s(()=>[m(b).props.auth.user.home_office&&(!e.user.latest_work_log||e.user.latest_work_log.end)||e.user.latest_work_log&&e.user.latest_work_log.is_home_office&&!e.user.latest_work_log.end?(d(),f(i,{key:0,cols:"12",md:"6"},{default:s(()=>[t(V,{block:"",size:"large",onClick:o[0]||(o[0]=y(n=>w(!0),["stop"])),color:"primary",class:"me-2"},{default:s(()=>[u(a(!e.user.latest_work_log||e.user.latest_work_log.end?"Kommen Homeoffice":"Gehen Homeoffice"),1)]),_:1})]),_:1})):k("",!0),t(i,{cols:"12",md:"6"},{default:s(()=>{var n,v;return[(n=e.user.latest_work_log)!=null&&n.end||!((v=e.user.latest_work_log)!=null&&v.is_home_office)?(d(),f(V,{key:0,block:"",size:"large",onClick:o[1]||(o[1]=y(R=>w(),["stop"])),color:"primary"},{default:s(()=>[u(a(!e.user.latest_work_log||e.user.latest_work_log.end?"Kommen":"Gehen"),1)]),_:1})):k("",!0)]}),_:1})]),_:1})]),_:1})]),_:1}))}});export{P as _};
