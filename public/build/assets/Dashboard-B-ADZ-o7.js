import{A as f}from"./AdminLayout-1fImWb_b.js";import{c as g}from"./utils-DpGD7wvb.js";import{d as k,r as y,a as l,o as u,b as e,f as a,K as d,L as o,e as m,V,h as b,Z as v,g as i,D as p,a3 as _,l as w,A as H}from"./app-BEVyWQGH.js";import{_ as c}from"./Absences.vue_vue_type_script_setup_true_lang-Bnw8_8pI.js";import{_ as h}from"./WorkingHours.vue_vue_type_script_setup_true_lang-BX7PfNZM.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const $=k({__name:"Dashboard",props:{user:{},supervisor:{},overtime:{},workingHours:{},currentAbsences:{},lastWeekEntries:{}},setup(C){const n=y(1);return(t,s)=>(u(),l(f,{title:"Dashboard"},{default:e(()=>[a(d,null,{default:e(()=>[a(o,{cols:"12",lg:"6"},{default:e(()=>[a(d,null,{default:e(()=>[t.can("app","tide")&&!t.user.current_trust_working_hours?(u(),l(o,{key:0,cols:"12"},{default:e(()=>[a(h,{user:t.user,overtime:t.overtime,workingHours:t.workingHours},null,8,["user","overtime","workingHours"])]),_:1})):m("",!0),t.can("app","tide")?(u(),l(o,{key:1,cols:"12"},{default:e(()=>[a(V,{title:"Letzte Zeiterfassungen"},{append:e(()=>[a(w,{icon:"mdi-eye",variant:"text",title:"Alle Zeiten anzeigen","data-testid":"workingHours",onClick:s[0]||(s[0]=r=>i(H).get(t.route("user.workLog.index",{user:t.$page.props.auth.user.id})))})]),default:e(()=>[a(b,null,{default:e(()=>[a(v,{page:n.value,"onUpdate:page":s[2]||(s[2]=r=>n.value=r),"items-per-page":"5",items:t.lastWeekEntries.map(r=>({...r,start:i(p).fromSQL(r.start).toFormat("dd.MM.yyyy HH:mm"),end:r.end?i(p).fromSQL(r.end).toFormat("dd.MM.yyyy HH:mm"):"Jetzt",duration:i(g)(r.duration,"minutes")})),headers:[{title:"Start",key:"start",sortable:!1},{title:"Ende",key:"end",sortable:!1},{title:"Dauer",key:"duration",sortable:!1}]},{bottom:e(()=>[t.lastWeekEntries.length>5?(u(),l(_,{key:0,modelValue:n.value,"onUpdate:modelValue":s[1]||(s[1]=r=>n.value=r),length:Math.ceil(t.lastWeekEntries.length/5)},null,8,["modelValue","length"])):m("",!0)]),_:1},8,["page","items"])]),_:1})]),_:1})]),_:1})):m("",!0)]),_:1})]),_:1}),a(o,{cols:"12",lg:"6"},{default:e(()=>[a(d,null,{default:e(()=>[a(o,{cols:"12"},{default:e(()=>[a(c,{absences:t.currentAbsences},null,8,["absences"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}});export{$ as default};
