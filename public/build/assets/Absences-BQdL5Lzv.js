import{_ as g}from"./AdminLayout.vue_vue_type_script_setup_true_lang-opli1xSJ.js";import{d as k,r as v,a as p,o as d,b as a,f as t,V as D,u,g as S,M as _,N as c,au as C,v as y,F as b,x as w,e as x,av as T,aw as E,h as i,t as n,m as V,ax as F,q as M,D as m,a5 as N,ao as A}from"./app-CNKB5GAv.js";import{_ as B}from"./UserShowNavBar.vue_vue_type_script_setup_true_lang-BJL5PlCH.js";import{u as L}from"./utils-zDqPy2p4.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const P={class:"text-h6"},G={class:"font-weight-bold"},U={colspan:"4"},J=k({__name:"Absences",props:{user:{},absenceTypes:{}},setup(h){const f=v(h.absenceTypes.map((s,o)=>o));return(s,o)=>(d(),p(g,{title:s.user.first_name+" "+s.user.last_name},{default:a(()=>[t(B,{user:s.user,tab:"absences"},null,8,["user"]),t(D,{"max-height":u(L)(48).value,class:"overflow-auto"},{default:a(()=>[t(S,null,{default:a(()=>[t(_,null,{default:a(()=>[t(c,{cols:"12"},{default:a(()=>[t(C,{elevation:"1",multiple:"",modelValue:f.value,"onUpdate:modelValue":o[0]||(o[0]=l=>f.value=l)},{default:a(()=>[(d(!0),y(b,null,w(s.absenceTypes,l=>(d(),y(b,{key:l.id},[s.user.absences.filter(e=>e.absence_type_id==l.id).reduce((e,r)=>e+r.usedDays,0)>0?(d(),p(T,{key:0},{default:a(()=>[t(E,null,{default:a(()=>[t(_,null,{default:a(()=>[t(c,{cols:"12",md:"11"},{default:a(()=>[i("h2",P,n(l.name),1)]),_:2},1024),t(c,{cols:"12",md:"1",style:{"place-self":"center"}},{default:a(()=>[V(n(s.user.absences.filter(e=>e.absence_type_id==l.id).reduce((e,r)=>e+r.usedDays,0))+" Tage ",1)]),_:2},1024)]),_:2},1024)]),_:2},1024),t(F,null,{default:a(()=>[t(M,{id:"userAbsenceTable",items:s.user.absences.filter(e=>e.absence_type_id==l.id).toSorted((e,r)=>r.start.localeCompare(e.start)).map(e=>{var r;return{...e,start:u(m).fromSQL(e.start).toFormat("dd.MM.yyyy"),end:u(m).fromSQL(e.end).toFormat("dd.MM.yyyy"),absence_type:(r=e.absence_type)==null?void 0:r.name,usedDays:e.usedDays.toString()}}),headers:[{title:"Start",key:"start"},{title:"Ende",key:"end"},{title:"Status",key:"status"},{title:"Art",key:"absence_type"},{title:"Genutzte Tage",key:"usedDays"}]},N({"item.status":a(({item:e})=>[t(A,{color:{accepted:"success",created:"warning",declined:"error"}[e.status]},{default:a(()=>[V(n({accepted:"Genehmigt",created:"Offen",declined:"Abgelehnt"}[e.status]),1)]),_:2},1032,["color"])]),_:2},[l.name=="Urlaub"?{name:"body.append",fn:a(()=>[i("tr",G,[i("td",U," Genutzte Urlaubstage f√ºr das Jahr "+n(u(m).now().year)+": ",1),i("td",null,n(s.user.usedLeaveDaysForYear+" von "+s.user.leaveDaysForYear),1)])]),key:"0"}:void 0]),1032,["items"])]),_:2},1024)]),_:2},1024)):x("",!0)],64))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["max-height"])]),_:1},8,["title"]))}});export{J as default};
