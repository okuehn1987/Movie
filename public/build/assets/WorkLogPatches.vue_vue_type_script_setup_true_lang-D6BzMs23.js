import{d as S,r as i,o as d,A as x,g as a,e as l,z as m,T as D,b as c,i as L,f as b,F as T,U as _,D as f,j as p,k as N,l as v,V as B,L as F,M as k,x as H,X as U,s as h,n as A,G as E}from"./app-s6gBDFVV.js";const $=S({__name:"WorkLogPatches",props:{patches:{}},setup(C){var y;const V=C,o=i(((y=V.patches)==null?void 0:y.find(s=>s.id==Number(route().params.openPatch)))??null),n=i(!!o.value),M=i(!1),r=i(1);function P(s,t){var u;const e=(u=V.patches)==null?void 0:u.find(w=>w.id===t.item.id);e&&(o.value=e,n.value=!0)}function g(s){o.value&&E.patch(route("workLogPatch.update",{workLogPatch:o.value.id}),{accepted:s},{onSuccess:()=>{n.value=!1,M.value=!0}})}return(s,t)=>(d(),x(T,null,[a(D,{hover:"","items-per-page":"5",page:r.value,"onUpdate:page":t[1]||(t[1]=e=>r.value=e),"no-data-text":"keine Zeitkorrekturen vorhanden.","onClick:row":P,items:s.patches.map(e=>({id:e.id,user:e.user.first_name+" "+e.user.last_name,date:m(f).fromSQL(e.start).toFormat("dd.MM.yyyy")})),headers:[{title:"Mitarbeiter",key:"user"},{title:"Datum",key:"date"}]},{bottom:l(()=>[s.patches.length>5?(d(),c(_,{key:0,modelValue:r.value,"onUpdate:modelValue":t[0]||(t[0]=e=>r.value=e),length:Math.ceil(s.patches.length/5)},null,8,["modelValue","length"])):b("",!0)]),_:1},8,["page","items"]),o.value?(d(),c(L,{key:0,modelValue:n.value,"onUpdate:modelValue":t[6]||(t[6]=e=>n.value=e),"max-width":"1000"},{default:l(()=>[a(A,{title:"Zeitkorrektur von "+o.value.user.first_name+" "+o.value.user.last_name},{append:l(()=>[a(p,{icon:"",variant:"text",onClick:t[2]||(t[2]=e=>n.value=!1)},{default:l(()=>[a(N,null,{default:l(()=>t[7]||(t[7]=[v("mdi-close")])),_:1})]),_:1})]),default:l(()=>[a(B,null,{default:l(()=>[a(F,null,{default:l(()=>[a(k,{cols:"12"},{default:l(()=>[a(H,{headers:[{title:"",key:"version",sortable:!1},{title:"Start",key:"start",sortable:!1},{title:"Ende",key:"end",sortable:!1},{title:"Homeoffice",key:"is_home_office",sortable:!1}],items:[o.value.log,o.value].map((e,u)=>({version:u==0?"Alter Stand:":"Neuer Stand:",start:m(f).fromSQL(e.start).toFormat("dd.MM.yyyy HH:mm"),end:e.end?m(f).fromSQL(e.end).toFormat("dd.MM.yyyy HH:mm"):"kein Ende",is_home_office:e.is_home_office?"Ja":"Nein"}))},null,8,["items"])]),_:1}),a(k,{cols:"12"},{default:l(()=>[a(U,{modelValue:o.value.comment,"onUpdate:modelValue":t[3]||(t[3]=e=>o.value.comment=e),readonly:"",label:"Bemerkung",variant:"filled",rows:"3"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(k,{cols:"12",class:"d-flex justify-end ga-3"},{default:l(()=>[a(p,{color:"error",onClick:t[4]||(t[4]=h(e=>g(!1),["stop"]))},{default:l(()=>t[8]||(t[8]=[v("Ablehnen")])),_:1}),a(p,{color:"success",onClick:t[5]||(t[5]=h(e=>g(!0),["stop"]))},{default:l(()=>t[9]||(t[9]=[v("Akzeptieren")])),_:1})]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])):b("",!0)],64))}});export{$ as _};
