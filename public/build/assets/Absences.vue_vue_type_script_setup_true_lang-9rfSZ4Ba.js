import{d as F,r as d,o as f,c as p,b as t,V as A,e as l,O as B,k as M,u as r,D as i,P as T,s as _,f as v,g as L,h as b,i as N,n as Q,p as m,I as y,m as w,E as U}from"./app-DZ-hi0sD.js";const $=F({__name:"Absences",props:{absences:{}},setup(C){var c;const V=C,s=d(((c=V.absences)==null?void 0:c.find(n=>n.id==Number(route().params.openAbsence)))??null),o=d(!!s.value),x=d(!1),u=d(1);function S(n,e){var k;const a=(k=V.absences)==null?void 0:k.find(D=>D.id===e.item.id);a&&(s.value=a,o.value=!0)}function g(n){s.value&&U.patch(route("absence.update",{absence:s.value.id}),{accepted:n},{onSuccess:()=>{o.value=!1,x.value=!0}})}return(n,e)=>(f(),p(A,{title:"Abwesenheiten"},{default:t(()=>[l(T,{hover:"","items-per-page":"5",page:u.value,"onUpdate:page":e[1]||(e[1]=a=>u.value=a),"no-data-text":"keine Abwesenheiten vorhanden.","onClick:row":S,items:n.absences.map(a=>({id:a.id,user:a.user.first_name+" "+a.user.last_name,start:r(i).fromSQL(a.start).toFormat("dd.MM.yyyy"),end:r(i).fromSQL(a.end).toFormat("dd.MM.yyyy")})),headers:[{title:"Mitarbeiter",key:"user"},{title:"Von",key:"start"},{title:"Bis",key:"end"}]},{bottom:t(()=>[n.absences.length>5?(f(),p(B,{key:0,modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=a=>u.value=a),length:Math.ceil(n.absences.length/5)},null,8,["modelValue","length"])):M("",!0)]),_:1},8,["page","items"]),s.value?(f(),p(_,{key:0,modelValue:o.value,"onUpdate:modelValue":e[6]||(e[6]=a=>o.value=a),"max-width":"1000"},{default:t(()=>[l(A,{title:"Abwesenheit von "+s.value.user.first_name+" "+s.value.user.last_name},{append:t(()=>[l(v,{icon:"",variant:"text",onClick:e[2]||(e[2]=a=>o.value=!1)},{default:t(()=>[l(L,null,{default:t(()=>e[7]||(e[7]=[b("mdi-close")])),_:1})]),_:1})]),default:t(()=>[l(N,null,{default:t(()=>[l(Q,null,{default:t(()=>[l(m,{cols:"12"},{default:t(()=>[l(y,{label:"Abwesenheitsgrund",modelValue:s.value.absence_type.name,"onUpdate:modelValue":e[3]||(e[3]=a=>s.value.absence_type.name=a),readonly:""},null,8,["modelValue"])]),_:1}),l(m,{cols:"12",md:"6"},{default:t(()=>[l(y,{label:"Von:","model-value":r(i).fromSQL(s.value.start).toFormat("dd.MM.yyyy"),readonly:""},null,8,["model-value"])]),_:1}),l(m,{cols:"12",md:"6"},{default:t(()=>[l(y,{label:"Bis:","model-value":r(i).fromSQL(s.value.end).toFormat("dd.MM.yyyy"),readonly:""},null,8,["model-value"])]),_:1})]),_:1})]),_:1}),l(m,{cols:"12",class:"d-flex justify-end ga-3"},{default:t(()=>[l(v,{color:"error",onClick:e[4]||(e[4]=w(a=>g(!1),["stop"]))},{default:t(()=>e[8]||(e[8]=[b("Ablehnen")])),_:1}),l(v,{color:"success",onClick:e[5]||(e[5]=w(a=>g(!0),["stop"]))},{default:t(()=>e[9]||(e[9]=[b("Akzeptieren")])),_:1})]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])):M("",!0)]),_:1}))}});export{$ as _};
