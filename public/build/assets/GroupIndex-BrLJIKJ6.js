import{d as v,X as C,o as i,a as m,b as e,f as a,n as S,p as h,u as t,B as A,h as d,Y as P,j as f,v as V,k as b,V as w,E as B,i as F,H,I as p,K as M,J as R,e as c,R as T,Z as I}from"./app-BoSVJM8y.js";import{_ as N}from"./AdminLayout.vue_vue_type_script_setup_true_lang-CcvRXbfx.js";import{b as U,u as $}from"./utils-u7_3xwY7.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const j=v({__name:"GroupIndex",props:{groups:{},users:{}},setup(y){const _=y,{currentPage:n,lastPage:g,data:k}=U(C(_),"groups"),l=useForm({name:"",users:[]}),x=$(0);return(u,s)=>(i(),m(N,{title:"Abteilungen"},{default:e(()=>[a(V,null,{default:e(()=>[a(S,{style:h({maxHeight:t(x)}),"fixed-header":"",headers:[{title:"Abteilungsname",key:"name"},{title:"Mitarbeitende",key:"users_count"},{title:"",key:"actions",align:"end"}],items:t(k)},{"header.actions":e(()=>[u.can("group","create")?(i(),m(A,{key:0,"max-width":"1000"},{activator:e(({props:r})=>[a(d,P(r,{color:"primary"}),{default:e(()=>[a(f,{icon:"mdi-plus"})]),_:2},1040)]),default:e(({isActive:r})=>[a(V,{title:"Abteilung erstellen"},{append:e(()=>[a(d,{icon:"",variant:"text",onClick:o=>r.value=!1},{default:e(()=>[a(f,null,{default:e(()=>s[3]||(s[3]=[b("mdi-close")])),_:1})]),_:2},1032,["onClick"])]),default:e(()=>[a(w,null,{default:e(()=>[a(B,{onSubmit:F(o=>{t(l).post(u.route("group.store"),{onSuccess:()=>{t(l).reset(),r.value=!1}})},["prevent"])},{default:e(()=>[a(H,null,{default:e(()=>[a(p,{cols:"12",sm:"6"},{default:e(()=>[a(M,{modelValue:t(l).name,"onUpdate:modelValue":s[0]||(s[0]=o=>t(l).name=o),"error-messages":t(l).errors.name,label:"Abteilungsname"},null,8,["modelValue","error-messages"])]),_:1}),a(p,{cols:"12",sm:"6"},{default:e(()=>[a(R,{"data-testid":"employeeGroupAssignment",modelValue:t(l).users,"onUpdate:modelValue":s[1]||(s[1]=o=>t(l).users=o),"error-messages":t(l).errors.users,items:u.users.map(o=>({value:o.id,title:o.name})),label:"Wähle Mitarbeiter aus, die zur Abteilung gehören (optional)",multiple:""},null,8,["modelValue","error-messages","items"])]),_:1}),a(p,{cols:"12",class:"text-end"},{default:e(()=>[a(d,{loading:t(l).processing,type:"submit",color:"primary"},{default:e(()=>s[4]||(s[4]=[b("Erstellen")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:2},1032,["onSubmit"])]),_:2},1024)]),_:2},1024)]),_:1})):c("",!0)]),bottom:e(()=>[t(g)>1?(i(),m(T,{key:0,modelValue:t(n),"onUpdate:modelValue":s[2]||(s[2]=r=>I(n)?n.value=r:null),length:t(g)},null,8,["modelValue","length"])):c("",!0)]),_:1},8,["style","items"])]),_:1})]),_:1}))}});export{j as default};
